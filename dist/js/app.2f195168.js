(function(e){function t(t){for(var a,r,l=t[0],i=t[1],c=t[2],p=0,d=[];p<l.length;p++)r=l[p],o[r]&&d.push(o[r][0]),o[r]=0;for(a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a]);u&&u(t);while(d.length)d.shift()();return s.push.apply(s,c||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],a=!0,l=1;l<n.length;l++){var i=n[l];0!==o[i]&&(a=!1)}a&&(s.splice(t--,1),e=r(r.s=n[0]))}return e}var a={},o={app:0},s=[];function r(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=e,r.c=a,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(n,a,function(t){return e[t]}.bind(null,a));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],i=l.push.bind(l);l.push=t,l=l.slice();for(var c=0;c<l.length;c++)t(l[c]);var u=i;s.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";var a=n("64a9"),o=n.n(a);o.a},"1ca9":function(e,t,n){},"1e37":function(e,t,n){"use strict";var a=n("3905"),o=n.n(a);o.a},"30d6":function(e,t,n){},"36c0":function(e,t,n){},3905:function(e,t,n){},"4e93":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("0fb7"),n("450d");var a=n("f529"),o=n.n(a),s=(n("ce18"),n("f58e")),r=n.n(s),l=(n("f225"),n("89a9")),i=n.n(l),c=(n("672e"),n("101e")),u=n.n(c),p=(n("075a"),n("72aa")),d=n.n(p),m=(n("e612"),n("dd87")),h=n.n(m),f=(n("a7cc"),n("df33")),v=n.n(f),b=(n("560b"),n("dcdc")),g=n.n(b),w=(n("5466"),n("ecdf")),P=n.n(w),_=(n("38a0"),n("ad41")),j=n.n(_),y=(n("10cb"),n("f3ad")),S=n.n(y),k=(n("6611"),n("e772")),I=n.n(k),L=(n("1f1a"),n("4e4b")),x=n.n(L),C=(n("eca7"),n("3787")),$=n.n(C),O=(n("425f"),n("4105")),G=n.n(O),U=(n("1951"),n("eedf")),V=n.n(U),E=(n("8bd8"),n("4cb2")),M=n.n(E),T=(n("4ca3"),n("443e")),R=n.n(T),D=(n("f4f9"),n("c2cc")),A=n.n(D),N=(n("7a0f"),n("0f6c")),F=n.n(N),q=(n("cadf"),n("551c"),n("097d"),n("2b0e")),Q=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("el-row",{attrs:{gutter:20}},[n("navbar"),n("el-col",{attrs:{span:18,offset:6}},[n("router-view")],1)],1)],1)},z=[],J=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-menu",{staticClass:"lel-menu-vertical-demo",attrs:{"default-active":e.activeIndex,"background-color":"#545c64","text-color":"#fff","active-text-color":"#ffd04b"}},[n("h1",{staticClass:"layout-navbar-title",staticStyle:{color:"#fff"}},[e._v("大地監控")]),e.isLogined?[[n("el-menu-item",{attrs:{index:"1"},on:{click:function(t){e.toPath("UserInfo")}}},[e._v("帳號資料")]),n("el-menu-item",{attrs:{index:"2"},on:{click:function(t){e.toPath("ProjectList")}}},[e._v("專案列表")])],e.roleIs("ADMIN")?[n("el-menu-item",{attrs:{index:"3"},on:{click:function(t){e.toPath("VGList")}}},[e._v("軸力計設定")]),n("el-menu-item",{attrs:{index:"4"},on:{click:function(t){e.toPath("SOItems")}}},[e._v("傾度管設定")]),n("el-menu-item",{attrs:{index:"5"},on:{click:function(t){e.toPath("UserList")}}},[e._v("帳號設定")]),n("el-submenu",{attrs:{index:"6","menu-trigger":"click"}},[n("template",{slot:"title"},[e._v("專案設定")]),n("el-menu-item",{attrs:{index:"6-1"},on:{click:function(t){e.toPath("ProjectSetting")}}},[e._v("設定專案資料")]),n("el-menu-item",{attrs:{index:"6-2"},on:{click:function(t){e.toPath("ProjectPhaseList")}}},[e._v("設定執行階段")])],2),n("el-menu-item",{attrs:{index:"7"},on:{click:function(t){e.toPath("PermissionSetup")}}},[e._v("權限設定")])]:e._e(),n("el-menu-item",{attrs:{index:"8"},on:{click:e.logout}},[e._v("登出")])]:e._e()],2)},Z=[],B={methods:{toPath:function(e,t){this.$router.push({name:e,params:t})}}},W=B,H={methods:{roleIs:function(e){return this.$store.getters.myRole===e}}},K=H,X={name:"Navbar",mixins:[W,K],data:function(){return{activeIndex:"0"}},computed:{isLogined:function(){return this.$store.getters.token}},methods:{logout:function(){this.$store.dispatch("logout"),this.toPath("Entry")}}},Y=X,ee=(n("5dfc"),n("2877")),te=Object(ee["a"])(Y,J,Z,!1,null,null,null);te.options.__file="Navbar.vue";var ne=te.exports,ae={name:"app",components:{Navbar:ne}},oe=ae,se=(n("034f"),Object(ee["a"])(oe,Q,z,!1,null,null,null));se.options.__file="App.vue";var re=se.exports,le=(n("ac6a"),n("5df3"),n("8c4f")),ie=n("8ded"),ce=n.n(ie),ue=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"entry"},[n("el-form",[n("el-form-item",{attrs:{label:"帳號"}},[n("el-input",{attrs:{type:"text",name:"account",placeholder:"請輸入帳號"},on:{input:e.removeError},model:{value:e.account,callback:function(t){e.account=t},expression:"account"}})],1),n("el-form-item",{attrs:{label:"密碼"}},[n("el-input",{attrs:{type:"password",name:"password",placeholder:"請輸入密碼"},on:{input:e.removeError},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1),n("el-form-item",[n("p",{staticClass:"feedback"},[e._v("\n        "+e._s(e.feedback)+"\n      ")]),n("div",{staticClass:"button-container"},[n("el-button",{attrs:{type:"primary","native-type":"submit"},on:{click:function(t){return t.preventDefault(),e.submit(t)}}},[e._v("\n          登入\n        ")])],1)])],1)],1)},pe=[],de={name:"Entry",data:function(){return{account:null,password:null,feedback:""}},methods:{submit:function(){var e=this;if(!this.account||!this.password)return this.feedback="帳號密碼不匹配";this.$store.dispatch("login",{account:this.account,password:this.password}).then(function(){e.$router.push({name:"ProjectList"})}).catch(function(t){console.log(t.message),e.feedback="帳號密碼不匹配"})},removeError:function(){this.feedback=""}}},me=de,he=(n("eeb3"),Object(ee["a"])(me,ue,pe,!1,null,null,null));he.options.__file="Entry.vue";var fe=he.exports,ve=function(){var e=this,t=this,n=t.$createElement,a=t._self._c||n;return a("div",{staticClass:"user-info"},[a("h1",[t._v("帳號資料")]),a("el-form",[a("section",[a("h2",[t._v("基本資料")]),a("p",[t._v("姓名："+t._s(t.me.name))]),a("p",[t._v("角色："+t._s(t.me.roleName))]),t.me.company?a("p",[t._v("公司："+t._s(t.me.company.name))]):t._e(),t.me.soItem?a("p",[t._v("傾度管 編號："+t._s(t.me.soItem.number))]):t._e()]),a("section",[a("h2",[t._v("聯絡方式")]),a("el-form-item",{attrs:{label:"電話"}},[a("el-input",{attrs:{value:t.me.phone,placeholder:"請輸入電話"},on:{change:function(t){return e.updateMe({phone:t})}}})],1),a("el-form-item",{attrs:{label:"email"}},[a("el-input",{attrs:{value:t.me.email,placeholder:"請輸入 email"},on:{change:function(t){return e.updateMe({email:t})}}})],1)],1),a("section",[a("h2",[t._v("密碼設定")]),a("el-form-item",{attrs:{label:"密碼"}},[a("el-input",{attrs:{value:t.me.password,placeholder:"請輸入密碼"},on:{change:function(t){return e.updateMe({password:t})}}})],1)],1),a("section",[a("h2",[t._v("參與專案")]),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.me.projects}},[a("el-table-column",{attrs:{prop:"id",label:"案號",width:"180"}}),a("el-table-column",{attrs:{prop:"name",label:"名稱"}})],1)],1),a("div",{staticClass:"button-container"},[a("el-button",{attrs:{type:"primary"},on:{click:t.submit}},[t._v("\n        確認\n      ")])],1)])],1)},be=[],ge={name:"UserInfo",mixins:[W],data:function(){return{}},computed:{me:function(){return this.$store.getters.me}},methods:{updateMe:function(e){this.$store.commit("updateMe",e)},submit:function(){var e=this;this.$store.dispatch("updateMe").then(function(){e.$message({message:"資料更新成功",type:"success"}),e.toPath("ProjectList")}).catch(function(t){e.$message.error(t,"資料更新失敗")})}}},we=ge,Pe=Object(ee["a"])(we,ve,be,!1,null,null,null);Pe.options.__file="UserInfo.vue";var _e=Pe.exports,je=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"userList"},[n("h1",[e._v("帳號列表")]),n("div",{staticClass:"operationGroup"},[n("div",{staticClass:"operationGroup-left"},[n("el-button",{attrs:{type:"primary"},on:{click:e.deleteUsers}},[e._v("刪除")])],1),n("div",{staticClass:"operationGroup-right"},[n("el-button",{attrs:{type:"primary"},on:{click:function(t){e.toPath("CreateUser")}}},[n("i",{staticClass:"el-icon-plus"})])],1)]),n("el-table",{staticClass:"userList-table",attrs:{data:e.userList},on:{"selection-change":e.updateDeleteList}},[n("el-table-column",{attrs:{type:"selection",width:"55"}}),n("el-table-column",{attrs:{prop:"id",label:"編號",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",{staticClass:"clickable",on:{click:function(n){e.toPath("EditUser",{userId:t.row.id})}}},[e._v("\n          "+e._s(t.row.id)+"\n        ")])]}}])}),n("el-table-column",{attrs:{prop:"name",label:"姓名",width:"180"}}),n("el-table-column",{attrs:{prop:"company.name",label:"公司",width:"180"}}),n("el-table-column",{attrs:{prop:"roleName",label:"角色"}})],1)],1)},ye=[],Se={name:"UserList",mixins:[W],data:function(){return{deleteList:[]}},computed:{userList:function(){return this.$store.getters.users}},methods:{deleteUsers:function(){0!==this.deleteList.length&&this.$store.dispatch("deleteUsers",this.deleteList)},updateDeleteList:function(e){this.deleteList=e.map(function(e){return e.id})}}},ke=Se,Ie=Object(ee["a"])(ke,je,ye,!1,null,null,null);Ie.options.__file="UserList.vue";var Le=Ie.exports,xe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"createUser"},[n("h1",[e._v("帳號設定")]),n("h2",[e._v("基本資料")]),n("el-form",{attrs:{"label-position":"top","label-width":"80px",model:e.newUser}},[n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"姓名"}},[n("el-input",{model:{value:e.newUser.name,callback:function(t){e.$set(e.newUser,"name",t)},expression:"newUser.name"}})],1)],1),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"角色"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"請選擇"},model:{value:e.newUser.roleName,callback:function(t){e.$set(e.newUser,"roleName",t)},expression:"newUser.roleName"}},e._l(e.roles,function(e){return n("el-option",{key:e.name,attrs:{label:e.name,value:e.name}})}))],1)],1)],1),n("el-row",{attrs:{gutter:20}},[n("el-col",[n("el-form-item",{attrs:{label:"帳號"}},[n("el-input",{model:{value:e.newUser.account,callback:function(t){e.$set(e.newUser,"account",t)},expression:"newUser.account"}})],1)],1)],1),n("el-form-item",{attrs:{label:"公司名稱"}},[n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:22}},[n("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"請選擇"},model:{value:e.newUser.companyId,callback:function(t){e.$set(e.newUser,"companyId",t)},expression:"newUser.companyId"}},e._l(e.companies,function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),n("el-col",{attrs:{span:2}},[n("el-button",{staticStyle:{width:"100%"},on:{click:function(t){e.toPath("CompanyList")}}},[e._v("\n            維護\n          ")])],1)],1)],1),n("el-form-item",{attrs:{label:"傾度管"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"請選擇"},model:{value:e.newUser.soId,callback:function(t){e.$set(e.newUser,"soId",t)},expression:"newUser.soId"}},e._l(e.soItems,function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),n("el-form-item",[n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:12}},[n("el-button",{staticStyle:{width:"100%"},on:{click:e.submit}},[e._v("\n            確定送出\n          ")])],1),n("el-col",{attrs:{span:12}},[n("el-button",{staticStyle:{width:"100%"},on:{click:e.cancel}},[e._v("\n            取消\n          ")])],1)],1)],1)],1)],1)},Ce=[],$e={name:"CreateUser",mixins:[W],data:function(){return{newUser:{name:"",roleName:null,companyId:null,soId:"",account:""}}},computed:{userList:function(){return this.$store.getters.users},roles:function(){return this.$store.getters.roles},companies:function(){return this.$store.getters.companies},soItems:function(){return this.$store.getters.soItems}},methods:{deleteUsers:function(){0!==this.deleteList.length&&this.$store.dispatch("deleteUsers",this.deleteList)},updateDeleteList:function(e){this.deleteList=e.map(function(e){return e.id})},reset:function(){this.newUser={name:"",roleName:null,companyId:null,soId:"",account:""}},cancel:function(){this.reset(),this.toPath("UserList")},submit:function(){var e=this;this.$store.dispatch("createUser",this.newUser).then(function(){e.reset(),e.toPath("UserList")})}}},Oe=$e,Ge=Object(ee["a"])(Oe,xe,Ce,!1,null,null,null);Ge.options.__file="CreateUser.vue";var Ue=Ge.exports,Ve=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"createUser"},[n("h1",[e._v("帳號設定")]),n("h2",[e._v("基本資料")]),n("el-form",{attrs:{"label-position":"top","label-width":"80px",model:e.newUser}},[n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"姓名"}},[n("el-input",{model:{value:e.newUser.name,callback:function(t){e.$set(e.newUser,"name",t)},expression:"newUser.name"}})],1)],1),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"角色"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"請選擇"},model:{value:e.newUser.roleName,callback:function(t){e.$set(e.newUser,"roleName",t)},expression:"newUser.roleName"}},e._l(e.roles,function(e){return n("el-option",{key:e.name,attrs:{label:e.name,value:e.name}})}))],1)],1)],1),n("el-row",{attrs:{gutter:20}},[n("el-col",[n("el-form-item",{attrs:{label:"帳號"}},[n("el-input",{model:{value:e.newUser.account,callback:function(t){e.$set(e.newUser,"account",t)},expression:"newUser.account"}})],1)],1)],1),n("el-form-item",{attrs:{label:"公司名稱"}},[n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:22}},[n("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"請選擇"},model:{value:e.newUser.companyId,callback:function(t){e.$set(e.newUser,"companyId",t)},expression:"newUser.companyId"}},e._l(e.companies,function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),n("el-col",{attrs:{span:2}},[n("el-button",{staticStyle:{width:"100%"},on:{click:function(t){e.toPath("CompanyList")}}},[e._v("\n            維護\n          ")])],1)],1)],1),n("el-form-item",{attrs:{label:"傾度管"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"請選擇"},model:{value:e.newUser.soId,callback:function(t){e.$set(e.newUser,"soId",t)},expression:"newUser.soId"}},e._l(e.soItems,function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),n("el-form-item",[n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:12}},[n("el-button",{staticStyle:{width:"100%"},on:{click:e.edit}},[e._v("\n            確定送出\n          ")])],1),n("el-col",{attrs:{span:12}},[n("el-button",{staticStyle:{width:"100%"},on:{click:e.cancel}},[e._v("\n            取消\n          ")])],1)],1)],1)],1)],1)},Ee=[],Me=(n("7f7f"),{name:"EditUser",mixins:[W],created:function(){this.$route.params.userId&&this.loadUser(this.$route.params.userId)},data:function(){return{newUser:{name:"",roleName:null,companyId:null,soId:"",account:""}}},computed:{userList:function(){return this.$store.getters.users},roles:function(){return this.$store.getters.roles},companies:function(){return this.$store.getters.companies},soItems:function(){return this.$store.getters.soItems}},methods:{deleteUsers:function(){0!==this.deleteList.length&&this.$store.dispatch("deleteUsers",this.deleteList)},updateDeleteList:function(e){this.deleteList=e.map(function(e){return e.id})},loadUser:function(e){var t=this;this.$store.dispatch("getUser",e).then(function(e){var n=e.data.data;t.newUser={name:n.name,roleName:n.roleName,companyId:n.company.id,account:n.account,soId:""}})},reset:function(){this.newUser={name:"",roleName:"",companyId:"",soId:"",account:""}},cancel:function(){this.reset(),this.toPath("UserList")},edit:function(){var e=this;this.$store.dispatch("updateUser",{userId:this.$route.params.userId,payload:this.newUser}).then(function(){e.reset(),e.toPath("UserList")})}}}),Te=Me,Re=Object(ee["a"])(Te,Ve,Ee,!1,null,null,null);Re.options.__file="EditUser.vue";var De=Re.exports,Ae=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"companyList"},[n("div",{staticClass:"operationGroup"},[n("div",{staticClass:"operationGroup-left"},[n("el-button",{attrs:{type:"primary"},on:{click:e.openCompanyDialog}},[e._v("新增")])],1),n("div",{staticClass:"operationGroup-right"},[e.hasDeleteItems?n("el-button",{attrs:{type:"primary"},on:{click:e.deleteCompany}},[e._v("\n        刪除\n      ")]):e._e()],1)]),n("el-table",{staticClass:"companyList-table",attrs:{data:e.companyList},on:{"selection-change":e.updateDeleteList}},[n("el-table-column",{attrs:{type:"selection",width:"180"}}),n("el-table-column",{attrs:{prop:"id",label:"編號",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",{staticClass:"clickable",on:{click:function(n){e.readAndOpenCompanyDialog(t.row.name)}}},[e._v("\n          "+e._s(t.row.id)+"\n        ")])]}}])}),n("el-table-column",{attrs:{prop:"name",label:"公司名稱"}})],1),n("div",{staticClass:"button-container"},[n("el-button",{attrs:{type:"primary"},on:{click:function(t){e.toPath("CreateUser")}}},[e._v("\n      離開\n    ")])],1),n("el-dialog",{attrs:{title:"新增公司",visible:e.createCompanyDialogVisible},on:{"update:visible":function(t){e.createCompanyDialogVisible=t}}},[n("el-input",{attrs:{placeholder:"請輸入公司名稱"},model:{value:e.newCompanyName,callback:function(t){e.newCompanyName=t},expression:"newCompanyName"}}),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"primary"},on:{click:e.createCompany}},[e._v("\n        確認\n      ")])],1)],1)],1)},Ne=[],Fe={name:"CompanyList",mixins:[W],data:function(){return{createCompanyDialogVisible:!1,deleteList:[],newCompanyName:null}},computed:{hasDeleteItems:function(){return this.deleteList.length>0},companyList:function(){return this.$store.getters.companies}},methods:{openCompanyDialog:function(){this.newCompanyName="",this.createCompanyDialogVisible=!0},readAndOpenCompanyDialog:function(e){this.newCompanyName=e,this.createCompanyDialogVisible=!0},createCompany:function(){this.$store.dispatch("createCompany",{name:this.newCompanyName}),this.createCompanyDialogVisible=!1},deleteCompany:function(){0!==this.deleteList.length&&this.$store.dispatch("deleteCompanies",this.deleteList)},updateDeleteList:function(e){this.deleteList=e.map(function(e){return e.id})}}},qe=Fe,Qe=(n("ef53"),Object(ee["a"])(qe,Ae,Ne,!1,null,null,null));Qe.options.__file="CompanyList.vue";var ze=Qe.exports,Je=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"permission-setup"},[n("el-table",{attrs:{data:e.rolePermissions}},[n("el-table-column",{attrs:{prop:"role",label:"角色",width:"180"}}),n("el-table-column",{attrs:{prop:"permissions",label:"權限"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.permissions,function(a,o){return e.permissions?n("div",{key:o},[n("el-checkbox",{attrs:{value:a.value},on:{change:function(n){e.updateRolePermissions(a.value,t.row.role,o)}}},[e._v("\n            "+e._s(e.permissions[a.name])+"\n          ")])],1):e._e()})}}])})],1),n("div",{staticClass:"button-container"},[n("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("\n      確認送出\n    ")]),n("el-button",{attrs:{type:"primary"},on:{click:function(t){e.toPath("ProjectList")}}},[e._v("\n      取消修改\n    ")])],1)],1)},Ze=[],Be={name:"PermissionSetup",mixins:[W],data:function(){return{}},computed:{permissions:function(){return this.$store.getters.permissions},rolePermissions:function(){return this.$store.getters.rolePermissions}},methods:{updateRolePermissions:function(e,t,n){e=!e,this.$store.commit("updateRolePermissions",{role:t,permissionIndex:n,value:e})},submit:function(){var e=this;this.$store.dispatch("updateRolePermissions").then(function(){e.$message({message:"權限設定成功",type:"success"}),e.toPath("ProjectList")}).catch(function(t){e.$message.error(t,"權限設定失敗")})}}},We=Be,He=(n("641f"),Object(ee["a"])(We,Je,Ze,!1,null,null,null));He.options.__file="PermissionSetup.vue";var Ke=He.exports,Xe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"projectSetting"},[n("el-row",{attrs:{gutter:20,type:"flex",justify:"space-between"}},[n("el-col",{attrs:{span:6}},[n("h1",[e._v("專案設定")])]),n("el-col",{attrs:{span:6}},[n("span",[e._v("專案狀態")]),e._v("dropdown\n      ")])],1),n("div",{staticClass:"operationGroup"},[n("div",{staticClass:"operationGroup-left"},[n("el-button",{attrs:{type:"primary"},on:{click:e.deleteProjects}},[e._v("刪除")])],1),n("div",{staticClass:"operationGroup-right"},[n("el-button",{attrs:{type:"primary"},on:{click:function(t){e.toPath("ProjectCreate")}}},[n("i",{staticClass:"el-icon-plus"})])],1)]),n("el-table",{staticClass:"projectList-table",attrs:{data:e.projectList},on:{"selection-change":e.updateDeleteList}},[n("el-table-column",{attrs:{type:"selection",width:"180"}}),n("el-table-column",{attrs:{prop:"id",label:"案號",width:"320"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",{staticClass:"clickable",on:{click:function(n){e.toPath("ProjectEdit",{projectId:t.row.id})}}},[e._v("\n          "+e._s(t.row.id)+"\n        ")])]}}])}),n("el-table-column",{attrs:{prop:"name",label:"名稱",width:"460"}})],1)],1)},Ye=[],et={name:"ProjectSetting",mixins:[W],data:function(){return{deleteList:[]}},computed:{projectList:function(){return this.$store.getters.projects}},methods:{deleteProjects:function(){0!==this.deleteList.length&&this.$store.dispatch("deleteProjects",this.deleteList)},updateDeleteList:function(e){this.deleteList=e.map(function(e){return e.id})}}},tt=et,nt=Object(ee["a"])(tt,Xe,Ye,!1,null,null,null);nt.options.__file="ProjectSetting.vue";var at=nt.exports,ot=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"projectList"},[n("el-row",{attrs:{gutter:20,type:"flex",justify:"space-between"}},[n("el-col",{attrs:{span:6}},[n("h1",[e._v("專案列表")])]),e.isAdminOrMGT()?n("el-col",{attrs:{span:6}},[n("span",[e._v("專案狀態")])]):e._e()],1),n("el-table",{staticClass:"projectList-table",attrs:{data:e.projectList}},[n("el-table-column",{attrs:{fixed:"",prop:"id",label:"案號",width:"320"}}),n("el-table-column",{attrs:{prop:"name",label:"名稱",width:"320"}}),n("el-table-column",{attrs:{label:"監控資料",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{on:{click:function(t){e.toPath("ProjectMonitor")}}},[e._v("監控資料")])]}}])}),n("el-table-column",{attrs:{label:"傾度管量測",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.isOPT()?n("el-button",{on:{click:function(n){e.toPath("MeasuresSo",{projectId:t.row.id})}}},[e._v("傾度管資料")]):e._e()]}}])})],1)],1)},st=[],rt={name:"ProjectList",mixins:[W],data:function(){return{deleteList:[]}},computed:{projectList:function(){return this.$store.getters.projects}},methods:{deleteProjects:function(){0!==this.deleteList.length&&this.$store.dispatch("deleteProjects",this.deleteList)},updateDeleteList:function(e){this.deleteList=e.map(function(e){return e.id})},isAdminOrMGT:function(){var e=this.$store.getters.myRole;return"MGT"===e||"ADMIN"===e},isOPT:function(){var e=this.$store.getters.myRole;return"OPT"===e}}},lt=rt,it=Object(ee["a"])(lt,ot,st,!1,null,null,null);it.options.__file="ProjectList.vue";var ct=it.exports,ut=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"createProject"},[n("h1",[e._v("專案設定")]),n("el-form",{attrs:{"label-position":"top","label-width":"80px",model:e.newProject}},[n("h2",[e._v("基本資料")]),n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"專案案號"}},[n("el-input",{attrs:{placeholder:"CNT - 16Q4"},model:{value:e.newProject.number,callback:function(t){e.$set(e.newProject,"number",t)},expression:"newProject.number"}})],1)],1),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"專案狀態"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"請選擇"},model:{value:e.newProject.status,callback:function(t){e.$set(e.newProject,"status",t)},expression:"newProject.status"}},e._l(e.statusList,function(e){return n("el-option",{key:e.name,attrs:{label:e.label,value:e.value}})}))],1)],1)],1),n("el-row",{attrs:{gutter:20}},[n("el-col",[n("el-form-item",{attrs:{label:"專案名稱"}},[n("el-input",{attrs:{placeholder:"阡福町商業大樓"},model:{value:e.newProject.name,callback:function(t){e.$set(e.newProject,"name",t)},expression:"newProject.name"}})],1)],1)],1),n("el-form-item",{attrs:{label:"地點"}},[n("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"大武街 34 號"},model:{value:e.newProject.address,callback:function(t){e.$set(e.newProject,"address",t)},expression:"newProject.address"}})],1),n("el-form-item",{attrs:{label:"客戶公司名稱"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"雨宮營造"},on:{change:e.resetMember},model:{value:e.newProject.companyId,callback:function(t){e.$set(e.newProject,"companyId",t)},expression:"newProject.companyId"}},e._l(e.companiesList,function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),n("h2",[e._v("參與人員")]),n("el-tabs",{attrs:{type:"border-card"}},[n("el-tab-pane",{attrs:{label:"OPT"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"金貝貝",multiple:""},on:{change:e.updateSelectedOPTs},model:{value:e.newProject.OPT,callback:function(t){e.$set(e.newProject,"OPT",t)},expression:"newProject.OPT"}},e._l(e.OPTs,function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),n("el-table",{staticClass:"projectList-table",attrs:{data:e.OPTList}},[n("el-table-column",{attrs:{label:"負責人",type:"selection",width:"180"}}),n("el-table-column",{attrs:{prop:"name",label:"OPT",width:"320"}})],1)],1),n("el-tab-pane",{attrs:{label:"USER"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"阿土伯",multiple:""},on:{change:e.updateSelectedUSERs},model:{value:e.newProject.USER,callback:function(t){e.$set(e.newProject,"USER",t)},expression:"newProject.USER"}},e._l(e.USERs,function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),n("el-table",{staticClass:"projectList-table",attrs:{data:e.USERList}},[n("el-table-column",{attrs:{label:"負責人",type:"selection",width:"180"}}),n("el-table-column",{attrs:{prop:"name",label:"USER",width:"320"}})],1)],1)],1),n("h1",[e._v("配置圖")]),n("el-upload",{staticClass:"upload-demo",attrs:{drag:"",action:"https://jsonplaceholder.typicode.com/posts/","on-change":e.uploadChange,"list-type":"picture","auto-upload":!1}},[e.imageSelected?n("img",{attrs:{src:this.image.url,alt:""}}):e._e(),e.imageSelected?e._e():n("i",{staticClass:"el-icon-upload"}),e.imageSelected?e._e():n("div",{staticClass:"el-upload__text"},[e._v("將文件拖到此處，或"),n("em",[e._v("點擊上傳")])]),e.imageSelected?n("el-button",{staticClass:"reselect",attrs:{size:"small",type:"primary"}},[e._v("另選圖片")]):e._e()],1),n("h2",[e._v("監控設定")]),n("el-tabs",{attrs:{type:"border-card"}},[n("el-tab-pane",{attrs:{label:"軸力計 ( VG )"}},[n("el-form-item",{attrs:{label:"使用軸力計編號"}},[e._v("\n          "+e._s(e.needMoreGauge)+"\n          "),n("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"可複選",multiple:""},on:{change:e.updateSelectedVGs},model:{value:e.newProject.vgIds,callback:function(t){e.$set(e.newProject,"vgIds",t)},expression:"newProject.vgIds"}},e._l(e.VGs,function(e){return n("el-option",{key:e.id,attrs:{disabled:!!e.projectName,label:e.number,value:e.id}})}))],1),n("div",{staticClass:"demo-input-suffix"},[e._v("\n          支撐階數：\n          "),n("el-input",{attrs:{placeholder:"3"},model:{value:e.newProject.floor,callback:function(t){e.$set(e.newProject,"floor",e._n(t))},expression:"newProject.floor"}}),e._v("\n          每層數量：\n          "),n("el-input",{attrs:{placeholder:"5"},model:{value:e.numOfFloor,callback:function(t){e.numOfFloor=e._n(t)},expression:"numOfFloor"}})],1),n("br"),n("el-button",{attrs:{disabled:!e.preparedShowVG},nativeOn:{click:function(t){e.getVGItems()}}},[e._v("import VGs")]),n("br"),n("br"),e.fullVGsInfo.length?n("div",{staticClass:"block"},[n("span",{staticClass:"demonstration"},[e._v("請選擇支撐階數")]),n("el-pagination",{attrs:{layout:"prev, pager, next",total:e.getPagination},on:{"current-change":e.currentFloor}})],1):e._e(),e.fullVGsInfo.length?n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:5}},[n("h2",[e._v("管理值"),n("span",[e._v("單位：噸")])]),e._v("\n            注意值\n            "),n("el-input",{attrs:{placeholder:"68.3"},model:{value:e.newProject.vgManagement[e.floorIndex].notice,callback:function(t){e.$set(e.newProject.vgManagement[e.floorIndex],"notice",e._n(t))},expression:"newProject.vgManagement[floorIndex].notice"}}),e._v("\n            警戒值\n            "),n("el-input",{attrs:{placeholder:"79.6"},model:{value:e.newProject.vgManagement[e.floorIndex].warning,callback:function(t){e.$set(e.newProject.vgManagement[e.floorIndex],"warning",e._n(t))},expression:"newProject.vgManagement[floorIndex].warning"}}),e._v("\n            行動值\n            "),n("el-input",{attrs:{placeholder:"104.2"},model:{value:e.newProject.vgManagement[e.floorIndex].action,callback:function(t){e.$set(e.newProject.vgManagement[e.floorIndex],"action",e._n(t))},expression:"newProject.vgManagement[floorIndex].action"}})],1),n("el-col",{attrs:{span:19}},[n("h2",[e._v("位置編碼"),n("span",[e._v("( VG - 層數 - 流水號 )")])]),n("el-button",{on:{click:function(t){e.toPath("SteelList")}}},[e._v("\n              維護鋼材資料\n            ")]),n("el-table",{staticClass:"vg-table",attrs:{data:e.vgTable}},[n("el-table-column",{attrs:{prop:"host",label:"VG ID",width:"320"}}),n("el-table-column",{attrs:{prop:"port",label:"Port",width:"80"}}),n("el-table-column",{attrs:{prop:"serial",label:"編碼",width:"100"}}),n("el-table-column",{attrs:{prop:"steelId",label:"鋼材",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-select",{attrs:{placeholder:"请选择"},model:{value:t.row.steelId,callback:function(n){e.$set(t.row,"steelId",n)},expression:"scope.row.steelId"}},e._l(e.Steels,function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))]}}])})],1)],1)],1):e._e()],1),n("el-tab-pane",{attrs:{label:"傾度管 ( SO )"}},[n("div",{staticClass:"demo-input-suffix"},[e._v("\n          數量：\n          "),n("el-input",{attrs:{placeholder:"5"},model:{value:e.soQt,callback:function(t){e.soQt=e._n(t)},expression:"soQt"}}),e._v("\n          每孔深度 ( m )：\n          "),n("el-input",{attrs:{placeholder:"20.5"},model:{value:e.soDepth,callback:function(t){e.soDepth=e._n(t)},expression:"soDepth"}})],1),n("br"),n("el-button",{attrs:{disabled:!e.preparedShowSO},nativeOn:{click:function(t){e.getSOItems()}}},[e._v("import SOs")]),n("br"),e.newProject.soLocation.length?n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:8}},[n("h2",[e._v("管理值"),n("span",[e._v("單位：cm")])]),e._v("\n            注意值\n            "),n("el-input",{attrs:{placeholder:"4.24"},model:{value:e.newProject.soManagement.notice,callback:function(t){e.$set(e.newProject.soManagement,"notice",e._n(t))},expression:"newProject.soManagement.notice"}}),e._v("\n            警戒值\n            "),n("el-input",{attrs:{placeholder:"9.88"},model:{value:e.newProject.soManagement.warning,callback:function(t){e.$set(e.newProject.soManagement,"warning",e._n(t))},expression:"newProject.soManagement.warning"}}),e._v("\n            行動值\n            "),n("el-input",{attrs:{placeholder:"15.06"},model:{value:e.newProject.soManagement.action,callback:function(t){e.$set(e.newProject.soManagement,"action",e._n(t))},expression:"newProject.soManagement.action"}})],1),n("el-col",{attrs:{span:14}},[n("h2",[e._v("位置編號"),n("span",[e._v("( SO - 流水號 )")])]),n("h5",[e._v("相同位置編碼 量測深度間隔 1 m")]),n("el-table",{staticClass:"so-table",attrs:{data:e.newProject.soLocation}},[n("el-table-column",{attrs:{prop:"number",label:"編碼",width:"200"}}),n("el-table-column",{attrs:{prop:"depth",label:"深度",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-input",{model:{value:t.row.depth,callback:function(n){e.$set(t.row,"depth",e._n(n))},expression:"scope.row.depth"}})]}}])})],1)],1)],1):e._e()],1)],1),n("br"),n("el-form-item",[n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:12}},[n("el-button",{staticStyle:{width:"100%"},on:{click:e.submit}},[e._v("\n            確定送出\n          ")])],1),n("el-col",{attrs:{span:12}},[n("el-button",{staticStyle:{width:"100%"},on:{click:e.cancel}},[e._v("\n            取消\n          ")])],1)],1)],1)],1)],1)},pt=[],dt=(n("1c4c"),n("6c7b"),{methods:{importVGItems:function(e,t,n){var a=[],o=function(){for(var a=e*t,o=a%n.length,s=Math.floor(a/n.length),r=new Array(n.length).fill(s),l=0;l<o;l++)r[l]+=1;return r}();function s(e){return Array.from({length:e},function(e,t){return t+1})}function r(e,t){return new Array(e).fill(n[t])}function l(e){var t=[];return o.forEach(function(n,a){var o=e(n,a);t=t.concat(o)}),t}var i=l(s),c=l(r);function u(e,t){var n=t.filter(function(t,n){if(n%3==e)return t});return n}function p(t){for(var n=[],a=0;a<e;a++)n.push(u(a,t));return n}var d=p(c),m=p(i);function h(){for(var e=d.flat(),n=m.flat(),o=0,s=0;s<e.length;s++)s%t==0&&(o+=1),a[s]={floor:o,host:e[s],port:n[s],serial:"vg-".concat(o,"-0").concat(s%t+1),steelId:""}}return h(),console.log(a),a}}}),mt=dt,ht={name:"ProjectCreate",mixins:[W,mt],data:function(){return{soQt:0,soDepth:0,needMoreGauge:"",floorIndex:0,numOfFloor:0,VGList:[],vgTable:[],fullVGsInfo:[],imageSelected:!1,image:[{url:"haha"}],OPTList:[],USERList:[],statusList:[{value:"end",label:"結案"},{value:"in-progress",label:"執行"}],newProject:{number:"",status:"",name:"",address:"",companyId:"",sitePlan:"",OPT:[],USER:[],floor:3,vgManagement:[],soManagement:{notice:0,warning:0,action:0},vgIds:[],vgLocation:[],soLocation:[]}}},computed:{projectList:function(){return this.$store.getters.projects},roles:function(){return this.$store.getters.roles},companiesList:function(){var e=this,t=this.$store.getters.companies;return t.filter(function(t){return t.id!=e.myCompany.id})},soItems:function(){return this.$store.getters.soItems},OPTs:function(){var e=this,t=this.$store.getters.OPTs,n=t.filter(function(t){return t.company.id==e.newProject.companyId}),a=t.filter(function(t){return t.company.id==e.myCompany.id});return a.concat(n)},USERs:function(){var e=this,t=this.$store.getters.USERs,n=t.filter(function(t){return t.company.id==e.newProject.companyId});return n},myCompany:function(){return this.$store.getters.me.company},VGs:function(){return this.$store.getters.vgs},isEnoughtVG:function(){var e=this.newProject.floor*this.numOfFloor,t=14*this.VGList.length;return t>=e},getPagination:function(){return 10*this.newProject.floor},Steels:function(){return this.$store.getters.steels},preparedShowSO:function(){return!!this.soQt&&!!this.soDepth}},methods:{reset:function(){this.newProject={number:"",status:"",name:"",address:"",companyId:"",sitePlan:"",OPT:[],USER:[],floor:3,vgManagement:[],soManagement:{notice:0,warning:0,action:0},vgIds:[],vgLocation:[],soLocation:[]}},cancel:function(){this.reset(),this.toPath("ProjectSetting")},submit:function(){var e=this;this.initVGLocation(),this.mergeVGLocation(this.newProject.vgLocation,this.fullVGsInfo),this.$store.dispatch("createProject",this.newProject).then(function(){e.reset(),e.toPath("ProjectSetting")})},resetMember:function(){this.USERList=[],this.OPTList=[],this.newProject.OPT=[],this.newProject.USER=[]},updateSelectedOPTs:function(e){var t=this,n=[];e.forEach(function(e){var a=t.OPTs.filter(function(t){return t.id==e});n=n.concat(a)}),this.OPTList=n},updateSelectedUSERs:function(e){var t=this,n=[];e.forEach(function(e){var a=t.USERs.filter(function(t){return t.id==e});n=n.concat(a)}),this.USERList=n},uploadChange:function(e){this.imageSelected=!0,this.image=e},getVGItems:function(){var e=this.newProject.floor,t=this.newProject.vgIds;this.fullVGsInfo=this.importVGItems(e,this.numOfFloor,t),this.initVGManagement(),this.getVGTable(0)},currentFloor:function(e){this.floorIndex=e-1,this.getVGTable(this.floorIndex)},updateSelectedVGs:function(e){var t=this,n=[];e.forEach(function(e){var a=t.VGs.filter(function(t){return t.id==e});n=n.concat(a)}),this.VGList=n},getVGTable:function(e){var t=e*this.numOfFloor,n=(e+1)*this.numOfFloor;this.vgTable=this.fullVGsInfo.slice(t,n)},preparedShowVG:function(){if(!this.isEnoughtVG)return this.needMoreGauge="Add more gauge please",!1;this.needMoreGauge="";var e=!!this.newProject.floor,t=!!this.numOfFloor,n=0!==this.newProject.vgIds.length;return e&&t&&n},initVGManagement:function(){for(var e=[],t=0;t<this.newProject.floor;t++)e.push({notice:0,warning:0,action:0});this.newProject.vgManagement=e},getSOItems:function(){this.newProject.soLocation=this.initSOLocation(this.soQt,this.soDepth)},initSOLocation:function(e,t){for(var n=[],a=1;a<=e;a++)n.push({number:"SO-0".concat(a),depth:t});return n},mergeVGLocation:function(e,t){t.forEach(function(t,n){e[n].number=t.serial,e[n].steelId=t.steelId,console.log(e)})},initVGLocation:function(){for(var e=this.newProject.floor*this.numOfFloor,t=[],n=0;n<e;n++)t.push({number:"",steelId:""});this.newProject.vgLocation=t}}},ft=ht,vt=(n("97d3"),Object(ee["a"])(ft,ut,pt,!1,null,null,null));vt.options.__file="ProjectCreate.vue";var bt=vt.exports,gt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"ProjectEdit"},[n("h1",[e._v("專案設定")]),n("el-form",{attrs:{"label-position":"top","label-width":"80px",model:e.newProject}},[n("h2",[e._v("基本資料")]),n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"專案案號"}},[n("el-input",{attrs:{placeholder:"CNT - 16Q4"},model:{value:e.newProject.number,callback:function(t){e.$set(e.newProject,"number",t)},expression:"newProject.number"}})],1)],1),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"專案狀態"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"請選擇"},model:{value:e.newProject.status,callback:function(t){e.$set(e.newProject,"status",t)},expression:"newProject.status"}},e._l(e.statusList,function(e){return n("el-option",{key:e.name,attrs:{label:e.label,value:e.value}})}))],1)],1)],1),n("el-row",{attrs:{gutter:20}},[n("el-col",[n("el-form-item",{attrs:{label:"專案名稱"}},[n("el-input",{attrs:{placeholder:"阡福町商業大樓"},model:{value:e.newProject.name,callback:function(t){e.$set(e.newProject,"name",t)},expression:"newProject.name"}})],1)],1)],1),n("el-form-item",{attrs:{label:"地點"}},[n("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"大武街 34 號"},model:{value:e.newProject.address,callback:function(t){e.$set(e.newProject,"address",t)},expression:"newProject.address"}})],1),n("el-form-item",{attrs:{label:"客戶公司名稱"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"雨宮營造"},on:{change:e.resetMember},model:{value:e.newProject.companyId,callback:function(t){e.$set(e.newProject,"companyId",t)},expression:"newProject.companyId"}},e._l(e.companiesList,function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),n("h2",[e._v("參與人員")]),n("el-tabs",{attrs:{type:"border-card"}},[n("el-tab-pane",{attrs:{label:"OPT"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"金貝貝",multiple:""},on:{change:e.updateSelectedOPTs},model:{value:e.newProject.OPT,callback:function(t){e.$set(e.newProject,"OPT",t)},expression:"newProject.OPT"}},e._l(e.OPTs,function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),n("el-table",{staticClass:"projectList-table",attrs:{data:e.OPTList}},[n("el-table-column",{attrs:{label:"負責人",type:"selection",width:"180"}}),n("el-table-column",{attrs:{prop:"name",label:"OPT",width:"320"}})],1)],1),n("el-tab-pane",{attrs:{label:"USER"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"阿土伯",multiple:""},on:{change:e.updateSelectedUSERs},model:{value:e.newProject.USER,callback:function(t){e.$set(e.newProject,"USER",t)},expression:"newProject.USER"}},e._l(e.USERs,function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),n("el-table",{staticClass:"projectList-table",attrs:{data:e.USERList}},[n("el-table-column",{attrs:{label:"負責人",type:"selection",width:"180"}}),n("el-table-column",{attrs:{prop:"name",label:"USER",width:"320"}})],1)],1)],1),n("h1",[e._v("配置圖")]),n("el-upload",{staticClass:"upload-demo",attrs:{drag:"",action:"https://jsonplaceholder.typicode.com/posts/","on-change":e.uploadChange,"list-type":"picture","auto-upload":!1}},[e.imageSelected?n("img",{attrs:{src:this.image.url,alt:""}}):e._e(),e.imageSelected?e._e():n("i",{staticClass:"el-icon-upload"}),e.imageSelected?e._e():n("div",{staticClass:"el-upload__text"},[e._v("將文件拖到此處，或"),n("em",[e._v("點擊上傳")])]),e.imageSelected?n("el-button",{staticClass:"reselect",attrs:{size:"small",type:"primary"}},[e._v("另選圖片")]):e._e()],1),n("h2",[e._v("監控設定")]),n("el-tabs",{attrs:{type:"border-card"}},[n("el-tab-pane",{attrs:{label:"軸力計 ( VG )"}},[n("el-form-item",{attrs:{label:"使用軸力計編號"}},[e._v("\n          "+e._s(e.needMoreGauge)+"\n          "),n("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"可複選",multiple:""},on:{change:e.updateSelectedVGs},model:{value:e.newProject.vgIds,callback:function(t){e.$set(e.newProject,"vgIds",t)},expression:"newProject.vgIds"}},e._l(e.VGs,function(e){return n("el-option",{key:e.id,attrs:{disabled:!!e.projectName,label:e.number,value:e.id}})}))],1),n("div",{staticClass:"demo-input-suffix"},[e._v("\n          支撐階數：\n          "),n("el-input",{attrs:{placeholder:"3"},model:{value:e.newProject.floor,callback:function(t){e.$set(e.newProject,"floor",e._n(t))},expression:"newProject.floor"}}),e._v("\n          每層數量：\n          "),n("el-input",{attrs:{placeholder:"5"},model:{value:e.numOfFloor,callback:function(t){e.numOfFloor=e._n(t)},expression:"numOfFloor"}})],1),n("br"),n("el-button",{attrs:{disabled:!e.preparedShowVG},nativeOn:{click:function(t){e.getVGItems()}}},[e._v("import VGs")]),n("br"),n("br"),e.fullVGsInfo.length?n("div",{staticClass:"block"},[n("span",{staticClass:"demonstration"},[e._v("請選擇支撐階數")]),n("el-pagination",{attrs:{layout:"prev, pager, next",total:e.getPagination},on:{"current-change":e.currentFloor}})],1):e._e(),e.fullVGsInfo.length?n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:5}},[n("h2",[e._v("管理值"),n("span",[e._v("單位：噸")])]),e._v("\n            注意值\n            "),n("el-input",{attrs:{placeholder:"68.3"},model:{value:e.newProject.vgManagement[e.floorIndex].notice,callback:function(t){e.$set(e.newProject.vgManagement[e.floorIndex],"notice",e._n(t))},expression:"newProject.vgManagement[floorIndex].notice"}}),e._v("\n            警戒值\n            "),n("el-input",{attrs:{placeholder:"79.6"},model:{value:e.newProject.vgManagement[e.floorIndex].warning,callback:function(t){e.$set(e.newProject.vgManagement[e.floorIndex],"warning",e._n(t))},expression:"newProject.vgManagement[floorIndex].warning"}}),e._v("\n            行動值\n            "),n("el-input",{attrs:{placeholder:"104.2"},model:{value:e.newProject.vgManagement[e.floorIndex].action,callback:function(t){e.$set(e.newProject.vgManagement[e.floorIndex],"action",e._n(t))},expression:"newProject.vgManagement[floorIndex].action"}})],1),n("el-col",{attrs:{span:19}},[n("h2",[e._v("位置編碼"),n("span",[e._v("( VG - 層數 - 流水號 )")])]),n("el-button",{on:{click:function(t){e.toPath("SteelList")}}},[e._v("\n              維護鋼材資料\n            ")]),n("el-table",{staticClass:"vg-table",attrs:{data:e.vgTable}},[n("el-table-column",{attrs:{prop:"host",label:"VG ID",width:"320"}}),n("el-table-column",{attrs:{prop:"port",label:"Port",width:"80"}}),n("el-table-column",{attrs:{prop:"serial",label:"編碼",width:"100"}}),n("el-table-column",{attrs:{prop:"steelId",label:"鋼材",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-select",{attrs:{placeholder:"请选择"},model:{value:t.row.steelId,callback:function(n){e.$set(t.row,"steelId",n)},expression:"scope.row.steelId"}},e._l(e.Steels,function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))]}}])})],1)],1)],1):e._e()],1),n("el-tab-pane",{attrs:{label:"傾度管 ( SO )"}},[n("div",{staticClass:"demo-input-suffix"},[e._v("\n          數量：\n          "),n("el-input",{attrs:{placeholder:"5"},model:{value:e.soQt,callback:function(t){e.soQt=e._n(t)},expression:"soQt"}}),e._v("\n          每孔深度 ( m )：\n          "),n("el-input",{attrs:{placeholder:"20.5"},model:{value:e.soDepth,callback:function(t){e.soDepth=e._n(t)},expression:"soDepth"}})],1),n("br"),n("el-button",{attrs:{disabled:!e.preparedShowSO},nativeOn:{click:function(t){e.getSOItems()}}},[e._v("import SOs")]),n("br"),e.newProject.soLocation.length?n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:8}},[n("h2",[e._v("管理值"),n("span",[e._v("單位：cm")])]),e._v("\n            注意值\n            "),n("el-input",{attrs:{placeholder:"4.24"},model:{value:e.newProject.soManagement.notice,callback:function(t){e.$set(e.newProject.soManagement,"notice",e._n(t))},expression:"newProject.soManagement.notice"}}),e._v("\n            警戒值\n            "),n("el-input",{attrs:{placeholder:"9.88"},model:{value:e.newProject.soManagement.warning,callback:function(t){e.$set(e.newProject.soManagement,"warning",e._n(t))},expression:"newProject.soManagement.warning"}}),e._v("\n            行動值\n            "),n("el-input",{attrs:{placeholder:"15.06"},model:{value:e.newProject.soManagement.action,callback:function(t){e.$set(e.newProject.soManagement,"action",e._n(t))},expression:"newProject.soManagement.action"}})],1),n("el-col",{attrs:{span:14}},[n("h2",[e._v("位置編號"),n("span",[e._v("( SO - 流水號 )")])]),n("h5",[e._v("相同位置編碼 量測深度間隔 1 m")]),n("el-table",{staticClass:"so-table",attrs:{data:e.newProject.soLocation}},[n("el-table-column",{attrs:{prop:"number",label:"編碼",width:"200"}}),n("el-table-column",{attrs:{prop:"depth",label:"深度",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-input",{model:{value:t.row.depth,callback:function(n){e.$set(t.row,"depth",e._n(n))},expression:"scope.row.depth"}})]}}])})],1)],1)],1):e._e()],1)],1),n("br"),n("el-form-item",[n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:12}},[n("el-button",{staticStyle:{width:"100%"},on:{click:e.submit}},[e._v("\n            確定送出\n          ")])],1),n("el-col",{attrs:{span:12}},[n("el-button",{staticStyle:{width:"100%"},on:{click:e.cancel}},[e._v("\n            取消\n          ")])],1)],1)],1)],1)],1)},wt=[],Pt={name:"ProjectEdit",mixins:[W,mt],created:function(){this.$route.params.projectId&&this.loadProject(this.$route.params.projectId)},data:function(){return{soQt:0,soDepth:0,needMoreGauge:"",floorIndex:0,numOfFloor:0,VGList:[],vgTable:[],fullVGsInfo:[],imageSelected:!1,image:[{url:"haha"}],OPTList:[],USERList:[],statusList:[{value:"end",label:"結案"},{value:"in-progress",label:"執行"}],VGItems:[],newProject:{number:"",status:"",name:"",address:"",companyId:"",sitePlan:"",OPT:[],USER:[],floor:3,vgManagement:[],soManagement:{notice:0,warning:0,action:0},vgIds:[],vgLocation:[],soLocation:[]}}},computed:{projectList:function(){return this.$store.getters.projects},roles:function(){return this.$store.getters.roles},companiesList:function(){var e=this,t=this.$store.getters.companies;return t.filter(function(t){return t.id!=e.myCompany.id})},soItems:function(){return this.$store.getters.soItems},OPTs:function(){var e=this,t=this.$store.getters.OPTs,n=t.filter(function(t){return t.company.id==e.newProject.companyId}),a=t.filter(function(t){return t.company.id==e.myCompany.id});return a.concat(n)},USERs:function(){var e=this,t=this.$store.getters.USERs,n=t.filter(function(t){return t.company.id==e.newProject.companyId});return n},myCompany:function(){return this.$store.getters.me.company},VGs:function(){return this.$store.getters.vgs},isEnoughtVG:function(){var e=this.newProject.floor*this.numOfFloor,t=14*this.VGList.length;return t>=e},getPagination:function(){return 10*this.newProject.floor},Steels:function(){return this.$store.getters.steels},preparedShowSO:function(){return!!this.soQt&&!!this.soDepth}},methods:{deleteProjects:function(){0!==this.deleteList.length&&this.$store.dispatch("deleteProjects",this.deleteList)},updateDeleteList:function(e){this.deleteList=e.map(function(e){return e.id})},loadProject:function(e){var t=this;this.$store.dispatch("getProject",e).then(function(e){var n=e.data.data;t.newProject={number:n.number,status:n.status,name:n.name,address:n.address,companyId:n.companyId,sitePlan:n.sitPlan,OPT:n.OPT,USER:n.USER,floor:n.floor,vgManagement:n.vgManagement,soManagement:n.soManagement,vgIds:n.vgIds,vgLocation:n.vgLocation,soLocation:n.soLocation}})},reset:function(){this.newProject={number:"",status:"",name:"",address:"",companyId:"",sitePlan:"",OPT:[],USER:[],floor:3,vgManagement:[],soManagement:{notice:0,warning:0,action:0},vgIds:[],vgLocation:[],soLocation:[]}},cancel:function(){this.reset(),this.toPath("ProjectList")},edit:function(){var e=this;this.$store.dispatch("updateProject",{projectId:this.$route.params.projectId,payload:this.newProject}).then(function(){e.reset(),e.toPath("ProjectList")})},resetMember:function(){this.USERList=[],this.OPTList=[],this.newProject.OPT=[],this.newProject.USER=[]},updateSelectedOPTs:function(e){var t=this,n=[];e.forEach(function(e){var a=t.OPTs.filter(function(t){return t.id==e});n=n.concat(a)}),this.OPTList=n},updateSelectedUSERs:function(e){var t=this,n=[];e.forEach(function(e){var a=t.USERs.filter(function(t){return t.id==e});n=n.concat(a)}),this.USERList=n},uploadChange:function(e){this.imageSelected=!0,this.image=e},getVGItems:function(){var e=this.newProject.floor,t=this.newProject.vgIds;this.fullVGsInfo=this.importVGItems(e,this.numOfFloor,t),this.initVGManagement(),this.getVGTable(0)},currentFloor:function(e){this.floorIndex=e-1,this.getVGTable(this.floorIndex)},updateSelectedVGs:function(e){var t=this,n=[];e.forEach(function(e){var a=t.VGs.filter(function(t){return t.id==e});n=n.concat(a)}),this.VGList=n},getVGTable:function(e){var t=e*this.numOfFloor,n=(e+1)*this.numOfFloor;this.vgTable=this.fullVGsInfo.slice(t,n)},preparedShowVG:function(){if(!this.isEnoughtVG)return this.needMoreGauge="Add more gauge please",!1;this.needMoreGauge="";var e=!!this.newProject.floor,t=!!this.numOfFloor,n=0!==this.newProject.vgIds.length;return e&&t&&n},initVGManagement:function(){for(var e=[],t=0;t<this.newProject.floor;t++)e.push({notice:0,warning:0,action:0});this.newProject.vgManagement=e},getSOItems:function(){this.newProject.soLocation=this.initSOLocation(this.soQt,this.soDepth)},initSOLocation:function(e,t){for(var n=[],a=1;a<=e;a++)n.push({number:"SO-0".concat(a),depth:t});return n},mergeVGLocation:function(e,t){t.forEach(function(t,n){e[n].number=t.serial,e[n].steelId=t.steelId,console.log(e)})},initVGLocation:function(){for(var e=this.newProject.floor*this.numOfFloor,t=[],n=0;n<e;n++)t.push({number:"",steelId:""});this.newProject.vgLocation=t}}},_t=Pt,jt=(n("1e37"),Object(ee["a"])(_t,gt,wt,!1,null,null,null));jt.options.__file="ProjectEdit.vue";var yt=jt.exports,St=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"projectMonitor"},[n("h1",[e._v("查看監控資料")]),n("h3",[e._v("基本資料")]),e._v("\n  案號："+e._s(e.test1)+"\n  名稱："+e._s(e.test2)+"\n  "),n("h3",[e._v("配置圖")]),n("h3",[e._v("監控值")]),n("el-tabs",{attrs:{type:"border-card"}},[n("el-tab-pane",{attrs:{label:"軸力計 ( VG )"}},[n("div",{staticClass:"block"},[n("span",{staticClass:"demonstration"},[e._v("請選擇支撐階數")]),n("el-pagination",{attrs:{layout:"prev, pager, next",total:30}})],1),n("el-form",{attrs:{"label-position":"top"}},[n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:13}},[n("el-form-item",{attrs:{label:"日期"}},[n("el-select",{attrs:{placeholder:"请选择"},model:{value:e.test1,callback:function(t){e.test1=t},expression:"test1"}},e._l(e.options,function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)],1),n("el-col",{attrs:{span:9,offset:2}},[n("el-form-item",{attrs:{label:"位置"}},[n("el-select",{attrs:{placeholder:"请选择"},model:{value:e.test2,callback:function(t){e.test2=t},expression:"test2"}},e._l(e.options,function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)],1)],1)],1)],1),n("el-tab-pane",{attrs:{label:"傾度管 ( SO )"}},[n("el-form",{attrs:{"label-position":"top"}},[n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:13}},[n("el-form-item",{attrs:{label:"日期"}},[n("el-select",{attrs:{placeholder:"请选择"},model:{value:e.test1,callback:function(t){e.test1=t},expression:"test1"}},e._l(e.options,function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)],1),n("el-col",{attrs:{span:9,offset:2}},[n("el-form-item",{attrs:{label:"位置"}},[n("el-select",{attrs:{placeholder:"请选择",label:"位置"},model:{value:e.test2,callback:function(t){e.test2=t},expression:"test2"}},e._l(e.options,function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)],1)],1)],1)],1)],1)],1)},kt=[],It={name:"UserList",mixins:[W],data:function(){return{test1:"haha",test2:"hehe"}},computed:{},methods:{}},Lt=It,xt=Object(ee["a"])(Lt,St,kt,!1,null,null,null);xt.options.__file="ProjectMonitor.vue";var Ct=xt.exports,$t=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"soList"},[n("h1",[e._v("專案執行階段")]),n("div",{staticClass:"operationGroup"},[n("div",{staticClass:"operationGroup-left"},[n("el-button",{attrs:{type:"primary"},on:{click:e.deleteProjectPhase}},[e._v("刪除")])],1),n("div",{staticClass:"operationGroup-right"},[n("el-form",{attrs:{"label-position":"top","label-width":"80px",model:e.newProjectPhase}},[n("el-form-item",{attrs:{label:"新增專案"}},[n("el-input",{attrs:{placeholder:"第二次開挖"},model:{value:e.newProjectPhase.name,callback:function(t){e.$set(e.newProjectPhase,"name",t)},expression:"newProjectPhase.name"}})],1),n("el-button",{attrs:{type:"primary"},on:{click:e.createProjectPhase}},[n("i",{staticClass:"el-icon-plus"})])],1)],1)]),n("el-table",{staticClass:"projectPhaseList-table",attrs:{data:e.projectPhaseList},on:{"selection-change":e.updateDeleteList}},[n("el-table-column",{attrs:{type:"selection",width:"180"}}),n("el-table-column",{attrs:{prop:"id",label:"序號",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",{staticClass:"clickable",on:{click:function(n){e.toPath("ProjectPhaseEdit",{soId:t.row.id})}}},[e._v("\n          "+e._s(t.row.id)+"\n        ")])]}}])}),n("el-table-column",{attrs:{prop:"company.name",label:"專案階段",width:"180"}})],1)],1)},Ot=[],Gt={name:"projectPhaseList",mixins:[W],data:function(){return{deleteList:[],newProjectPhase:{name:""}}},computed:{projectPhaseList:function(){return this.$store.getters.projectPhases}},methods:{createProjectPhase:function(){var e=this;this.$store.dispatch("createProjectPhase",this.newProjectPhase).then(function(){e.reset()})},reset:function(){this.newProjectPhase={name:""}},deleteProjectPhase:function(){0!==this.deleteList.length&&this.$store.dispatch("deleteProjectPhase",this.deleteList)},updateDeleteList:function(e){this.deleteList=e.map(function(e){return e.id})}}},Ut=Gt,Vt=Object(ee["a"])(Ut,$t,Ot,!1,null,null,null);Vt.options.__file="ProjectPhaseList.vue";var Et=Vt.exports,Mt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"vgList"},[n("h1",[e._v("軸力計")]),n("div",{staticClass:"operationGroup"},[n("div",{staticClass:"operationGroup-left"},[n("el-button",{attrs:{type:"primary"},on:{click:e.deleteVGs}},[e._v("刪除")])],1),n("div",{staticClass:"operationGroup-right"},[n("el-input",{attrs:{placeholder:"新增軸力計"},model:{value:e.newVG.number,callback:function(t){e.$set(e.newVG,"number",t)},expression:"newVG.number"}}),n("el-button",{attrs:{type:"primary"},on:{click:e.createVG}},[n("i",{staticClass:"el-icon-plus"})])],1)]),n("el-table",{staticClass:"vgList-table",attrs:{data:e.vgList},on:{"selection-change":e.updateDeleteList}},[n("el-table-column",{attrs:{type:"selection",selectable:e.checkable,width:"55"}}),n("el-table-column",{attrs:{prop:"number",label:"編號",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-input",{nativeOn:{keyup:function(n){e.editVG(t.row.id,t.row.number)}},model:{value:t.row.number,callback:function(n){e.$set(t.row,"number",n)},expression:"scope.row.number"}})]}}])}),n("el-table-column",{attrs:{prop:"projectName",label:"所在專案",width:"240"}})],1)],1)},Tt=[],Rt={number:"VGList",mixins:[W],data:function(){return{deleteList:[],newVG:{number:""}}},computed:{vgList:function(){return this.$store.getters.vgs}},methods:{reset:function(){var e=this;this.$store.dispatch("getVGs").then(function(){e.newVG={number:""}})},createVG:function(){var e=this;this.newVG.number||alert("Enter the vg's name PLZ"),this.$store.dispatch("createVG",this.newVG).then(function(){e.reset()})},deleteVGs:function(){0!==this.deleteList.length&&this.$store.dispatch("deleteVGs",this.deleteList)},updateDeleteList:function(e){this.deleteList=e.map(function(e){return e.id})},checkable:function(e){return!e.projectName},editVG:function(e,t){var n=this;this.$store.dispatch("updateVG",{vgId:e,payload:{number:t}}).then(function(){n.reset()})}}},Dt=Rt,At=Object(ee["a"])(Dt,Mt,Tt,!1,null,null,null);At.options.__file="VGList.vue";var Nt=At.exports,Ft=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"steelList"},[n("h1",[e._v("鋼材資料")]),n("h3",[e._v("新增鋼材")]),n("el-form",{attrs:{"label-position":"top","label-width":"80px",model:e.newSteel}},[n("el-form-item",{attrs:{label:"型號"}},[n("el-input",{model:{value:e.newSteel.name,callback:function(t){e.$set(e.newSteel,"name",t)},expression:"newSteel.name"}})],1),n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{label:"ES ( kg/cm^2 )"}},[n("el-input",{model:{value:e.newSteel.es,callback:function(t){e.$set(e.newSteel,"es",e._n(t))},expression:"newSteel.es"}})],1)],1),n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{label:"TCM"}},[n("el-input",{model:{value:e.newSteel.tcm,callback:function(t){e.$set(e.newSteel,"tcm",e._n(t))},expression:"newSteel.tcm"}})],1)],1),n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{label:"TCG"}},[n("el-input",{model:{value:e.newSteel.tcg,callback:function(t){e.$set(e.newSteel,"tcg",e._n(t))},expression:"newSteel.tcg"}})],1)],1),n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{label:"截面積 ( cm^2 )"}},[n("el-input",{model:{value:e.newSteel.sectionArea,callback:function(t){e.$set(e.newSteel,"sectionArea",e._n(t))},expression:"newSteel.sectionArea"}})],1)],1)],1),e.editable?e._e():n("el-button",{attrs:{type:"primary"},on:{click:e.createSteel}},[e._v("\n      新增鋼材\n    ")]),e.editable?n("el-button",{attrs:{type:"primary"},on:{click:e.editSteel}},[e._v("\n      編輯鋼材\n    ")]):e._e()],1),n("h3",[e._v("鋼材列表")]),n("div",{staticClass:"operationGroup"},[n("div",{staticClass:"operationGroup-left"},[n("el-button",{on:{click:e.resetTable}},[e._v("新增")])],1),n("div",{staticClass:"operationGroup-right"},[n("el-button",{directives:[{name:"show",rawName:"v-show",value:e.deletable,expression:"deletable"}],attrs:{type:"primary"},on:{click:e.deleteSteels}},[e._v("刪除")])],1)]),n("el-table",{staticClass:"steelList-table",attrs:{data:e.steelList,"highlight-current-row":e.highLight},on:{"selection-change":e.updateDeleteList}},[n("el-table-column",{attrs:{type:"selection",selectable:e.checkable,width:"55"}}),n("el-table-column",{attrs:{prop:"name",label:"鋼材名稱",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",{staticClass:"clickable",on:{click:function(n){e.loadSteel(t.row)}}},[e._v("\n          "+e._s(t.row.name)+"\n        ")])]}}])}),n("el-table-column",{attrs:{prop:"sectionArea",label:"截面積 (cm^2)",width:"120"}}),n("el-table-column",{attrs:{prop:"es",label:"ES (kg/cm^2)",width:"120"}}),n("el-table-column",{attrs:{prop:"tcm",label:"TCM",width:"100"}}),n("el-table-column",{attrs:{prop:"tcg",label:"TCG",width:"100"}})],1)],1)},qt=[],Qt={number:"SteelList",mixins:[W],data:function(){return{deleteList:[],choosedId:"",newSteel:{name:"",sectionArea:0,es:0,tcm:0,tcg:0},editable:!1,highLight:!0}},computed:{steelList:function(){return this.$store.getters.steels},deletable:function(){return 0!=this.deleteList.length}},methods:{reset:function(){this.choosedId="",this.newSteel={name:"",sectionArea:0,es:0,tcm:0,tcg:0}},createSteel:function(){var e=this;this.newSteel.name||alert("Enter the steel's name PLZ"),this.$store.dispatch("createSteel",this.newSteel).then(function(){e.resetTable()})},deleteSteels:function(){0!==this.deleteList.length&&(this.$store.dispatch("deleteSteels",this.deleteList),this.resetTable())},updateDeleteList:function(e){this.highLight=!0,this.editable=!0,this.deleteList=e.map(function(e){return e.id})},checkable:function(e){return!e.projectName},editSteel:function(){var e=this;this.$store.dispatch("updateSteel",{steelId:this.choosedId,payload:this.newSteel}).then(function(){e.resetTable()})},loadSteel:function(e){this.editable=!0,this.choosedId=e.id,this.newSteel={name:e.name,sectionArea:e.sectionArea,es:e.es,tcm:e.tcm,tcg:e.tcg}},resetTable:function(){var e=this;this.$store.dispatch("getSteels").then(function(){e.highLight=!1,e.editable=!1,e.reset()})}}},zt=Qt,Jt=Object(ee["a"])(zt,Ft,qt,!1,null,null,null);Jt.options.__file="SteelList.vue";var Zt=Jt.exports,Bt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"soList"},[n("h1",[e._v("傾度管列表")]),n("div",{staticClass:"operationGroup"},[n("div",{staticClass:"operationGroup-left"},[n("el-button",{attrs:{type:"primary"},on:{click:e.deleteSOItems}},[e._v("刪除")])],1),n("div",{staticClass:"operationGroup-right"},[n("el-button",{attrs:{type:"primary"},on:{click:function(t){e.toPath("SOItemsCreate")}}},[n("i",{staticClass:"el-icon-plus"})])],1)]),n("el-table",{staticClass:"soItems-table",attrs:{data:e.soItems},on:{"selection-change":e.updateDeleteList}},[n("el-table-column",{attrs:{type:"selection",width:"180"}}),n("el-table-column",{attrs:{prop:"id",label:"編號",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",{staticClass:"clickable",on:{click:function(n){e.toPath("SOItemsEdit",{soId:t.row.id})}}},[e._v("\n          "+e._s(t.row.id)+"\n        ")])]}}])}),n("el-table-column",{attrs:{prop:"name",label:"廠牌 型號",width:"180"}}),n("el-table-column",{attrs:{prop:"company.name",label:"OPT",width:"180"}})],1)],1)},Wt=[],Ht={name:"soItems",mixins:[W],data:function(){return{deleteList:[]}},computed:{soItems:function(){return this.$store.getters.soItems}},methods:{deleteSOItems:function(){0!==this.deleteList.length&&this.$store.dispatch("deleteSOItems",this.deleteList)},updateDeleteList:function(e){this.deleteList=e.map(function(e){return e.id})}}},Kt=Ht,Xt=Object(ee["a"])(Kt,Bt,Wt,!1,null,null,null);Xt.options.__file="SOItems.vue";var Yt=Xt.exports,en=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"measuresSo"},[n("h1",[e._v("傾度管量測")]),n("el-form",{attrs:{"label-width":"100px","label-position":"left"}},[n("section",[n("h2",[e._v("基本資料")]),n("p",[e._v("案號：")]),n("p",[e._v("名稱：")])]),n("section",[n("h2",[e._v("量測作業")]),n("el-form-item",{attrs:{label:"專案階段"}},[n("el-select",{attrs:{placeholder:"第一次開挖"},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},e._l(e.options,function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),n("el-form-item",{attrs:{label:"請度管編號"}},[n("el-select",{attrs:{placeholder:"SO-01"},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},e._l(e.options,function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),n("el-form-item",{attrs:{label:"WISE IP"}},[n("el-input",{attrs:{value:e.wiseIP}})],1),n("el-form-item",{attrs:{label:"請由上往下量，間隔 1m 量測一次","label-width":"300px"}}),n("el-button",{on:{click:e.measures}},[e._v("量測")])],1),e.measuresSoDatas.length?n("section",[n("p",[e._v("應量測10筆，已量測"+e._s(e.measuresSoDatas.length)+"筆")]),n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.measuresSoDatas}},[n("el-table-column",{attrs:{fixed:"",prop:"date",label:"#",width:"50"}}),n("el-table-column",{attrs:{prop:"name",label:"時間",width:"200"}}),n("el-table-column",{attrs:{prop:"province",label:"位移量(mm)",width:"120"}}),n("el-table-column",{attrs:{prop:"city",label:"總位移量(mm)",width:"120"}}),n("el-table-column",{attrs:{prop:"address",label:"深度(m)",width:"120"}}),n("el-table-column",{attrs:{prop:"zip",label:"傾斜度(mm/m)",width:"120"}}),n("el-table-column",{attrs:{prop:"zip",label:"溫度(c)",width:"120"}}),n("el-table-column",{attrs:{prop:"zip",label:"V0(Vo)",width:"120"}})],1),n("el-button",{on:{click:e.clearMeasuresDatas}},[e._v("清除資料")]),n("el-button",{attrs:{disabled:e.measuresSoDatas.length<10},on:{click:e.uploadMeasuresDatas}},[e._v("確認無誤並上傳")])],1):e._e()]),n("p",[e._v("要加入故障排除方式")])],1)},tn=[],nn=n("bc3a"),an=n.n(nn),on={user:"root",password:"0000",wiseIP:""},sn=function(e,t){on.wiseIP="http://"+e,rn("Patch","/do_value/slot_0",{DOVal:[{Ch:0,Val:0},{Ch:1,Val:0}]}).then(function(){return rn("Patch","/do_value/slot_0",{DOVal:[{Ch:1,Val:1}]})}).then(function(){return rn("Patch","/do_value/slot_0",{DOVal:[{Ch:0,Val:1}]})}).then(function(){return rn("Get","/ai_value/slot_0/ch_0","")}).then(function(e){return console.log(e.data),rn("Patch","/do_value/slot_0",{DOVal:[{Ch:0,Val:0}]})}).then(function(){return rn("Patch","/do_value/slot_0",{DOVal:[{Ch:0,Val:1}]})}).then(function(){return rn("Get","/ai_value/slot_0/ch_0","")}).then(function(e){return console.log(e.data),rn("Patch","/do_value/slot_0",{DOVal:[{Ch:1,Val:0}]})}),t.push("fuck")};function rn(e,t,n){return an()({method:e,url:on.wiseIP+t,data:JSON.stringify(n),headers:{Accept:"application/json",Authorization:ln(on.user,on.password)}})}function ln(e,t){var n=e+":"+t,a=window.btoa(n);return"Basic "+a}var cn={data:function(){return{wiseIP:"192.168.58.200",measuresSoDatas:[]}},methods:{measures:function(){sn(this.wiseIP,this.measuresSoDatas)},clearMeasuresDatas:function(){this.measuresSoDatas=[]},uploadMeasuresDatas:function(){console.log("fuck")}}},un=cn,pn=Object(ee["a"])(un,en,tn,!1,null,null,null);pn.options.__file="MeasuresSo.vue";var dn=pn.exports,mn=(n("f751"),n("2f62")),hn=function(e,t,n,a){var o={Accept:"application/json"};n&&(o["x-access-token"]=_n.getters.token);var s={baseURL:"http://ec2-13-115-237-75.ap-northeast-1.compute.amazonaws.com:3333/v1",headers:o};return an.a.create(s)[e](t,a)};q["default"].use(mn["a"]);var fn={state:{data:[]},mutations:{setVGs:function(e,t){e.data=t}},getters:{vgs:function(e){return e.data}},actions:{getVGs:function(e){var t=e.commit;return hn("get","/vgs",!0).then(function(e){t("setVGs",e.data.data)})},deleteVGs:function(e,t){var n=e.dispatch,a=t.join(",");return hn("delete","/vgs/".concat(a),!0).then(function(){n("getVGs")})},createVG:function(e,t){return hn("post","/vg",!0,t)},updateVG:function(e,t){var n=t.vgId,a=t.payload;return hn("put","/vg/".concat(n),!0,a)}}},vn={state:{data:[]},mutations:{setProjects:function(e,t){e.data=t}},getters:{projects:function(e){return e.data}},actions:{getProject:function(e,t){return hn("get","/project/".concat(t),!0)},updateProject:function(e,t){var n=t.projectId,a=t.payload;return hn("put","/project/".concat(n),!0,a)},getProjects:function(e){var t=e.commit;return hn("get","/projects",!0).then(function(e){t("setProjects",e.data.data)})},deleteProjects:function(e,t){var n=e.dispatch,a=t.join(",");return hn("delete","/projects/".concat(a),!0).then(function(){n("getProjects")})},createProject:function(e,t){return hn("post","/project",!0,t)}}},bn={state:{data:[]},mutations:{setProjectPhases:function(e,t){e.data=t}},getters:{projectPhases:function(e){return e.data}},actions:{getProjectPhases:function(e){var t=e.commit;return hn("get","/project-phases",!0).then(function(e){t("setProjectPhases",e.data.data)})},getProjectPhase:function(e,t){return hn("get","/project-phase/".concat(t),!0)},updateProjectPhase:function(e,t){var n=t.projectPhaseId,a=t.payload;return hn("put","/project-phase/".concat(n),!0,a)},deleteProjectPhases:function(e,t){var n=e.dispatch,a=t.join(",");return hn("delete","/project-phases/".concat(a),!0).then(function(){n("getProjectPhases")})},createProject:function(e,t){return hn("post","/project-phase",!0,t)}}},gn={state:{data:[]},mutations:{setCompanies:function(e,t){e.data=t}},getters:{companies:function(e){return e.data}},actions:{getCompanies:function(e){var t=e.commit;return hn("get","/companies",!0).then(function(e){t("setCompanies",e.data.data)})},createCompany:function(e,t){var n=e.dispatch;return hn("post","/company",!0,t).then(function(){n("getCompanies")})},deleteCompanies:function(e,t){var n=e.dispatch,a=t.join(",");return hn("delete","/companies/".concat(a),!0).then(function(){n("getCompanies")})}}},wn={state:{data:[]},mutations:{setUsers:function(e,t){e.data=t}},getters:{users:function(e){return e.data},OPTs:function(e){return e.data.filter(function(e){return"OPT"==e.roleName})},USERs:function(e){return e.data.filter(function(e){return"USER"==e.roleName})}},actions:{getUser:function(e,t){return hn("get","/user/".concat(t),!0)},updateUser:function(e,t){var n=t.userId,a=t.payload;return hn("put","/user/".concat(n),!0,a)},getUsers:function(e){var t=e.commit;return hn("get","/users",!0).then(function(e){t("setUsers",e.data.data)})},deleteUsers:function(e,t){var n=e.dispatch,a=t.join(",");return hn("delete","/users/".concat(a),!0).then(function(){n("getUsers")})},createUser:function(e,t){return hn("post","/user",!0,t)}}},Pn={state:{data:[]},mutations:{setSteels:function(e,t){e.data=t}},getters:{steels:function(e){return e.data}},actions:{getSteels:function(e){var t=e.commit;return hn("get","/steels",!0).then(function(e){t("setSteels",e.data.data)})},createSteel:function(e,t){return hn("post","/steel",!0,t)},deleteSteels:function(e,t){var n=e.dispatch,a=t.join(",");return hn("delete","/steels/".concat(a),!0).then(function(){n("getSteels")})},updateSteel:function(e,t){var n=t.steelId,a=t.payload;return hn("put","/steel/".concat(n),!0,a)}}},_n=new mn["a"].Store({modules:{users:wn,projects:vn,projectPhases:bn,companies:gn,vgs:fn,steels:Pn},state:{myId:"",token:"",myRole:"",me:{},permissions:{},roles:[],rolePermissions:[],companies:[],soItems:[]},mutations:{setToken:function(e,t){e.token=t},setMyId:function(e,t){e.myId=t},setMyRole:function(e,t){e.myRole=t},setMe:function(e,t){e.me=t},updateMe:function(e,t){e.me=Object.assign(e.me,t)},setPermissions:function(e,t){e.permissions=t},setRoles:function(e,t){e.roles=t},setRolePermissions:function(e,t){e.rolePermissions=t},updateRolePermissions:function(e,t){var n=t.value,a=t.role,o=t.permissionIndex;e.rolePermissions=e.rolePermissions.map(function(e){return e.role===a&&(e.permissions[o].value=n),e})},setSOItems:function(e,t){e.soItems=t}},getters:{token:function(e){return e.token},myId:function(e){return e.myId},myRole:function(e){return e.myRole},me:function(e){return e.me},permissions:function(e){return e.permissions},roles:function(e){return e.roles},rolePermissions:function(e){return e.rolePermissions},soItems:function(e){return e.soItems}},actions:{login:function(e,t){var n=e.commit;return hn("post","/login",!1,t).then(function(e){n("setToken",e.data.token),n("setMyId",e.data.userId),n("setMyRole",e.data.role),ce.a.set("ground_monitor_token",{token:e.data.token,myId:e.data.userId,myRole:e.data.role})})},logout:function(e){var t=e.commit;t("setToken",""),ce.a.remove("ground_monitor_token")},getMe:function(e){var t=e.getters,n=e.commit;return hn("get","/user/".concat(t.myId),!0).then(function(e){n("setMe",e.data.data)})},updateMe:function(e){var t=e.state;return hn("put","/user/self",!0,t.me)},getRoles:function(e){var t=e.commit;return hn("get","/roles",!0).then(function(e){t("setRoles",e.data.data)})},getPermissions:function(e){var t=e.commit;return hn("get","/permissions",!0).then(function(e){t("setPermissions",e.data.data)})},getRolePermissions:function(e){var t=e.commit;return hn("get","/role/permissions",!0).then(function(e){t("setRolePermissions",e.data.data)})},updateRolePermissions:function(e){var t=e.state;return hn("put","/role/permissions",!0,t.rolePermissions)},getSOItems:function(e){var t=e.commit;return hn("get","/so-items",!0).then(function(e){t("setSOItems",e.data.data)})}}});q["default"].use(le["a"]);var jn=new le["a"]({mode:"history",base:"/",routes:[{path:"/",name:"Entry",component:fe},{path:"/user-info",name:"UserInfo",component:_e,meta:{requireAuth:!0},beforeEnter:function(e,t,n){_n.dispatch("getMe").then(function(){n()})}},{path:"/company-list",name:"CompanyList",component:ze,meta:{requireAuth:!0},beforeEnter:function(e,t,n){_n.dispatch("getCompanies").then(function(){n()})}},{path:"/user-list",name:"UserList",component:Le,meta:{requireAuth:!0},beforeEnter:function(e,t,n){_n.dispatch("getUsers").then(function(){n()})}},{path:"/create-user",name:"CreateUser",component:Ue,meta:{requireAuth:!0},beforeEnter:function(e,t,n){Promise.all([_n.dispatch("getRoles"),_n.dispatch("getCompanies"),_n.dispatch("getSOItems")]).then(function(){n()})}},{path:"/edit-user/:userId",name:"EditUser",component:De,meta:{requireAuth:!0},beforeEnter:function(e,t,n){Promise.all([_n.dispatch("getRoles"),_n.dispatch("getCompanies"),_n.dispatch("getSOItems")]).then(function(){n()})}},{path:"/permisson-setup",name:"PermissionSetup",component:Ke,meta:{requireAuth:!0},beforeEnter:function(e,t,n){Promise.all([_n.dispatch("getPermissions"),_n.dispatch("getRolePermissions")]).then(function(){n()})}},{path:"/project-list",name:"ProjectList",component:ct,meta:{requireAuth:!0},beforeEnter:function(e,t,n){_n.dispatch("getProjects").then(function(){n()})}},{path:"/project-setting",name:"ProjectSetting",component:at,meta:{requireAuth:!0},beforeEnter:function(e,t,n){_n.dispatch("getProjects").then(function(){n()})}},{path:"/project-create",name:"ProjectCreate",component:bt,meta:{requireAuth:!0},beforeEnter:function(e,t,n){Promise.all([_n.dispatch("getCompanies"),_n.dispatch("getMe"),_n.dispatch("getUsers"),_n.dispatch("getVGs"),_n.dispatch("getSteels")]).then(function(){n()})}},{path:"/project-edit/:projectId",name:"ProjectEdit",component:yt,meta:{requireAuth:!0},beforeEnter:function(e,t,n){Promise.all([_n.dispatch("getCompanies"),_n.dispatch("getMe"),_n.dispatch("getUsers"),_n.dispatch("getVGs"),_n.dispatch("getSteels")]).then(function(){n()})}},{path:"/project-monitor/:projectId",name:"ProjectMonitor",component:Ct},{path:"/project-phase-list",name:"ProjectPhaseList",component:Et,meta:{requireAuth:!0},beforeEnter:function(e,t,n){Promise.all([_n.dispatch("getProjectPhases")]).then(function(){n()})}},{path:"/vg-list",name:"VGList",component:Nt,meta:{requireAuth:!0},beforeEnter:function(e,t,n){Promise.all([_n.dispatch("getVGs")]).then(function(){n()})}},{path:"/steel-list",name:"SteelList",component:Zt,meta:{requireAuth:!0},beforeEnter:function(e,t,n){Promise.all([_n.dispatch("getSteels")]).then(function(){n()})}},{path:"/so-items",name:"SOItems",component:Yt,meta:{requireAuth:!0},beforeEnter:function(e,t,n){_n.dispatch("getSOItems").then(function(){n()})}},{path:"/measures/so",name:"MeasuresSo",component:dn,meta:{requireAuth:!0}}]});jn.beforeEach(function(e,t,n){if(e.meta.requireAuth||n(),_n.getters.token)n();else if(ce.a.get("ground_monitor_token")){var a=ce.a.get("ground_monitor_token");_n.commit("setToken",a.token),_n.commit("setMyId",a.myId),_n.commit("setMyRole",a.myRole),n()}else n({name:"Entry"})});var yn=jn,Sn=n("c87b"),kn=n.n(Sn),In=n("4897"),Ln=n.n(In);Ln.a.use(kn.a),q["default"].use(V.a);n("1ca9");q["default"].use(F.a),q["default"].use(A.a),q["default"].use(R.a),q["default"].use(M.a),q["default"].use(V.a),q["default"].use(G.a),q["default"].use($.a),q["default"].use(x.a),q["default"].use(I.a),q["default"].use(S.a),q["default"].use(j.a),q["default"].use(P.a),q["default"].use(g.a),q["default"].use(v.a),q["default"].use(h.a),q["default"].use(d.a),q["default"].use(u.a),q["default"].use(i.a),q["default"].use(r.a),q["default"].prototype.$message=o.a,q["default"].config.productionTip=!1,new q["default"]({router:yn,store:_n,render:function(e){return e(re)}}).$mount("#app")},"5dfc":function(e,t,n){"use strict";var a=n("30d6"),o=n.n(a);o.a},"641f":function(e,t,n){"use strict";var a=n("6469"),o=n.n(a);o.a},6469:function(e,t,n){},"64a9":function(e,t,n){},"97d3":function(e,t,n){"use strict";var a=n("eba3"),o=n.n(a);o.a},eba3:function(e,t,n){},eeb3:function(e,t,n){"use strict";var a=n("36c0"),o=n.n(a);o.a},ef53:function(e,t,n){"use strict";var a=n("4e93"),o=n.n(a);o.a}});
//# sourceMappingURL=app.2f195168.js.map