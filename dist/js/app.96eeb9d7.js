(function(e){function t(t){for(var n,o,i=t[0],c=t[1],u=t[2],m=0,p=[];m<i.length;m++)o=i[m],s[o]&&p.push(s[o][0]),s[o]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);l&&l(t);while(p.length)p.shift()();return a.push.apply(a,u||[]),r()}function r(){for(var e,t=0;t<a.length;t++){for(var r=a[t],n=!0,i=1;i<r.length;i++){var c=r[i];0!==s[c]&&(n=!1)}n&&(a.splice(t--,1),e=o(o.s=r[0]))}return e}var n={},s={app:0},a=[];function o(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=e,o.c=n,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(r,n,function(t){return e[t]}.bind(null,n));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=t,i=i.slice();for(var u=0;u<i.length;u++)t(i[u]);var l=c;a.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"0d6b":function(e,t,r){},"176f":function(e,t,r){},"1ca9":function(e,t,r){},3510:function(e,t,r){"use strict";var n=r("c05f"),s=r.n(n);s.a},"36c0":function(e,t,r){},"3b4e":function(e,t,r){"use strict";var n=r("8560"),s=r.n(n);s.a},4678:function(e,t,r){var n={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-SG":"cdab","./en-SG.js":"cdab","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-nz":"6f50","./en-nz.js":"6f50","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-tw":"90ea","./zh-tw.js":"90ea"};function s(e){var t=a(e);return r(t)}function a(e){var t=n[e];if(!(t+1)){var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}return t}s.keys=function(){return Object.keys(n)},s.resolve=a,e.exports=s,s.id="4678"},5009:function(e,t,r){"use strict";var n=r("9607"),s=r.n(n);s.a},"543e":function(e,t,r){},"56d7":function(e,t,r){"use strict";r.r(t);r("9e1f"),r("450d");var n=r("6ed5"),s=r.n(n),a=(r("0fb7"),r("f529")),o=r.n(a),i=(r("7f7f"),r("bd49"),r("18ff")),c=r.n(i),u=(r("960d"),r("defb")),l=r.n(u),m=(r("cb70"),r("b370")),p=r.n(m),h=(r("bdc7"),r("aa2f")),f=r.n(h),d=(r("de31"),r("c69e")),g=r.n(d),b=(r("a769"),r("5cc3")),v=r.n(b),w=(r("a673"),r("7b31")),j=r.n(w),y=(r("adec"),r("3d2d")),x=r.n(y),P=(r("be4f"),r("896a")),I=r.n(P),k=(r("826b"),r("c263")),_=r.n(k),S=(r("cbb5"),r("8bbc")),$=r.n(S),O=(r("ce18"),r("f58e")),C=r.n(O),M=(r("f225"),r("89a9")),R=r.n(M),V=(r("672e"),r("101e")),L=r.n(V),D=(r("075a"),r("72aa")),E=r.n(D),N=(r("e612"),r("dd87")),T=r.n(N),U=(r("a7cc"),r("df33")),F=r.n(U),G=(r("560b"),r("dcdc")),A=r.n(G),q=(r("5466"),r("ecdf")),z=r.n(q),B=(r("38a0"),r("ad41")),Y=r.n(B),H=(r("9d4c"),r("e450")),X=r.n(H),J=(r("10cb"),r("f3ad")),W=r.n(J),K=(r("6611"),r("e772")),Q=r.n(K),Z=(r("1f1a"),r("4e4b")),ee=r.n(Z),te=(r("eca7"),r("3787")),re=r.n(te),ne=(r("425f"),r("4105")),se=r.n(ne),ae=(r("1951"),r("eedf")),oe=r.n(ae),ie=(r("8bd8"),r("4cb2")),ce=r.n(ie),ue=(r("4ca3"),r("443e")),le=r.n(ue),me=(r("f4f9"),r("c2cc")),pe=r.n(me),he=(r("7a0f"),r("0f6c")),fe=r.n(he),de=(r("cadf"),r("551c"),r("097d"),r("2b0e")),ge=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("el-container",[r("el-header",{attrs:{height:"auto"}},[r("navbar")],1),r("el-main",{attrs:{id:"main"}},[r("div",{staticClass:"main-container"},[r("router-view")],1)])],1)],1)},be=[],ve=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"nav-container"},[r("h1",{staticClass:"web-title",staticStyle:{color:"#fff"}},[e._v("大地監控")]),e.isLogined?r("label",{attrs:{for:"menu",id:"burger"},on:{click:e.toggleHidenNav}},[r("font-awesome-icon",{attrs:{icon:"bars"}})],1):e._e(),e.isShowNav&&e.isLogined?r("section",{attrs:{id:"nav"}},[r("ul",{staticClass:"nav__items"},[r("li",{staticClass:"nav__item",class:{active:e.isActive("/user-info")},on:{click:function(t){e.toNavPath("UserInfo")}}},[e._v("\n        帳號資料\n      ")]),r("li",{staticClass:"nav__item",class:{active:e.isActive("/projects")},on:{click:function(t){e.toNavPath("Projects")}}},[e._v("\n        專案列表\n      ")])]),r("ul",{staticClass:"nav__items"},[e.isShow("vg:CRUD")?r("li",{staticClass:"nav__item",class:{active:e.isActive("/vg-items")},on:{click:function(t){e.toNavPath("VGItems")}}},[e._v("\n        軸力計設定\n      ")]):e._e(),e.isShow("soItem:CRUD")?r("li",{staticClass:"nav__item",class:{active:e.isActive("/so-items")},on:{click:function(t){e.toNavPath("SOItems")}}},[e._v("\n        傾度管設定\n      ")]):e._e(),e.isShow("account:CRUD")?r("li",{staticClass:"nav__item",class:{active:e.isActive("/users")},on:{click:function(t){e.toNavPath("Users")}}},[e._v("\n        帳號設定\n      ")]):e._e(),e.isShow("project:CRUD")?r("li",{staticClass:"nav__item",class:{active:e.isActive(["/projects-setting","/project-phases"])},on:{click:e.toggleProjectSubNav}},[e._v("\n        專案設定\n        "),e.projectSubMenuShow?r("ul",{staticClass:"nav__sub"},[r("li",{staticClass:"nav__item",class:{active:e.isActive("/projects-setting")},on:{click:function(t){e.toNavPath("ProjectsSetting")}}},[e._v("\n            專案資料\n          ")]),r("li",{staticClass:"nav__item",class:{active:e.isActive("/project-phases")},on:{click:function(t){e.toNavPath("ProjectPhaseList")}}},[e._v("\n            執行階段\n          ")])]):e._e()]):e._e(),e.isShow("permission:CRUD")?r("li",{staticClass:"nav__item",class:{active:e.isActive("/permisson-setup")},on:{click:function(t){e.toNavPath("PermissionSetup")}}},[e._v("\n        權限設定\n      ")]):e._e(),r("li",{staticClass:"nav__item",on:{click:e.logout}},[e._v("登出")])])]):e._e()])},we=[],je=(r("28a5"),r("6762"),r("2fdb"),{methods:{toPath:function(e,t){this.$router.push({name:e,params:t})}}}),ye=je,xe=r("ad3d"),Pe={name:"Navbar",mixins:[ye],components:{FontAwesomeIcon:xe["a"]},data:function(){return{projectSubMenuShow:!1,isShowNav:null,width:0}},mounted:function(){var e=this;this.$nextTick(function(){e.initHidNav(),window.addEventListener("orientationchange",e.initHidNav)})},beforeDestroy:function(){window.removeEventListener("orientationchange",this.initHidNav)},computed:{isLogined:function(){return!!this.$store.getters.token}},watch:{width:function(){this.isShowNav=this.width>768}},methods:{logout:function(){this.$store.dispatch("logout")},isShow:function(e){return this.isLogined&&this.$store.getters.myPermissions.includes(e)},toNavPath:function(e){this.toPath(e),this.width<=768?this.isShowNav=!1:this.projectSubMenuShow=!1},isActive:function(e){var t=this;return Array.isArray(e)?e.some(function(e){return e===t.$route.path}):"string"===typeof e?this.$route.path===e:void 0},initHidNav:function(){var e=this;setTimeout(function(){e.width=document.body.clientWidth},20)},toggleProjectSubNav:function(e){"專案設定"===e.target.innerText.split("\n").shift()&&(this.projectSubMenuShow=!this.projectSubMenuShow)},toggleHidenNav:function(){this.isShowNav=!this.isShowNav}}},Ie=Pe,ke=(r("5009"),r("2877")),_e=Object(ke["a"])(Ie,ve,we,!1,null,"187e79ba",null),Se=_e.exports,$e={name:"app",components:{Navbar:Se}},Oe=$e,Ce=(r("5c0b"),Object(ke["a"])(Oe,ge,be,!1,null,null,null)),Me=Ce.exports,Re=(r("ac6a"),r("5df3"),r("96cf"),r("1da1")),Ve=r("8c4f"),Le=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"entry-container"},[r("el-form",{staticClass:"entry"},[r("el-form-item",{attrs:{label:"帳號"}},[r("el-input",{attrs:{type:"text",name:"account",placeholder:"請輸入帳號"},model:{value:e.account,callback:function(t){e.account=t},expression:"account"}})],1),r("el-form-item",{attrs:{label:"密碼"}},[r("el-input",{attrs:{type:"password",name:"password",placeholder:"請輸入密碼"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1),r("el-form-item",[r("div",{staticClass:"button-container"},[r("el-button",{attrs:{type:"primary","native-type":"submit"},on:{click:function(t){return t.preventDefault(),e.submit(t)}}},[e._v("\n          登入\n        ")])],1)])],1)],1)},De=[],Ee={name:"Entry",data:function(){return{account:null,password:null}},methods:{submit:function(){var e=Object(Re["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.account){e.next=3;break}return this.$message.error("請輸入帳號"),e.abrupt("return");case 3:if(this.password){e.next=6;break}return this.$message.error("請輸入密碼"),e.abrupt("return");case 6:return e.prev=6,e.next=9,this.$store.dispatch("login",{account:this.account,password:this.password});case 9:this.$message({message:"".concat(this.account," 歡迎您"),type:"success",center:!0,duration:1800}),this.$router.push({name:"Projects"}),e.next=16;break;case 13:e.prev=13,e.t0=e["catch"](6),this.$message.error(e.t0.message);case 16:case"end":return e.stop()}},e,this,[[6,13]])}));return function(){return e.apply(this,arguments)}}()}},Ne=Ee,Te=(r("eeb3"),Object(ke["a"])(Ne,Le,De,!1,null,null,null)),Ue=Te.exports,Fe=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-form",{attrs:{model:e.me}},[r("h1",[e._v("帳號資料")]),r("section",[r("h2",[e._v("基本資料")]),r("p",[e._v("姓名："+e._s(e.me.name))]),r("p",[e._v("角色："+e._s(e.me.roleName))]),r("p",[e._v("公司："+e._s(e.me.company.name))]),e.me.soItem?r("p",[e._v("傾度管 編號："+e._s(e.me.soItem.number))]):e._e()]),r("h2",[e._v("聯絡方式")]),r("el-form-item",{attrs:{label:"電話",prop:"phone",rules:[{required:!0,pattern:/^[0][9]\d{8}$/,message:"請輸入電話號碼 : 09xxxxxxxx",trigger:"blur"}]}},[r("el-input",{attrs:{placeholder:"請輸入電話"},model:{value:e.phone,callback:function(t){e.phone=t},expression:"phone"}})],1),r("el-form-item",{attrs:{label:"email",prop:"email",rules:[{required:!0,message:"請輸入 email",trigger:"blur"},{type:"email",message:"請確認格式 example@chuen.com.tw",trigger:["blur","change"]}]}},[r("el-input",{attrs:{placeholder:"請輸入 email"},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}})],1),r("h2",[e._v("登入密碼")]),r("el-form-item",{attrs:{label:"密碼"}},[r("el-checkbox",{staticStyle:{float:"right"},model:{value:e.isText,callback:function(t){e.isText=t},expression:"isText"}},[e._v("顯示密碼")]),r("el-input",{attrs:{type:e.passwordShowType,placeholder:"請輸入密碼"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1),r("el-form-item",{staticClass:"button-container"},[r("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("\n      確認送出\n    ")])],1)],1)},Ge=[],Ae={name:"UserInfo",mixins:[ye],data:function(){return{isText:!1}},computed:{me:function(){return this.$store.getters.me},phone:{get:function(){return this.$store.getters.myPhone},set:function(e){this.$store.commit("myPhone",e)}},email:{get:function(){return this.$store.getters.myMail},set:function(e){this.$store.commit("myMail",e)}},passwordShowType:function(){return this.isText?"text":"password"},password:{get:function(){return this.$store.getters.myPassword},set:function(e){this.$store.commit("myPassword",e)}}},methods:{updateMe:function(e){this.$store.commit("updateMe",e)},submit:function(){var e=Object(Re["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.$store.dispatch("updateMe");case 3:this.$message({message:"資料更新成功",type:"success"}),e.next=9;break;case 6:e.prev=6,e.t0=e["catch"](0),this.$message.error("請重新檢查 ".concat(e.t0.message));case 9:case"end":return e.stop()}},e,this,[[0,6]])}));return function(){return e.apply(this,arguments)}}()}},qe=Ae,ze=Object(ke["a"])(qe,Fe,Ge,!1,null,null,null),Be=ze.exports,Ye=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"userList"},[r("h1",[e._v("帳號列表")]),r("div",{staticClass:"operationGroup"},[r("div",{staticClass:"operationGroup-left"},[e.deleteList.length?r("el-button",{attrs:{type:"danger"},on:{click:e.deleteUsers}},[e._v("刪除")]):e._e()],1),r("div",{staticClass:"operationGroup-right"},[r("el-button",{attrs:{type:"info",plain:""},on:{click:function(t){e.toPath("UserCreate")}}},[r("i",{staticClass:"el-icon-plus"})])],1)]),r("el-table",{attrs:{data:e.userList},on:{"selection-change":e.updateDeleteList}},[r("el-table-column",{attrs:{type:"selection",width:"40"}}),r("el-table-column",{attrs:{prop:"name",label:"姓名",width:"auto","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"text"},on:{click:function(r){e.toPath("UserEdit",{userId:t.row.id})}}},[e._v("\n          "+e._s(t.row.name)+"\n        ")])]}}])}),r("el-table-column",{attrs:{prop:"company.name",label:"公司",width:"150"}}),r("el-table-column",{attrs:{prop:"roleName",label:"角色",width:"70"}})],1)],1)},He=[],Xe={name:"UserList",mixins:[ye],data:function(){return{deleteList:[]}},computed:{userList:function(){return this.$store.getters.everyone}},methods:{deleteUsers:function(){var e=Object(Re["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(0!==this.deleteList.length){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.$confirm("確定要刪除？",{confirmButtonText:"確定",cancelButtonText:"取消",type:"warning"});case 5:e.next=11;break;case 7:return e.prev=7,e.t0=e["catch"](2),this.$message({type:"info",message:"已取消刪除"}),e.abrupt("return");case 11:return e.prev=11,e.next=14,this.$store.dispatch("deleteUsers",this.deleteList);case 14:this.$message({message:"使用者 ".concat(this.deleteList," 已刪除"),type:"success",showClose:!0,center:!0,duration:1200}),e.next=20;break;case 17:e.prev=17,e.t1=e["catch"](11),this.$message.error("請重新檢查 ".concat(e.t1.message));case 20:case"end":return e.stop()}},e,this,[[2,7],[11,17]])}));return function(){return e.apply(this,arguments)}}(),updateDeleteList:function(e){this.deleteList=e.map(function(e){return e.id})}}},Je=Xe,We=Object(ke["a"])(Je,Ye,He,!1,null,null,null),Ke=We.exports,Qe=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"userCreate"},[r("h1",[e._v("帳號設定")]),r("h2",[e._v("基本資料")]),r("el-form",{attrs:{"label-position":"top","label-width":"80px",model:e.user}},[r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{xs:24,sm:12}},[r("el-form-item",{attrs:{label:"姓名"}},[r("el-input",{model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1)],1),r("el-col",{attrs:{xs:24,sm:12}},[r("el-form-item",{attrs:{label:"角色"}},[r("el-select",{attrs:{placeholder:"請選擇"},model:{value:e.roleName,callback:function(t){e.roleName=t},expression:"roleName"}},e._l(e.rolesOptions,function(e){return r("el-option",{key:e.name,attrs:{label:e.name,value:e.name}})}))],1)],1),r("el-col",{attrs:{xs:24,sm:12}},[r("el-form-item",{attrs:{label:"登入帳號"}},[r("el-input",{model:{value:e.account,callback:function(t){e.account=t},expression:"account"}})],1)],1),r("el-col",{attrs:{xs:24,sm:12}},[r("el-form-item",{attrs:{label:"預設密碼"}},[r("div",{staticClass:"password"},[e._v("000")])])],1)],1),r("el-form-item",{attrs:{label:"公司名稱"}},[r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{xs:17,sm:20}},[r("el-form-item",[r("el-select",{attrs:{placeholder:"請選擇","value-key":"id"},model:{value:e.company,callback:function(t){e.company=t},expression:"company"}},e._l(e.companiesOptions,function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e}})}))],1)],1),r("el-col",{attrs:{xs:7,sm:4}},[r("el-button",{on:{click:function(t){e.toPath("Companies")}}},[e._v("維護")])],1)],1)],1),e.isShow("account:soItemSelf")?r("el-form-item",{attrs:{label:"傾度管"}},[r("el-select",{attrs:{placeholder:"請選擇","value-key":"id"},model:{value:e.soItem,callback:function(t){e.soItem=t},expression:"soItem"}},e._l(e.soItemOptions,function(e){return r("el-option",{key:e.id,attrs:{label:e.number,value:e}})}))],1):e._e(),r("el-form-item",[r("el-button",{on:{click:function(t){e.toPath("Users")}}},[e._v("\n        回上一頁\n      ")]),r("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("\n        確定送出\n      ")])],1)],1)],1)},Ze=[],et={name:"UserEdit",mixins:[ye],data:function(){return{isShowPassword:!1}},computed:{user:function(){return this.$store.getters.currentUser},name:{get:function(){return this.$store.getters.currentUser.name},set:function(e){this.$store.commit("currentUserName",e)}},roleName:{get:function(){return this.$store.getters.currentUser.roleName},set:function(e){this.$store.commit("currentUserRoleName",e)}},rolesOptions:function(){return this.$store.getters.roles},account:{get:function(){return this.$store.getters.currentUser.account},set:function(e){this.$store.commit("currentUserAccount",e)}},password:function(){var e=this.$store.getters.currentUser.password;return this.isShowPassword?e:e.split("").map(function(){return"*"}).join("")},companiesOptions:function(){return this.$store.getters.companies},company:{get:function(){return this.$store.getters.currentUser.company},set:function(e){this.$store.commit("currentUserCompany",e)}},soItem:{get:function(){return this.$store.getters.currentUser.soItem},set:function(e){this.$store.commit("currentUserSoItem",e)}},soItemOptions:function(){return this.$store.getters.soItemsFree}},methods:{onSubmit:function(){var e=Object(Re["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.$store.dispatch("createUser");case 3:this.$message({message:"成功編輯 ".concat(this.user.name),type:"success",center:!0,duration:1800}),this.toPath("Users"),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),this.$message.error("請重新檢查 ".concat(e.t0.message));case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(){return e.apply(this,arguments)}}(),isShow:function(e){return this.$store.getters.currentUserPermissions.filter(function(e){return e.value}).map(function(e){return e.name}).includes(e)}}},tt=et,rt=(r("b379"),Object(ke["a"])(tt,Qe,Ze,!1,null,"a47268ac",null)),nt=rt.exports,st=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"userEdit"},[r("h1",[e._v("帳號設定")]),r("h2",[e._v("基本資料")]),r("el-form",{attrs:{"label-position":"top",model:e.user}},[r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{xs:24,sm:12}},[r("el-form-item",{attrs:{label:"姓名"}},[r("el-input",{attrs:{autosize:""},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1)],1),r("el-col",{attrs:{xs:24,sm:12}},[r("el-form-item",{attrs:{label:"角色"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{disabled:"",placeholder:"請選擇"},model:{value:e.roleName,callback:function(t){e.roleName=t},expression:"roleName"}},e._l(e.rolesOptions,function(e){return r("el-option",{key:e.name,attrs:{label:e.name,value:e.name}})}))],1)],1),r("el-col",{attrs:{xs:24,sm:12}},[r("el-form-item",{attrs:{label:"登入帳號"}},[r("el-input",{attrs:{disabled:""},model:{value:e.account,callback:function(t){e.account=t},expression:"account"}})],1)],1),r("el-col",{attrs:{xs:24,sm:12}},[r("el-form-item",{attrs:{label:"密碼"}},[r("div",{staticClass:"password"},[e._v(e._s(e.password))]),r("el-checkbox",{model:{value:e.isShowPassword,callback:function(t){e.isShowPassword=t},expression:"isShowPassword"}},[e._v("顯示密碼")])],1)],1)],1),r("el-form-item",{attrs:{label:"公司名稱"}},[r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{xs:17,sm:20}},[r("el-form-item",[r("el-select",{attrs:{disabled:"",placeholder:"請選擇","value-key":"id"},model:{value:e.company,callback:function(t){e.company=t},expression:"company"}},e._l(e.companiesOptions,function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e}})}))],1)],1),r("el-col",{attrs:{xs:7,sm:4}},[r("el-button",{on:{click:function(t){e.toPath("Companies")}}},[e._v("維護")])],1)],1)],1),e.isShow("account:soItemSelf")?r("el-form-item",{attrs:{label:"傾度管"}},[r("el-select",{attrs:{placeholder:"請選擇","value-key":"id"},model:{value:e.soItem,callback:function(t){e.soItem=t},expression:"soItem"}},e._l(e.soItemOptions,function(e){return r("el-option",{key:e.id,attrs:{label:e.number,value:e}})}))],1):e._e(),r("el-form-item",[r("el-button",{on:{click:function(t){e.toPath("Users")}}},[e._v("\n        回上一頁\n      ")]),r("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("\n        確定送出\n      ")])],1)],1)],1)},at=[],ot={name:"UserEdit",mixins:[ye],data:function(){return{isShowPassword:!1}},computed:{user:function(){return this.$store.getters.currentUser},name:{get:function(){return this.$store.getters.currentUser.name},set:function(e){this.$store.commit("currentUserName",e)}},roleName:{get:function(){return this.$store.getters.currentUser.roleName},set:function(e){this.$store.commit("currentUserRoleName",e)}},rolesOptions:function(){return this.$store.getters.roles},account:{get:function(){return this.$store.getters.currentUser.account},set:function(e){this.$store.commit("currentUserAccount",e)}},password:function(){var e=this.$store.getters.currentUser.password;return this.isShowPassword?e:e.split("").map(function(){return"*"}).join("")},companiesOptions:function(){return this.$store.getters.companies},company:{get:function(){return this.$store.getters.currentUser.company},set:function(e){this.$store.commit("currentUserCompany",e)}},soItem:{get:function(){return this.$store.getters.currentUser.soItem},set:function(e){this.$store.commit("currentUserSoItem",e)}},soItemOptions:function(){return this.$store.getters.soItemsFree}},methods:{onSubmit:function(){var e=Object(Re["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.$store.dispatch("updateUser",{userId:this.$route.params.userId});case 3:this.$message({message:"成功編輯 ".concat(this.user.name),type:"success",center:!0,duration:1800}),e.next=9;break;case 6:e.prev=6,e.t0=e["catch"](0),this.$message.error("請重新檢查 ".concat(e.t0.message));case 9:case"end":return e.stop()}},e,this,[[0,6]])}));return function(){return e.apply(this,arguments)}}(),isShow:function(e){return this.$store.getters.currentUserPermissions.filter(function(e){return e.value}).map(function(e){return e.name}).includes(e)}}},it=ot,ct=(r("3510"),Object(ke["a"])(it,st,at,!1,null,"e775d508",null)),ut=ct.exports,lt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"companies"},[r("h1",[e._v("公司列表")]),r("el-row",{staticClass:"operationGroup",attrs:{type:"flex",justify:"between"}},[r("el-col",{staticClass:"operationGroup-left",attrs:{span:4}},[e.deleteCompaniesId.length?r("el-button",{attrs:{type:"danger"},on:{click:e.deleteCompanies}},[e._v("刪除")]):e._e()],1),r("el-col",{staticClass:"operationGroup-right",attrs:{xs:18,sm:8}},[r("el-input",{attrs:{placeholder:"新增公司名稱"},model:{value:e.newCompanyName,callback:function(t){e.newCompanyName=t},expression:"newCompanyName"}},[r("el-button",{attrs:{slot:"append",disabled:!e.newCompanyName},on:{click:e.sendNewCompany},slot:"append"},[r("i",{staticClass:"el-icon-plus"})])],1)],1)],1),r("el-table",{staticClass:"companies-table",attrs:{data:e.companies},on:{"selection-change":e.updateDeleteList}},[r("el-table-column",{attrs:{type:"selection",width:"40"}}),r("el-table-column",{attrs:{prop:"name",label:"公司名稱"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-input",{on:{focus:function(r){e.beforeEdit(t.row.id,t.row.name)},blur:function(r){e.afterEdit(t.row.id,t.row.name)}},model:{value:t.row.name,callback:function(r){e.$set(t.row,"name",r)},expression:"scope.row.name"}})]}}])})],1)],1)},mt=[],pt={mixins:[ye],data:function(){return{oldCompany:{id:"",name:""},deleteCompaniesId:[],newCompanyName:""}},computed:{companies:function(){return this.$store.getters.companies}},methods:{sendNewCompany:function(){var e=Object(Re["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.$store.dispatch("createCompany",{name:this.newCompanyName});case 3:this.$message({message:"成功新增 ".concat(this.newCompanyName),type:"success",center:!0,duration:1800}),this.newCompanyName="",e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),this.$message.error("請重新檢查 ".concat(e.t0.message));case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(){return e.apply(this,arguments)}}(),deleteCompanies:function(){var e=Object(Re["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(0!==this.deleteCompaniesId.length){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.$confirm("確定要刪除？",{confirmButtonText:"確定",cancelButtonText:"取消",type:"warning"});case 5:e.next=11;break;case 7:return e.prev=7,e.t0=e["catch"](2),this.$message({type:"info",message:"已取消刪除"}),e.abrupt("return");case 11:return e.prev=11,e.next=14,this.$store.dispatch("deleteCompanies",this.deleteCompaniesId);case 14:this.$message({message:"成功刪除",type:"success",center:!0,duration:1800}),e.next=20;break;case 17:e.prev=17,e.t1=e["catch"](11),this.$message.error("請重新檢查 ".concat(e.t1.message));case 20:case"end":return e.stop()}},e,this,[[2,7],[11,17]])}));return function(){return e.apply(this,arguments)}}(),updateDeleteList:function(e){this.deleteCompaniesId=e.map(function(e){return e.id})},beforeEdit:function(e,t){this.oldCompany={id:e,name:t}},afterEdit:function(){var e=Object(Re["a"])(regeneratorRuntime.mark(function e(t,r){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,r!==this.oldCompany.name){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,this.$store.dispatch("updateCompany",{id:t,payload:{name:r}});case 5:this.$message({message:"成功編輯 ".concat(this.oldCompany.name," → ").concat(r),type:"success",center:!0,duration:1800}),e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),this.$message.error("請重新檢查 ".concat(e.t0.message));case 11:case"end":return e.stop()}},e,this,[[0,8]])}));return function(t,r){return e.apply(this,arguments)}}()}},ht=pt,ft=Object(ke["a"])(ht,lt,mt,!1,null,null,null),dt=ft.exports,gt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"permission-setup"},[r("h1",[e._v("權限設定")]),r("el-table",{attrs:{data:e.rolePermissions}},[r("el-table-column",{attrs:{prop:"role",label:"角色",width:"140"}}),r("el-table-column",{attrs:{prop:"permissions",label:"權限"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.permissions,function(n){return r("div",{key:n.name},["account:updateSelf"!==n.name?r("el-checkbox",{attrs:{disabled:"account:CRUD"===n.name,value:n.value},on:{change:function(r){e.changeRolePermissions(n.value,n.name,t.row.role)}}},[e._v("\n            "+e._s(e.AllPermissions[n.name])+"\n          ")]):e._e()],1)})}}])})],1),r("div",{staticClass:"button-container"},[r("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("\n      確認送出\n    ")])],1)],1)},bt=[],vt={name:"PermissionSetup",mixins:[ye],data:function(){return{}},computed:{AllPermissions:function(){return this.$store.getters.permissions},rolePermissions:function(){return this.$store.getters.rolePermissions}},methods:{changeRolePermissions:function(e,t,r){e=!e,this.$store.commit("toggleRolePermissionValue",{role:r,permissionName:t,permissionValue:e})},submit:function(){var e=Object(Re["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.$store.dispatch("updateRolePermissions");case 3:this.$message({message:"權限設定成功 請重新登入",type:"success"}),e.next=9;break;case 6:e.prev=6,e.t0=e["catch"](0),this.$message.error(e.t0,"權限設定失敗");case 9:case"end":return e.stop()}},e,this,[[0,6]])}));return function(){return e.apply(this,arguments)}}()}},wt=vt,jt=Object(ke["a"])(wt,gt,bt,!1,null,null,null),yt=jt.exports,xt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"projects-setting"},[r("h1",[e._v("專案資料")]),r("div",{staticClass:"operationGroup"},[r("div",{staticClass:"operationGroup-left"},[r("el-button",{directives:[{name:"show",rawName:"v-show",value:!!e.deleteProjectsId.length,expression:"!!deleteProjectsId.length"}],attrs:{type:"danger"},on:{click:e.deleteProjects}},[e._v("刪除")])],1),r("div",{staticClass:"operationGroup-right"},[r("el-button",{attrs:{type:"info",plain:""},on:{click:function(t){e.toPath("ProjectCreate")}}},[r("i",{staticClass:"el-icon-plus"})])],1)]),r("el-table",{staticClass:"projects-table",attrs:{data:e.projects},on:{"selection-change":e.updateDeleteList}},[r("el-table-column",{attrs:{type:"selection",width:"25"}}),r("el-table-column",{attrs:{label:"案號",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"text"},on:{click:function(r){e.toPath("ProjectEdit",{projectId:t.row.id})}}},[e._v(e._s(t.row.number))])]}}])}),r("el-table-column",{attrs:{prop:"name",label:"名稱","min-width":"200"}}),r("el-table-column",{attrs:{prop:"status",label:"專案狀態",width:"100",filters:e.statusOptions,"filter-method":e.statusFilter}})],1)],1)},Pt=[],It={mixins:[ye],data:function(){return{deleteProjectsId:[]}},computed:{projects:function(){return this.$store.getters.projects},statusOptions:function(){return this.$store.getters.statusOptions.map(function(e){return{text:e.label,value:e.label}})}},methods:{deleteProjects:function(){var e=Object(Re["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.deleteProjectsId.length){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.$confirm("確定要刪除？",{confirmButtonText:"確定",cancelButtonText:"取消",type:"warning"});case 5:e.next=11;break;case 7:return e.prev=7,e.t0=e["catch"](2),this.$message({type:"info",message:"已取消刪除"}),e.abrupt("return");case 11:return e.prev=11,e.next=14,this.$store.dispatch("deleteProjects",this.deleteProjectsId);case 14:this.$message({message:"成功刪除",type:"success",center:!0,duration:1800}),e.next=20;break;case 17:e.prev=17,e.t1=e["catch"](11),this.$message.error("請重新檢查 ".concat(e.t1.message));case 20:case"end":return e.stop()}},e,this,[[2,7],[11,17]])}));return function(){return e.apply(this,arguments)}}(),updateDeleteList:function(e){this.deleteProjectsId=e.map(function(e){return e.id})},statusFilter:function(e,t){return t.status===e}}},kt=It,_t=(r("704a"),Object(ke["a"])(kt,xt,Pt,!1,null,null,null)),St=_t.exports,$t=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"projects"},[r("h1",[e._v("專案列表")]),r("el-table",{staticClass:"projects-table",attrs:{data:e.projects}},[r("el-table-column",{attrs:{fixed:"",prop:"number",label:"案號",width:"150"}}),r("el-table-column",{attrs:{prop:"name",label:"名稱","min-width":"200"}}),r("el-table-column",{attrs:{width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{on:{click:function(r){e.toPath("ProjectMonitor",{projectId:t.row.id})}}},[e._v("檢視量測資料")])]}}])}),e.isShow("project:soItemMeasure")?r("el-table-column",{attrs:{width:"130"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{on:{click:function(r){e.to(t.row.id)}}},[e._v("傾度管操作")])]}}])}):e._e(),e.isShow("project:filter")?r("el-table-column",{attrs:{prop:"status",label:"專案狀態",width:"100",filters:e.statusOptions,"filter-method":e.statusFilter}}):e._e()],1)],1)},Ot=[],Ct={name:"Projects",mixins:[ye],computed:{projects:function(){return this.$store.getters.projects},statusOptions:function(){return this.$store.getters.statusOptions.map(function(e){return{text:e.label,value:e.label}})},filteredProjects:function(){var e=this;return this.projects.filter(function(t){return 0!==e.status.length&&(1===e.status.length?t.status===e.status[0]:2===e.status.length?t:void 0)})}},methods:{statusFilter:function(e,t){return t.status===e},to:function(e){window.location="http://".concat(window.location.host,"/measures/so/").concat(e)},isShow:function(e){return!!this.$store.getters.myPermissions&&this.$store.getters.myPermissions.includes(e)}}},Mt=Ct,Rt=(r("ed0c"),Object(ke["a"])(Mt,$t,Ot,!1,null,null,null)),Vt=Rt.exports,Lt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"createProject"},[r("h1",[e._v("專案設定")]),r("el-form",{ref:"project",attrs:{"label-position":"top","label-width":"80px",model:e.project}},[r("h2",[e._v("基本資料")]),r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{sm:12,xs:24}},[r("el-form-item",{attrs:{label:"專案案號",prop:"number",rules:[{required:!0,message:"請輸入專案案號",trigger:["blur","change"]}]}},[r("el-input",{attrs:{placeholder:"請輸入專案號"},model:{value:e.number,callback:function(t){e.number=t},expression:"number"}})],1)],1),r("el-col",{attrs:{sm:12,xs:24}},[r("el-form-item",{attrs:{label:"專案狀態",prop:"status",rules:[{required:!0,message:"請輸入專案狀態",trigger:["blur","change"]}]}},[r("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"請選擇"},model:{value:e.status,callback:function(t){e.status=t},expression:"status"}},e._l(e.statusOptions,function(e){return r("el-option",{key:e.name,attrs:{label:e.label,value:e.value}})}))],1)],1)],1),r("el-form-item",{attrs:{label:"專案名稱",prop:"name",rules:[{required:!0,message:"請輸入專案名稱",trigger:["blur","change"]}]}},[r("el-input",{attrs:{placeholder:"請輸入專案名稱"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),r("el-form-item",{attrs:{label:"地點",prop:"address"}},[r("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"請輸入地址"},model:{value:e.address,callback:function(t){e.address=t},expression:"address"}})],1),r("el-form-item",{attrs:{label:"客戶公司名稱"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"請選擇公司名稱"},model:{value:e.companyId,callback:function(t){e.companyId=t},expression:"companyId"}},e._l(e.companiesOptions,function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),r("el-form-item",[r("h2",[e._v("參與人員")]),r("el-tabs",{attrs:{type:"border-card",stretch:""}},[r("el-tab-pane",{attrs:{label:"OPT"}},[r("el-form-item",[r("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"請選擇 OPT",multiple:"","value-key":"id"},model:{value:e.optsInProject,callback:function(t){e.optsInProject=t},expression:"optsInProject"}},e._l(e.optsOptions,function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e}})}))],1)],1),r("el-tab-pane",{attrs:{label:"USER"}},[r("el-form-item",[r("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"請選擇 USER","value-key":"id",multiple:""},model:{value:e.usersInProject,callback:function(t){e.usersInProject=t},expression:"usersInProject"}},e._l(e.usersOptions,function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e}})}))],1)],1)],1)],1),r("el-form-item",[r("h2",[e._v("配置圖")]),r("el-upload",{staticClass:"upload-image-area",attrs:{drag:"","list-type":"picture",action:e.uploadURL,"before-upload":e.verificationImgSize,"on-change":e.uploadImg,"auto-upload":!1,"file-list":[],limit:1}},[e.sitePlan?r("img",{attrs:{src:e.sitePlan,alt:""}}):e._e(),e.sitePlan?e._e():r("i",{staticClass:"el-icon-upload"}),e.sitePlan?e._e():r("div",{staticClass:"el-upload__text"},[e._v("\n          點一下"),r("em",[e._v("上傳檔案")])]),e.sitePlan?r("el-button",{staticClass:"re-select-image",attrs:{size:"small",type:"primary"}},[e._v("另選圖片")]):e._e(),r("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("上傳文件不能超過 2MB")])],1)],1),r("h2",[e._v("監控設定")]),r("el-tabs",{attrs:{type:"border-card",stretch:""}},[r("el-tab-pane",{attrs:{label:"軸力計 (VG)"}},[r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:24}},[r("el-form-item",{attrs:{label:"使用軸力計編號(可複選)"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{multiple:""},model:{value:e.vgItemIdsInProject,callback:function(t){e.vgItemIdsInProject=t},expression:"vgItemIdsInProject"}},e._l(e.vgItemsOptions,function(e){return r("el-option",{key:e.id,attrs:{label:e.number,value:e.id}})})),e.isNeedMoreVg?r("div",{staticClass:"need-more-vg"},[e._v("\n                請增加軸力計\n              ")]):e._e()],1)],1),r("el-col",{attrs:{sm:12,xs:24}},[r("el-form-item",{attrs:{label:"支撐階數"}},[r("el-input-number",{attrs:{"controls-position":"right",step:1,precision:0,min:0},model:{value:e.totalFloor,callback:function(t){e.totalFloor=t},expression:"totalFloor"}})],1)],1),r("el-col",{attrs:{sm:12,xs:24}},[r("el-form-item",{attrs:{label:"每層數量"}},[r("el-input-number",{attrs:{"controls-position":"right",step:1,precision:0,min:0},model:{value:e.totalVgPreFloor,callback:function(t){e.totalVgPreFloor=t},expression:"totalVgPreFloor"}})],1)],1),r("el-col",{attrs:{span:24}},[r("el-form-item",[r("el-button",{attrs:{disabled:e.isConfigVgCode},nativeOn:{click:function(t){e.configVgCode()}}},[e._v("產生軸力計編碼")])],1)],1)],1),e.totalVgLocation?r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:24}},[r("el-form-item",{attrs:{inline:!0,label:"切換支撐階數"}},[r("el-pagination",{attrs:{layout:"prev, pager, next","page-size":e.totalVgLocationPreFloor,total:e.totalVgLocation},on:{"current-change":e.onChangeFloor}})],1)],1),r("el-col",{attrs:{xs:24,sm:6}},[r("h3",[e._v("管理值"),r("span",{staticClass:"small"},[e._v("(噸)")])]),e._l(e.vgManagementValueOfCurrFloor,function(t,n){return r("el-form-item",{key:n,attrs:{label:e.managementLabel[n]+"值",prop:n,rules:[{validator:e.validateVgManagementValue,message:"請檢查"+e.managementLabel[n]+"值",label:n,trigger:["blur","change"]}]}},[r("el-input-number",{attrs:{"controls-position":"right",step:1,precision:1,min:0,value:e.vgManagementValueOfCurrFloor[n]},on:{input:function(t){e.updateVgManagementValue(n,t)}}})],1)})],2),r("el-col",{attrs:{xs:24,sm:18}},[r("el-col",{attrs:{xs:24,sm:16}},[r("h3",[e._v("位置編碼"),r("span",{staticClass:"small"},[e._v("(VG-層數-流水號)")])])]),r("el-col",{attrs:{xs:24,sm:8}},[r("el-button",{on:{click:function(t){e.toPath("Steels")}}},[e._v("\n                維護鋼材資料\n              ")])],1),r("el-table",{staticClass:"vg-table",attrs:{data:e.vgLocationCurrFloor}},[r("el-table-column",{attrs:{prop:"vgNumber",label:"軸力計","min-width":"150"}}),r("el-table-column",{attrs:{prop:"port",label:"Port",width:"50"}}),r("el-table-column",{attrs:{prop:"number",label:"配置編碼",width:"80"}}),r("el-table-column",{attrs:{prop:"steelName",label:"使用鋼材","min-width":"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-select",{attrs:{value:t.row.steelId,placeholder:"請選擇鋼材"},on:{input:function(r){e.onChangeSteel(r,t.row)}}},e._l(e.steelsOptions,function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))]}}])})],1)],1)],1):e._e()],1),r("el-tab-pane",{attrs:{label:"傾度管 (SO)"}},[r("el-form-item",{attrs:{label:"數量"}},[r("el-input-number",{attrs:{"controls-position":"right",step:1,precision:0,min:0},model:{value:e.totalEstimatedSoLocation,callback:function(t){e.totalEstimatedSoLocation=t},expression:"totalEstimatedSoLocation"}})],1),r("el-form-item",{attrs:{label:"預設每孔深度 (m)"}},[r("el-input-number",{attrs:{"controls-position":"right",step:1,precision:2,min:0},model:{value:e.defaultDepth,callback:function(t){e.defaultDepth=t},expression:"defaultDepth"}})],1),r("el-form-item",[r("el-button",{attrs:{disabled:e.isConfigSoCode},nativeOn:{click:function(t){e.configSoCode()}}},[e._v("產生傾度管編碼")])],1),e.totalSoLocation?r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{xs:24,sm:8}},[r("h3",[e._v("管理值"),r("span",{staticClass:"small"},[e._v("(cm)")])]),e._l(e.soManagementValue,function(t,n){return r("el-form-item",{key:n,attrs:{label:e.managementLabel[n]+"值",prop:n,rules:[{message:"請檢查"+e.managementLabel[n]+"值",validator:e.validateSoManagementValue,label:n,trigger:["blur","change"]}]}},[r("el-input-number",{attrs:{"controls-position":"right",step:1,precision:2,min:0,value:e.soManagementValue[n]},on:{input:function(t){e.updateSoManagementValue(n,t)}}})],1)})],2),r("el-col",{attrs:{xs:24,sm:16}},[r("h3",{staticClass:"so-measure-tips"},[e._v("\n              位置編號"),r("span",{staticClass:"small"},[e._v("(SO-流水號)")])]),r("el-table",{staticClass:"so-table",attrs:{data:e.soLocation}},[r("el-table-column",{attrs:{prop:"number",label:"配置編碼"}}),r("el-table-column",{attrs:{prop:"depth",label:"量測深度",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-input-number",{attrs:{"controls-position":"right",step:1,precision:2,min:0},model:{value:t.row.depth,callback:function(r){e.$set(t.row,"depth",r)},expression:"scope.row.depth"}})]}}])})],1)],1)],1):e._e()],1)],1),r("el-form-item",[r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:12}},[r("el-button",{staticStyle:{width:"100%"},on:{click:function(t){e.toPath("ProjectsSetting")}}},[e._v("\n            回上一頁\n          ")])],1),r("el-col",{attrs:{span:12}},[r("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary",disabled:!this.totalSoLocation&&!this.totalVgLocation},on:{click:e.onSubmit}},[e._v("\n            確定送出\n          ")])],1)],1)],1)],1)],1)},Dt=[],Et=r("2909"),Nt=(r("1c4c"),r("6c7b"),{methods:{importVGItems:function(e,t,r){var n=[],s=function(){for(var n=e*t,s=n%r.length,a=Math.floor(n/r.length),o=new Array(r.length).fill(a),i=0;i<s;i++)o[i]+=1;return o}();function a(e){return Array.from({length:e},function(e,t){return t+1})}function o(e,t){return new Array(e).fill(r[t])}function i(e){var t=[];return s.forEach(function(r,n){var s=e(r,n);t=t.concat(s)}),t}var c=i(a),u=i(o);function l(t,r){var n=r.filter(function(r,n){if(n%e==t)return r});return n}function m(t){for(var r=[],n=0;n<e;n++)r.push(l(n,t));return r}var p=m(u),h=m(c);function f(){for(var e=p.flat(),r=h.flat(),s=0,a=0;a<e.length;a++)a%t==0&&(s+=1),n[a]={floor:s,host:e[a],port:r[a],serial:"vg-".concat(s,"-0").concat(a%t+1),steelId:""}}return f(),n}}}),Tt=Nt,Ut={name:"ProjectCreate",mixins:[ye,Tt],data:function(){return{MAX_PORT_FOR_VG:14,managementLabel:{notice:"注意",warning:"警戒",action:"行動"}}},computed:{project:function(){return this.$store.getters.project},number:{get:function(){return this.$store.getters.project.number},set:function(e){this.$store.commit("project",{property:"number",value:e})}},statusOptions:function(){return this.$store.getters.statusOptions},status:{get:function(){return this.$store.getters.project.status},set:function(e){this.$store.commit("project",{property:"status",value:e})}},name:{get:function(){return this.$store.getters.project.name},set:function(e){this.$store.commit("project",{property:"name",value:e})}},address:{get:function(){return this.$store.getters.project.address},set:function(e){this.$store.commit("project",{property:"address",value:e})}},companiesOptions:function(){return this.$store.getters.notMyCompanies},companyId:{get:function(){return this.$store.getters.project.companyId},set:function(e){this.$store.commit("project",{property:"companyId",value:e})}},optsOptions:function(){return Object(Et["a"])(this.$store.getters.optsOfCustomerCompany).concat(Object(Et["a"])(this.$store.getters.optsOfMyCompany))},optsInProject:{get:function(){return this.$store.getters.optsInProject},set:function(e){this.$store.commit("project",{property:"OPT",value:e})}},usersOptions:function(){return Object(Et["a"])(this.$store.getters.usersOfCustomerCompany).concat(Object(Et["a"])(this.$store.getters.usersOfMyCompany))},usersInProject:{get:function(){return this.$store.getters.usersInProject},set:function(e){this.$store.commit("project",{property:"USER",value:e})}},sitePlan:function(){return this.$store.getters.sitePlan},uploadURL:function(){return"".concat("https://geo-stage.chuen.com.tw:3333/v1","/uploads")},vgItemIdsInProject:{get:function(){return this.$store.getters.vgItemIdsInProject},set:function(e){this.$store.commit("project",{property:"vgIds",value:e}),this.$store.dispatch("configVgCode",{totalFloor:this.isNeedMoreVg?0:this.totalFloor,totalVgPreFloor:this.isNeedMoreVg?0:this.totalVgLocationPreFloor})}},vgItemsOptions:function(){return this.$store.getters.vgItemsFree},totalFloor:{get:function(){return this.$store.getters.totalFloor},set:function(e){this.$store.commit("project",{property:"floor",value:e}),this.$store.dispatch("configVgCode",{totalFloor:this.isNeedMoreVg?0:e,totalVgPreFloor:this.isNeedMoreVg?0:this.totalVgPreFloor})}},isNeedMoreVg:function(){var e=this.totalFloor*this.totalVgPreFloor,t=this.vgItemIdsInProject.length*this.MAX_PORT_FOR_VG;return t<e},isConfigVgCode:function(){return this.isNeedMoreVg||!this.totalFloor||!this.totalVgPreFloor||!this.vgItemIdsInProject.length},steelsOptions:function(){return this.$store.getters.steels},totalVgLocation:function(){return this.$store.getters.totalVgLocation},vgManagementValueOfCurrFloor:function(){return this.$store.getters.vgManagementValueOfCurrFloor},vgLocationCurrFloor:function(){return this.$store.getters.vgLocationCurrFloor},totalSoLocation:function(){return this.$store.getters.totalSoLocation},defaultDepth:{get:function(){return this.$store.getters.defaultDepth},set:function(e){this.$store.commit("defaultDepth",e),this.$store.dispatch("configSoCode",{depth:e,total_location:this.totalEstimatedSoLocation})}},totalVgLocationPreFloor:function(){return this.$store.getters.totalVgLocationPreFloor},totalVgPreFloor:{get:function(){return this.$store.getters.totalVgPreFloor},set:function(e){this.$store.commit("totalVgPreFloor",e),this.$store.dispatch("configVgCode",{totalFloor:this.isNeedMoreVg?0:this.totalFloor,totalVgPreFloor:this.isNeedMoreVg?0:e})}},isConfigSoCode:function(){return!this.totalEstimatedSoLocation||!this.defaultDepth},soManagementValue:function(){return this.$store.getters.soManagementValue},soLocation:function(){return this.$store.getters.soLocation},totalEstimatedSoLocation:{get:function(){return this.$store.getters.totalEstimatedSoLocation},set:function(e){this.$store.commit("totalEstimatedSoLocation",e),this.$store.dispatch("configSoCode",{depth:this.defaultDepth,total_location:e})}}},methods:{uploadImg:function(e){this.$store.dispatch("uploadConfigImage",e.raw)},verificationImgSize:function(e){var t=e.size/1024/1024<2;return t||this.$message.error("上傳圖片大小不能超過 2MB!"),t},configVgCode:function(){var e=this.isNeedMoreVg?0:this.totalFloor,t=this.isNeedMoreVg?0:this.totalVgPreFloor;this.$store.dispatch("configVgCode",{totalFloor:e,totalVgPreFloor:t})},configSoCode:function(){var e=this.defaultDepth,t=this.totalEstimatedSoLocation;this.$store.dispatch("configSoCode",{depth:e,total_location:t})},updateVgManagementValue:function(e,t){this.$store.commit("vgManagementValue",{value:t,label:e})},onChangeSteel:function(e,t){var r=this.steelsOptions.filter(function(t){return t.id===e}).shift();this.$store.commit("steelOfVgLocation",{location:t,selectedSteel:r})},onChangeFloor:function(e){this.$store.commit("currentFloor",e)},validateSoManagementValue:function(e,t,r){t=this.soManagementValue[e.label],e.required&&!t&&r(new Error(e.message)),r()},validateVgManagementValue:function(e,t,r){t=this.vgManagementValueOfCurrFloor[e.label],e.required&&!t&&r(new Error(e.message)),r()},validateConfigLv1:function(){var e="";return this.project.vgLocation.length||(e="軸力計"),this.project.soLocation.length||(e+=e.length?"或傾度管":"傾度管"),e.length?this.$confirm("不需量測".concat(e,"嗎？"),"提示",{confirmButtonText:"確定不量",cancelButtonText:"取消",type:"warning"}):Promise.resolve()},validateConfigLv2:function(){if(this.project.vgLocation.length){var e=0;if(this.project.vgManagement.some(function(t,r){return!(t.warning&&t.notice&&t.action)&&(e=r,!0)}))return Promise.reject(Error("未設定第".concat(e+1,"階的軸力計管理值")))}return!this.project.soLocation.length||this.project.soManagement.warning&&this.project.soManagement.notice&&this.project.soManagement.action?Promise.resolve():Promise.reject(Error("未設定傾度的管理值"))},updateSoManagementValue:function(e,t){this.$store.commit("soManagementValue",{value:t,label:e})},onSubmit:function(){var e=Object(Re["a"])(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.validateConfigLv1();case 3:return e.next=5,this.validateConfigLv2();case 5:this.$refs.project.validate(function(e){if(!e)return t.$message.error("請重新檢查必填欄位"),!1;t.submitProject()}),e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),this.$message.error("請重新檢查 ".concat(e.t0.message));case 11:case"end":return e.stop()}},e,this,[[0,8]])}));return function(){return e.apply(this,arguments)}}(),submitProject:function(){var e=Object(Re["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.$store.dispatch("createProject");case 3:this.$message({message:"成功新增 ".concat(this.project.name),type:"success",center:!0,duration:1800}),this.toPath("ProjectsSetting"),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),this.$message.error("請重新檢查 ".concat(e.t0.message));case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(){return e.apply(this,arguments)}}()}},Ft=Ut,Gt=(r("f23f"),r("8c8d"),Object(ke["a"])(Ft,Lt,Dt,!1,null,"348ac15b",null)),At=Gt.exports,qt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"ProjectEdit"},[r("h1",[e._v("專案設定")]),r("el-form",{ref:"project",attrs:{"label-position":"top","label-width":"80px",model:e.project}},[r("h2",[e._v("基本資料")]),r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{sm:12,xs:24}},[r("el-form-item",{attrs:{label:"專案案號",prop:"number",rules:[{required:!0,message:"請輸入專案案號",trigger:["blur","change"]}]}},[r("el-input",{attrs:{disabled:""},model:{value:e.number,callback:function(t){e.number=t},expression:"number"}})],1)],1),r("el-col",{attrs:{sm:12,xs:24}},[r("el-form-item",{attrs:{label:"專案狀態",prop:"status",rules:[{required:!0,message:"請輸入專案狀態",trigger:["blur","change"]}]}},[r("el-select",{staticStyle:{width:"100%"},attrs:{disabled:e.statusDisable},model:{value:e.status,callback:function(t){e.status=t},expression:"status"}},e._l(e.statusOptions,function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)],1)],1),r("el-form-item",{attrs:{label:"專案名稱",prop:"name",rules:[{required:!0,message:"請輸入專案名稱",trigger:["blur","change"]}]}},[r("el-input",{attrs:{placeholder:"請輸入專案名稱"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),r("el-form-item",{attrs:{label:"地點"}},[r("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"請輸入地址"},model:{value:e.address,callback:function(t){e.address=t},expression:"address"}})],1),r("el-form-item",{attrs:{label:"客戶公司名稱"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"請選擇公司名稱"},model:{value:e.companyId,callback:function(t){e.companyId=t},expression:"companyId"}},e._l(e.companiesOptions,function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),r("el-form-item",[r("h2",[e._v("參與人員")]),r("el-tabs",{attrs:{type:"border-card",stretch:""}},[r("el-tab-pane",{attrs:{label:"OPT"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"請選擇 OPT",multiple:"","value-key":"id"},model:{value:e.optsInProject,callback:function(t){e.optsInProject=t},expression:"optsInProject"}},e._l(e.optsOptions,function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e}})}))],1),r("el-tab-pane",{attrs:{label:"USER"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"請選擇 USER","value-key":"id",multiple:""},model:{value:e.usersInProject,callback:function(t){e.usersInProject=t},expression:"usersInProject"}},e._l(e.usersOptions,function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e}})}))],1)],1)],1),r("el-form-item",[r("h2",[e._v("配置圖")]),r("el-upload",{staticClass:"upload-image-area",attrs:{drag:"","list-type":"picture",action:e.uploadURL,"before-upload":e.verificationImgSize,"on-change":e.uploadImg,"auto-upload":!1,"file-list":[],limit:1}},[e.sitePlan?r("img",{attrs:{src:e.sitePlan}}):e._e(),e.sitePlan?e._e():r("i",{staticClass:"el-icon-upload"}),e.sitePlan?e._e():r("div",{staticClass:"el-upload__text"},[e._v("\n          點一下"),r("em",[e._v("上傳檔案")])]),r("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("上傳文件不能超過 2MB")]),e.sitePlan?r("el-button",{staticClass:"re-select-image",attrs:{size:"small",type:"primary"}},[e._v("另選圖片")]):e._e()],1)],1),r("h2",[e._v("監控設定")]),r("el-tabs",{attrs:{type:"border-card",stretch:""}},[e.vgLocationCurrFloor.length?r("el-tab-pane",{attrs:{label:"軸力計 (VG)"}},[r("el-form-item",{attrs:{label:"使用軸力計編號(可複選)"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{multiple:"",disabled:""},model:{value:e.vgItemIdsInProject,callback:function(t){e.vgItemIdsInProject=t},expression:"vgItemIdsInProject"}},e._l(e.vgItemsOptions,function(e){return r("el-option",{key:e.id,attrs:{label:e.number,value:e.id}})}))],1),r("el-form-item",{attrs:{label:"將軸力計"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{clearable:""},model:{value:e.oldVgId,callback:function(t){e.oldVgId=t},expression:"oldVgId"}},e._l(e.vgItemsInProjectOptions,function(e){return r("el-option",{key:e.id,attrs:{label:e.number,value:e.id}})}))],1),r("el-form-item",{attrs:{label:"換成"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{disabled:!e.oldVgId},model:{value:e.newVgId,callback:function(t){e.newVgId=t},expression:"newVgId"}},e._l(e.vgItemsNotInProject,function(e){return r("el-option",{key:e.id,attrs:{label:e.number,value:e.id}})}))],1),e.canISwitchVg?r("el-form-item",[r("el-button",{on:{click:function(t){e.switchVG(e.oldVgId,e.newVgId)}}},[e._v("確認轉換")])],1):e._e(),e.totalVgLocation?r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:24}},[r("el-form-item",{attrs:{label:"切換支撐階數"}},[r("el-pagination",{attrs:{layout:"prev, pager, next","page-size":e.totalVgLocationPreFloor,total:e.totalVgLocation},on:{"current-change":e.onChangeFloor}})],1)],1),r("el-col",{attrs:{xs:24,sm:6}},[r("h3",[e._v("管理值"),r("span",{staticClass:"small"},[e._v("(噸)")])]),e._l(e.vgManagementValueOfCurrFloor,function(t,n){return r("el-form-item",{key:n,attrs:{label:e.managementLabel[n]+"值",prop:n,rules:[{validator:e.validateVgManagementValue,message:"請檢查"+e.managementLabel[n]+"值",label:n,trigger:["blur","change"]}]}},[r("el-input-number",{attrs:{"controls-position":"right",step:1,precision:1,min:0,value:e.vgManagementValueOfCurrFloor[n]},on:{input:function(t){e.updateVgManagementValue(n,t)}}})],1)})],2),r("el-col",{attrs:{xs:24,sm:18}},[r("h3",[e._v("位置編碼"),r("span",{staticClass:"small"},[e._v("(VG-層數-流水號)")])]),r("el-button",{on:{click:function(t){e.toPath("Steels")}}},[e._v("\n              維護鋼材資料\n            ")]),r("el-table",{staticClass:"vg-table",attrs:{data:e.vgLocationCurrFloor}},[r("el-table-column",{attrs:{prop:"vgNumber",label:"軸力計","min-width":"150"}}),r("el-table-column",{attrs:{prop:"port",label:"Port",width:"50"}}),r("el-table-column",{attrs:{prop:"number",label:"配置編碼",width:"80"}}),r("el-table-column",{attrs:{prop:"steelName",label:"使用鋼材","min-width":"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-select",{attrs:{value:t.row.steelId,placeholder:"請選擇鋼材"},on:{input:function(r){e.onChangeSteel(r,t.row)}}},e._l(e.steelsOptions,function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))]}}])})],1)],1)],1):e._e()],1):e._e(),e.soLocation.length?r("el-tab-pane",{attrs:{label:"傾度管 (SO)"}},[r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{xs:24,sm:8}},[r("h3",[e._v("管理值"),r("span",{staticClass:"small"},[e._v("(cm)")])]),e._l(e.soManagementValue,function(t,n){return r("el-form-item",{key:n,attrs:{label:e.managementLabel[n]+"值",prop:n,rules:[{message:"請檢查"+e.managementLabel[n]+"值",validator:e.validateSoManagementValue,label:n,trigger:["blur","change"]}]}},[r("el-input-number",{attrs:{"controls-position":"right",step:1,precision:2,min:0,value:e.soManagementValue[n]},on:{input:function(t){e.updateSoManagementValue(n,t)}}})],1)})],2),r("el-col",{attrs:{xs:24,sm:16}},[r("h3",{staticClass:"so-measure-tips"},[e._v("\n              位置編號"),r("span",{staticClass:"small"},[e._v("(SO-流水號)")])]),r("el-table",{staticClass:"so-table",attrs:{data:e.soLocation}},[r("el-table-column",{attrs:{prop:"number",label:"配置編碼"}}),r("el-table-column",{attrs:{prop:"depth",label:"量測深度",width:"200"}})],1)],1)],1)],1):e._e()],1),r("el-form-item",[r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:12}},[r("el-button",{staticStyle:{width:"100%"},on:{click:function(t){e.toPath("ProjectsSetting")}}},[e._v("\n            回上一頁\n          ")])],1),r("el-col",{attrs:{span:12}},[r("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary",disabled:!this.totalSoLocation&&!this.totalVgLocation},on:{click:e.onSubmit}},[e._v("\n            確定送出\n          ")])],1)],1)],1)],1)],1)},zt=[],Bt={name:"ProjectEdit",mixins:[ye],data:function(){return{oldVgId:"",newVgId:"",statusDisable:!1,managementLabel:{notice:"注意",warning:"警戒",action:"行動"}}},mounted:function(){this.statusDisable="end"===this.status},computed:{project:function(){return this.$store.getters.project},number:{get:function(){return this.$store.getters.project.number},set:function(e){this.$store.commit("project",{property:"number",value:e})}},statusOptions:function(){return this.$store.getters.statusOptions},companiesOptions:function(){return this.$store.getters.notMyCompanies},vgItemsOptions:function(){return this.$store.getters.vgItems},vgItemsInProjectOptions:function(){return this.$store.getters.vgItemsInProject},steelsOptions:function(){return this.$store.getters.steels},status:{get:function(){return this.$store.getters.project.status},set:function(e){this.$store.commit("project",{property:"status",value:e})}},name:{get:function(){return this.$store.getters.project.name},set:function(e){this.$store.commit("project",{property:"name",value:e})}},address:{get:function(){return this.$store.getters.project.address},set:function(e){this.$store.commit("project",{property:"address",value:e})}},companyId:{get:function(){return this.$store.getters.project.companyId},set:function(e){this.$store.commit("project",{property:"companyId",value:e}),this.$store.commit("project",{property:"OPT",value:[]}),this.$store.commit("project",{property:"USER",value:[]})}},optsOptions:function(){return Object(Et["a"])(this.$store.getters.optsOfCustomerCompany).concat(Object(Et["a"])(this.$store.getters.optsOfMyCompany))},optsInProject:{get:function(){return this.$store.getters.optsInProject},set:function(e){this.$store.commit("project",{property:"OPT",value:e})}},usersOptions:function(){return Object(Et["a"])(this.$store.getters.usersOfCustomerCompany).concat(Object(Et["a"])(this.$store.getters.usersOfMyCompany))},usersInProject:{get:function(){return this.$store.getters.usersInProject},set:function(e){this.$store.commit("project",{property:"USER",value:e})}},sitePlan:function(){return this.$store.getters.sitePlan},uploadURL:function(){return"".concat("https://geo-stage.chuen.com.tw:3333/v1","/uploads")},vgItemIdsInProject:{get:function(){return this.$store.getters.vgItemIdsInProject},set:function(e){this.$store.commit("project",{property:"vgIds",value:e})}},vgItemsNotInProject:function(){return this.$store.getters.vgItemsNotInProject},vgLocationCurrFloor:function(){return this.$store.getters.vgLocationCurrFloor},canISwitchVg:function(){return this.oldVgId&&this.newVgId},totalVgLocation:function(){return this.$store.getters.totalVgLocation},totalVgLocationPreFloor:function(){return this.$store.getters.totalVgLocationPreFloor},vgManagementValueOfCurrFloor:function(){return this.$store.getters.vgManagementValueOfCurrFloor},soManagementValue:function(){return this.$store.getters.soManagementValue},totalSoLocation:function(){return this.$store.getters.totalSoLocation},isChangeProjectStatus:function(){return!1===this.statusDisable&&"end"===this.status},soLocation:function(){return this.$store.getters.soLocation}},methods:{uploadImg:function(e){this.$store.dispatch("uploadConfigImage",e.raw)},verificationImgSize:function(e){var t=e.size/1024/1024<2;return t||this.$message.error("上傳圖片大小不能超過 2MB!"),t},updateVgManagementValue:function(e,t){this.$store.commit("vgManagementValue",{value:t,label:e})},updateSoManagementValue:function(e,t){this.$store.commit("soManagementValue",{value:t,label:e})},validateVgManagementValue:function(e,t,r){t=this.vgManagementValueOfCurrFloor[e.label],e.required&&!t&&r(new Error(e.message)),r()},validateSoManagementValue:function(e,t,r){t=this.soManagementValue[e.label],e.required&&!t&&r(new Error(e.message)),r()},onChangeSteel:function(e,t){var r=this.steelsOptions.filter(function(t){return t.id===e}).shift();this.$store.commit("steelOfVgLocation",{location:t,selectedSteel:r})},onSubmit:function(){var e=this;this.$refs.project.validate(function(t){if(!t)return e.$message.error("請重新檢查必填欄位"),!1;e.submitProject()})},switchVG:function(e,t){this.$store.dispatch("switchVg",{oldVgId:e,newVgId:t}),this.oldVgId="",this.newVgId=""},onChangeFloor:function(e){this.$store.commit("currentFloor",e)},validateStatuChange:function(){return this.isChangeProjectStatus?this.$confirm("結案之後，無法恢復執行中","確定要結案？",{confirmButtonText:"確定要結案",cancelButtonText:"取消",type:"warning"}):Promise.resolve()},submitProject:function(){var e=Object(Re["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.validateStatuChange();case 3:return e.next=5,this.$store.dispatch("updateProject",{id:this.$route.params.projectId});case 5:this.$message({message:"成功編輯 ".concat(this.project.name),type:"success",center:!0,duration:1800}),this.toPath("ProjectsSetting"),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](0),this.$message.error("請重新檢查 ".concat(e.t0.message));case 12:case"end":return e.stop()}},e,this,[[0,9]])}));return function(){return e.apply(this,arguments)}}()}},Yt=Bt,Ht=(r("feeb"),r("3b4e"),Object(ke["a"])(Yt,qt,zt,!1,null,"632c9f94",null)),Xt=Ht.exports,Jt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"projectMonitor"},[r("h1",[e._v("查看監控資料")]),r("h2",[e._v("基本資料")]),r("p",[e._v("案號："+e._s(e.project.number))]),r("p",[e._v("名稱："+e._s(e.project.name))]),r("h2",[e._v("\n    配置圖"),r("span",{staticClass:"small clickable",on:{click:function(t){e.toggleConfigImg=!e.toggleConfigImg}}},[e._v("\n      顯示/隱藏\n    ")])]),r("el-collapse-transition",[r("div",{directives:[{name:"show",rawName:"v-show",value:e.toggleConfigImg,expression:"toggleConfigImg"}]},[r("img",{staticClass:"configImage",attrs:{src:e.sitePlan}})])]),r("h3",[e._v("監控值")]),r("el-form",{attrs:{"label-position":"top"}},[r("el-tabs",{attrs:{type:"border-card",stretch:""}},[r("el-tab-pane",{attrs:{label:"軸力計 (VG)"}},[r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{xs:24,sm:12}},[r("el-form-item",{attrs:{label:"日期"}},[r("el-date-picker",{attrs:{format:"yyyy-MM-dd",type:"date","picker-options":e.datePickerOptions},model:{value:e.currentVgDate,callback:function(t){e.currentVgDate=t},expression:"currentVgDate"}})],1)],1),r("el-col",{attrs:{xs:24,sm:12}},[r("el-form-item",{attrs:{label:"支撐階數"}},[r("el-select",{attrs:{placeholder:"請選擇"},model:{value:e.currentFloor,callback:function(t){e.currentFloor=t},expression:"currentFloor"}},e._l(e.floorOptions,function(e){return r("el-option",{key:e,attrs:{label:e,value:e}})}))],1)],1),r("el-col",{attrs:{span:24}},[r("VGECharts",{attrs:{selectedDay:e.currentVgDate,selectedFloor:e.currentFloor,vgChartData:e.vgChartData,project:e.project}})],1),r("el-col",{attrs:{span:24}},[e.isShow("project:export")?r("el-button",{on:{click:function(t){e.exportMeasuredData("vg")}}},[e._v("匯出資料")]):e._e()],1)],1)],1),r("el-tab-pane",{attrs:{label:"傾度管 (SO)"}},[r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{xs:24,sm:12}},[r("el-form-item",{attrs:{label:"位置"}},[r("el-select",{attrs:{placeholder:"請選擇位置"},model:{value:e.currentSoLocation,callback:function(t){e.currentSoLocation=t},expression:"currentSoLocation"}},e._l(e.soLocation,function(e){return r("el-option",{key:e.number,attrs:{label:e.number,value:e.number}})}))],1)],1),r("el-col",{attrs:{xs:24,sm:12}},[r("el-form-item",{attrs:{label:"日期"}},[r("el-select",{attrs:{placeholder:"請選擇日期"},model:{value:e.currentSoDate,callback:function(t){e.currentSoDate=t},expression:"currentSoDate"}},e._l(e.dateOfSoMeasuredData,function(e){return r("el-option",{key:e,attrs:{label:e,value:e}})}))],1)],1),r("el-col",{staticStyle:{"min-height":"400px"},attrs:{span:24}},[e.currentSoDate&&e.currentSoDate?r("SOECharts",{attrs:{soChartData:e.soChartData,project:e.project}}):e._e()],1),r("el-col",{attrs:{span:24}},[e.isShow("project:export")?r("el-button",{on:{click:function(t){e.exportMeasuredData("so")}}},[e._v("匯出資料")]):e._e()],1)],1)],1)],1)],1)],1)},Wt=[],Kt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"vgECharts"},[r("chart",{ref:"chart1",attrs:{options:e.options,"auto-resize":!0}})],1)},Qt=[],Zt=(r("c5f6"),r("c1df")),er=r.n(Zt),tr={name:"VGECharts",props:{vgChartData:Array,project:Object,selectedDay:Date,selectedFloor:Number},computed:{vgsPosition:function(){return this.vgChartData.map(function(e){return e.vgLocation})},vgManagement:function(){return this.project.vgManagement[this.selectedFloor-1]},markLine:function(){return{silent:!0,data:[{label:{formatter:"行動值",position:"start"},lineStyle:{color:"red"},yAxis:-this.vgManagement.action},{label:{formatter:"警戒值",position:"start"},lineStyle:{color:"blue"},yAxis:-this.vgManagement.warning},{label:{formatter:"管理值",position:"start"},lineStyle:{color:"green"},yAxis:-this.vgManagement.notice},{label:{formatter:"管理值",position:"start"},lineStyle:{color:"green"},yAxis:this.vgManagement.notice},{label:{formatter:"警戒值",position:"start"},lineStyle:{color:"blue"},yAxis:this.vgManagement.warning},{label:{formatter:"行動值",position:"start"},lineStyle:{color:"red"},yAxis:this.vgManagement.action}]}},seriesData:function(){var e=this;return this.vgChartData.length?this.vgChartData.map(function(t){return{name:t.vgLocation,type:"line",data:t.data,markLine:e.markLine}}):{type:"line",markLine:this.markLine}},options:function(){return{tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}}},legend:{data:this.vgsPosition},xAxis:{type:"time",min:+er()(this.selectedDay).startOf("day"),max:+er()(this.selectedDay).endOf("day"),axisLabel:{formatter:function(e){return er()(e).format("HH:mm")}}},yAxis:{max:1.2*this.vgManagement.action,min:1.2*-this.vgManagement.action,type:"value"},series:this.seriesData}}}},rr=tr,nr=Object(ke["a"])(rr,Kt,Qt,!1,null,null,null),sr=nr.exports,ar=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"soECharts"},[r("chart",{ref:"chart1",attrs:{options:e.options,"auto-resize":!0}})],1)},or=[],ir=(r("8615"),r("456d"),{name:"SOECharts",props:{soChartData:Array,project:Object},data:function(){return{}},computed:{soManagement:function(){return this.project.soManagement},markLine:function(){return{silent:!0,data:[{lineStyle:{color:"green"},name:"管理值",xAxis:this.soManagement.notice,label:{normal:{formatter:"管理值"}}},{lineStyle:{color:"green"},name:"管理值",xAxis:-this.soManagement.notice,label:{normal:{formatter:"管理值"}}},{lineStyle:{color:"blue"},name:"警戒值",xAxis:this.soManagement.warning,label:{normal:{formatter:"警戒值"}}},{lineStyle:{color:"blue"},name:"警戒值",xAxis:-this.soManagement.warning,label:{normal:{formatter:"警戒值"}}},{lineStyle:{color:"red"},name:"行動值",xAxis:this.soManagement.action,label:{normal:{formatter:"行動值"}}},{lineStyle:{color:"red"},name:"行動值",xAxis:-this.soManagement.action,label:{normal:{formatter:"行動值"}}}]}},soLegend:function(){var e=Object.keys(this.soChartData.slice().shift());return e.shift(),e},soData:function(){var e=new Array(3).fill(0);e[0]=this.soChartData[0].depth-1;var t=[];return t.push(e),this.soChartData.forEach(function(e){return t.push(Object.values(e))}),t.map(function(e){return e[0]+=1}),t.unshift(Object.keys(this.soChartData[0])),t},seriesData:function(){var e=this;return this.soLegend.map(function(t){return{name:t,type:"line",encode:{x:t,y:"depth"},markLine:e.markLine,smooth:!0}})},options:function(){return{tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}}},legend:{data:this.soLegend},dataset:{source:this.soData},xAxis:{type:"value",max:2*this.soManagement.action,min:2*-this.soManagement.action},yAxis:{type:"value"},series:this.seriesData}}}}),cr=ir,ur=Object(ke["a"])(cr,ar,or,!1,null,null,null),lr=ur.exports,mr={name:"ProjectMonitor",components:{VGECharts:sr,SOECharts:lr},mixins:[ye],mounted:function(){this.currentVgDate=this.$store.getters.vgMeasuredDataRange.end,this.$store.dispatch("fetchVgMeasuredData",{projectId:this.$route.params.projectId,date:er()(this.currentVgDate).format("YYYY/MM/DD"),floor:1}),this.$store.dispatch("fetchSoMeasuredData",{projectId:this.$route.params.projectId,soLocationNumber:this.currentSoLocation})},data:function(){return{toggleConfigImg:!0,currentFloor:1,currentVgDate:new Date,currentSoLocation:"SO-01",currentSoDate:""}},computed:{project:function(){return this.$store.getters.project},sitePlan:function(){return this.$store.getters.sitePlan},datePickerOptions:function(){var e=this.$store.getters.vgMeasuredDataRange.start;e.setDate(e.getDate()-1);var t=this.$store.getters.vgMeasuredDataRange.end;return{disabledDate:function(r){return r.getTime()<e||r.getTime()>t}}},floorOptions:function(){var e=this.$store.getters.totalFloor;return Array.from({length:e}).map(function(e,t){return t+1})},vgChartData:function(){return this.$store.getters.vgMeasuredData},dateOfSoMeasuredData:function(){return this.$store.getters.dateOfSoMeasuredData},soChartData:function(){var e=this,t=this.$store.getters.soMeasuredData.filter(function(t){return t.date===e.currentSoDate}).shift();return t&&t.soData},soLocation:function(){return this.$store.getters.soLocation}},watch:{currentVgDate:function(e){this.$store.dispatch("fetchVgMeasuredData",{projectId:this.$route.params.projectId,date:er()(e).format("YYYY/MM/DD"),floor:this.currentFloor})},currentFloor:function(e){this.$store.dispatch("fetchVgMeasuredData",{projectId:this.$route.params.projectId,date:er()(this.currentVgDate).format("YYYY/MM/DD"),floor:e})},currentSoLocation:function(e){this.currentSoDate="",this.$store.dispatch("fetchSoMeasuredData",{projectId:this.$route.params.projectId,soLocationNumber:e})}},methods:{isShow:function(e){return this.$store.getters.myPermissions.includes(e)},exportMeasuredData:function(){var e=Object(Re["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.$message({message:"正在下載'".concat(this.project.name,"'的傾度管資料"),type:"info",center:!0,duration:1800}),e.next=3,this.$store.dispatch("export",{type:t,projectId:this.$route.params.projectId});case 3:this.$message({message:"成功下載 ".concat(this.project.name),type:"success",center:!0,duration:1800});case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}},pr=mr,hr=(r("a80a"),r("580f"),Object(ke["a"])(pr,Jt,Wt,!1,null,"3ba44877",null)),fr=hr.exports,dr=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"projectPhases"},[r("h1",[e._v("專案執行階段")]),r("el-row",{staticClass:"operationGroup",attrs:{type:"flex",justify:"between"}},[r("el-col",{staticClass:"operationGroup-left",attrs:{span:4}},[e.deletePhasesId.length?r("el-button",{attrs:{type:"danger"},on:{click:e.deleteProjectPhases}},[e._v("刪除")]):e._e()],1),r("el-col",{staticClass:"operationGroup-right",attrs:{xs:18,sm:8}},[r("el-input",{attrs:{placeholder:"新增專案階段"},model:{value:e.newProjectPhaseName,callback:function(t){e.newProjectPhaseName=t},expression:"newProjectPhaseName"}},[r("el-button",{attrs:{slot:"append",disabled:!e.newProjectPhaseName},on:{click:e.sendNewProjectPhase},slot:"append"},[r("i",{staticClass:"el-icon-plus"})])],1)],1)],1),r("el-table",{staticClass:"projectPhases-table",attrs:{data:e.projectPhases},on:{"selection-change":e.updateDeleteList}},[r("el-table-column",{attrs:{type:"selection",width:"40"}}),r("el-table-column",{attrs:{prop:"name",label:"專案階段"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-input",{on:{focus:function(r){e.beforeEdit(t.row.id,t.row.name)},blur:function(r){e.afterEdit(t.row.id,t.row.name)}},model:{value:t.row.name,callback:function(r){e.$set(t.row,"name",r)},expression:"scope.row.name"}})]}}])})],1)],1)},gr=[],br={mixins:[ye],data:function(){return{oldPhase:{id:"",name:""},deletePhasesId:[],newProjectPhaseName:""}},computed:{projectPhases:function(){return this.$store.getters.projectPhases}},methods:{sendNewProjectPhase:function(){var e=Object(Re["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.$store.dispatch("createProjectPhase",{name:this.newProjectPhaseName});case 3:this.$message({message:"成功新增 ".concat(this.newProjectPhaseName),type:"success",center:!0,duration:1800}),this.newProjectPhaseName="",e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),this.$message.error("請重新檢查 ".concat(e.t0.message));case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(){return e.apply(this,arguments)}}(),deleteProjectPhases:function(){var e=Object(Re["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(0!==this.deletePhasesId.length){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.$confirm("確定要刪除？",{confirmButtonText:"確定",cancelButtonText:"取消",type:"warning"});case 5:e.next=11;break;case 7:return e.prev=7,e.t0=e["catch"](2),this.$message({type:"info",message:"已取消刪除"}),e.abrupt("return");case 11:return e.prev=11,e.next=14,this.$store.dispatch("deleteProjectPhases",this.deletePhasesId);case 14:this.$message({message:"成功刪除",type:"success",center:!0,duration:1800}),e.next=20;break;case 17:e.prev=17,e.t1=e["catch"](11),this.$message.error("請重新檢查 ".concat(e.t1.message));case 20:case"end":return e.stop()}},e,this,[[2,7],[11,17]])}));return function(){return e.apply(this,arguments)}}(),updateDeleteList:function(e){this.deletePhasesId=e.map(function(e){return e.id})},beforeEdit:function(e,t){this.oldPhase={id:e,name:t}},afterEdit:function(){var e=Object(Re["a"])(regeneratorRuntime.mark(function e(t,r){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(r!==this.oldPhase.name){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.$store.dispatch("updateProjectPhase",{id:t,payload:{name:r}});case 5:this.$message({message:"成功編輯 ".concat(this.oldPhase.name," → ").concat(r),type:"success",center:!0,duration:1800}),e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](2),this.$message.error("請重新檢查 ".concat(e.t0.message));case 11:case"end":return e.stop()}},e,this,[[2,8]])}));return function(t,r){return e.apply(this,arguments)}}()}},vr=br,wr=Object(ke["a"])(vr,dr,gr,!1,null,null,null),jr=wr.exports,yr=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"vgItems"},[r("h1",[e._v("軸力計")]),r("el-row",{staticClass:"operationGroup",attrs:{type:"flex",justify:"between"}},[r("el-col",{staticClass:"operationGroup-left",attrs:{span:4}},[e.deleteVGItemsId.length?r("el-button",{attrs:{type:"danger"},on:{click:e.deleteVGItems}},[e._v("刪除")]):e._e()],1),r("el-col",{staticClass:"operationGroup-right",attrs:{xs:18,sm:8}},[r("el-input",{attrs:{placeholder:"新增軸力計"},model:{value:e.newVGItemNumber,callback:function(t){e.newVGItemNumber=t},expression:"newVGItemNumber"}},[r("el-button",{attrs:{slot:"append",disabled:!e.newVGItemNumber},on:{click:e.sendNewVGItem},slot:"append"},[r("i",{staticClass:"el-icon-plus"})])],1)],1)],1),r("el-table",{staticClass:"vgItems-table",attrs:{data:e.vgItems},on:{"selection-change":e.updateDeleteList}},[r("el-table-column",{attrs:{type:"selection",selectable:e.deleteable,width:"40"}}),r("el-table-column",{attrs:{prop:"number",label:"編號","min-width":"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-input",{on:{focus:function(r){e.beforeEdit(t.row.id,t.row.number)},blur:function(r){e.afterEdit(t.row.id,t.row.number)}},model:{value:t.row.number,callback:function(r){e.$set(t.row,"number",r)},expression:"scope.row.number"}})]}}])}),r("el-table-column",{attrs:{prop:"projectName",label:"服務專案",width:"150"}})],1)],1)},xr=[],Pr={mixins:[ye],data:function(){return{oldVG:{id:"",number:""},deleteVGItemsId:[],newVGItemNumber:""}},computed:{vgItems:function(){return this.$store.getters.vgItems}},methods:{sendNewVGItem:function(){var e=Object(Re["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.$store.dispatch("createVG",{number:this.newVGItemNumber});case 3:this.$message({message:"成功新增 ".concat(this.newVGItemNumber),type:"success",center:!0,duration:1800}),this.newVGItemNumber="",e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),this.$message.error("請重新檢查 ".concat(e.t0.message));case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(){return e.apply(this,arguments)}}(),deleteVGItems:function(){var e=Object(Re["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(0!==this.deleteVGItemsId.length){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.$confirm("確定要刪除？",{confirmButtonText:"確定",cancelButtonText:"取消",type:"warning"});case 5:e.next=11;break;case 7:return e.prev=7,e.t0=e["catch"](2),this.$message({type:"info",message:"已取消刪除"}),e.abrupt("return");case 11:return e.prev=11,e.next=14,this.$store.dispatch("deleteVGs",this.deleteVGItemsId);case 14:this.$message({message:"軸力計 ".concat(this.deleteVGItemsId," 已刪除"),type:"success",showClose:!0,center:!0,duration:1200}),e.next=20;break;case 17:e.prev=17,e.t1=e["catch"](11),this.$message({message:"已被專案使用",type:"error",showClose:!0,center:!0,duration:1200});case 20:case"end":return e.stop()}},e,this,[[2,7],[11,17]])}));return function(){return e.apply(this,arguments)}}(),updateDeleteList:function(e){this.deleteVGItemsId=e.map(function(e){return e.id})},deleteable:function(e){return!e.projectName},beforeEdit:function(e,t){this.oldVG={id:e,number:t}},afterEdit:function(){var e=Object(Re["a"])(regeneratorRuntime.mark(function e(t,r){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(r!==this.oldVG.number){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.$store.dispatch("updateVG",{vgId:t,payload:{number:r}});case 5:this.$message({message:"成功編輯 ".concat(this.oldVG.number," → ").concat(r),type:"success",center:!0,duration:1800}),e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](2),this.$message.error("請重新檢查 ".concat(e.t0.message));case 11:case"end":return e.stop()}},e,this,[[2,8]])}));return function(t,r){return e.apply(this,arguments)}}()}},Ir=Pr,kr=Object(ke["a"])(Ir,yr,xr,!1,null,null,null),_r=kr.exports,Sr=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"steel-edit"},[r("h1",[e._v("鋼材資料")]),r("el-form",{attrs:{"label-position":"top","label-width":"80px",model:e.steel,rules:e.rules}},[r("el-form-item",{attrs:{label:"型號",prop:"name"}},[r("el-input",{model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"ES ( kg/cm^2 )",prop:"es"}},[r("el-input",{model:{value:e.es,callback:function(t){e.es=e._n(t)},expression:"es"}})],1)],1),r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"TCM",prop:"tcm"}},[r("el-input",{model:{value:e.tcm,callback:function(t){e.tcm=e._n(t)},expression:"tcm"}})],1)],1),r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"TCG",prop:"tcg"}},[r("el-input",{model:{value:e.tcg,callback:function(t){e.tcg=e._n(t)},expression:"tcg"}})],1)],1),r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"截面積 ( cm^2 )",prop:"sectionArea"}},[r("el-input",{model:{value:e.sectionArea,callback:function(t){e.sectionArea=e._n(t)},expression:"sectionArea"}})],1)],1)],1),r("el-form-item",[r("el-button",{on:{click:function(t){e.toPath("Steels")}}},[e._v("\n        回上一頁\n      ")]),r("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("\n        確定送出\n      ")])],1)],1)],1)},$r=[],Or={mixins:[ye],data:function(){return{deleteList:[],rules:{name:[{required:!0,message:"請輸入鋼材名稱",trigger:"blur"}],tcg:[{required:!0,message:"請輸入 TCG",trigger:"blur"}],tcm:[{required:!0,message:"請輸入 TCM",trigger:"blur"}],es:[{required:!0,message:"請輸入 ES",trigger:"blur"}],sectionArea:[{required:!0,message:"請輸入截面積",trigger:"blur"}]},isEdit:!1,isShow:!1}},computed:{steel:function(){return this.$store.getters.steel},deletable:function(){return 0!=this.deleteList.length},name:{get:function(){return this.$store.getters.steel.name},set:function(e){this.$store.commit("steelName",e)}},sectionArea:{get:function(){return this.$store.getters.steel.sectionArea},set:function(e){this.$store.commit("steelSectionArea",e)}},es:{get:function(){return this.$store.getters.steel.es},set:function(e){this.$store.commit("steelEs",e)}},tcm:{get:function(){return this.$store.getters.steel.tcm},set:function(e){this.$store.commit("steelTcm",e)}},tcg:{get:function(){return this.$store.getters.steel.tcg},set:function(e){this.$store.commit("steelTcg",e)}}},methods:{addSteel:function(){this.resetInput(),this.isEdit=!1,this.isShow=!0},updateDeleteList:function(e){this.isEdit=!0,this.deleteList=e.map(function(e){return e.id})},onSubmit:function(){var e=Object(Re["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.$store.dispatch("createSteel");case 3:this.$message({message:"成功新增 ".concat(this.steel.name),type:"success",center:!0,duration:1800}),this.toPath("Steels"),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),this.$message.error("請重新檢查 ".concat(e.t0.message));case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(){return e.apply(this,arguments)}}()}},Cr=Or,Mr=Object(ke["a"])(Cr,Sr,$r,!1,null,null,null),Rr=Mr.exports,Vr=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"steel-edit"},[r("h1",[e._v("鋼材資料")]),r("el-form",{attrs:{"label-position":"top","label-width":"80px",model:e.steel,rules:e.rules}},[r("el-form-item",{attrs:{label:"型號",prop:"name"}},[r("el-input",{model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"ES ( kg/cm^2 )",prop:"es"}},[r("el-input",{model:{value:e.es,callback:function(t){e.es=e._n(t)},expression:"es"}})],1)],1),r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"TCM",prop:"tcm"}},[r("el-input",{model:{value:e.tcm,callback:function(t){e.tcm=e._n(t)},expression:"tcm"}})],1)],1),r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"TCG",prop:"tcg"}},[r("el-input",{model:{value:e.tcg,callback:function(t){e.tcg=e._n(t)},expression:"tcg"}})],1)],1),r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"截面積 ( cm^2 )",prop:"sectionArea"}},[r("el-input",{model:{value:e.sectionArea,callback:function(t){e.sectionArea=e._n(t)},expression:"sectionArea"}})],1)],1)],1),r("el-form-item",[r("el-button",{on:{click:function(t){e.toPath("Steels")}}},[e._v("\n        回上一頁\n      ")]),r("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("\n        確定送出\n      ")])],1)],1)],1)},Lr=[],Dr={mixins:[ye],data:function(){return{deleteList:[],rules:{name:[{required:!0,message:"請輸入鋼材名稱",trigger:"blur"}],tcg:[{required:!0,message:"請輸入 TCG",trigger:"blur"}],tcm:[{required:!0,message:"請輸入 TCM",trigger:"blur"}],es:[{required:!0,message:"請輸入 ES",trigger:"blur"}],sectionArea:[{required:!0,message:"請輸入截面積",trigger:"blur"}]},isEdit:!1,isShow:!1}},computed:{steel:function(){return this.$store.getters.steel},deletable:function(){return 0!=this.deleteList.length},name:{get:function(){return this.$store.getters.steel.name},set:function(e){this.$store.commit("steelName",e)}},sectionArea:{get:function(){return this.$store.getters.steel.sectionArea},set:function(e){this.$store.commit("steelSectionArea",e)}},es:{get:function(){return this.$store.getters.steel.es},set:function(e){this.$store.commit("steelEs",e)}},tcm:{get:function(){return this.$store.getters.steel.tcm},set:function(e){this.$store.commit("steelTcm",e)}},tcg:{get:function(){return this.$store.getters.steel.tcg},set:function(e){this.$store.commit("steelTcg",e)}}},methods:{addSteel:function(){this.resetInput(),this.isEdit=!1,this.isShow=!0},updateDeleteList:function(e){this.isEdit=!0,this.deleteList=e.map(function(e){return e.id})},onSubmit:function(){var e=Object(Re["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.$store.dispatch("updateSteel",this.$route.params.steelId);case 3:this.$message({message:"成功編輯 ".concat(this.steel.name),type:"success",center:!0,duration:1800}),this.toPath("Steels"),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),this.$message.error("請重新檢查 ".concat(e.t0.message));case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(){return e.apply(this,arguments)}}()}},Er=Dr,Nr=Object(ke["a"])(Er,Vr,Lr,!1,null,null,null),Tr=Nr.exports,Ur=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"steels"},[r("h1",[e._v("鋼材列表")]),r("div",{staticClass:"operationGroup"},[r("div",{staticClass:"operationGroup-left"},[r("el-button",{directives:[{name:"show",rawName:"v-show",value:!!e.deleteList.length,expression:"!!deleteList.length"}],attrs:{type:"danger"},on:{click:e.deleteSteels}},[e._v("刪除")])],1),r("div",{staticClass:"operationGroup-right"},[r("el-button",{attrs:{type:"info",plain:""},on:{click:function(t){e.toPath("SteelCreate")}}},[r("i",{staticClass:"el-icon-plus"})])],1)]),r("el-table",{attrs:{data:e.steels},on:{"selection-change":e.updateDeleteList}},[r("el-table-column",{attrs:{type:"selection",width:"40"}}),r("el-table-column",{attrs:{prop:"name",label:"鋼材名稱","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"text"},on:{click:function(r){e.toPath("SteelEdit",{steelId:t.row.id})}}},[e._v("\n          "+e._s(t.row.name)+"\n        ")])]}}])}),r("el-table-column",{attrs:{prop:"sectionArea",label:"截面積 (cm^2)",width:"120"}}),r("el-table-column",{attrs:{prop:"es",label:"ES (kg/cm^2)",width:"120"}}),r("el-table-column",{attrs:{prop:"tcm",label:"TCM",width:"80"}}),r("el-table-column",{attrs:{prop:"tcg",label:"TCG",width:"80"}})],1)],1)},Fr=[],Gr={mixins:[ye],data:function(){return{deleteList:[]}},computed:{steels:function(){return this.$store.getters.steels}},methods:{deleteSteels:function(){var e=Object(Re["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(0!==this.deleteList.length){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.$confirm("確定要刪除？",{confirmButtonText:"確定",cancelButtonText:"取消",type:"warning"});case 5:e.next=11;break;case 7:return e.prev=7,e.t0=e["catch"](2),this.$message({type:"info",message:"已取消刪除"}),e.abrupt("return");case 11:return e.prev=11,e.next=14,this.$store.dispatch("deleteSteels",this.deleteList);case 14:this.$message({message:"成功刪除",type:"success",center:!0,duration:1800}),e.next=20;break;case 17:e.prev=17,e.t1=e["catch"](11),this.$message.error("請重新檢查 ".concat(e.t1.message));case 20:case"end":return e.stop()}},e,this,[[2,7],[11,17]])}));return function(){return e.apply(this,arguments)}}(),updateDeleteList:function(e){this.deleteList=e.map(function(e){return e.id})}}},Ar=Gr,qr=Object(ke["a"])(Ar,Ur,Fr,!1,null,null,null),zr=qr.exports,Br=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"soitems"},[r("h1",[e._v("傾度管列表")]),r("div",{staticClass:"operationGroup"},[r("div",{staticClass:"operationGroup-left"},[e.deleteList.length?r("el-button",{attrs:{type:"danger"},on:{click:e.deleteSOItems}},[e._v("刪除")]):e._e()],1),r("div",{staticClass:"operationGroup-right"},[r("el-button",{attrs:{type:"info",plain:""},on:{click:function(t){e.toPath("SOItemCreate")}}},[r("i",{staticClass:"el-icon-plus"})])],1)]),r("el-table",{attrs:{data:e.soItems},on:{"selection-change":e.updateDeleteList}},[r("el-table-column",{attrs:{type:"selection",width:"40"}}),r("el-table-column",{attrs:{prop:"soModelName",label:"廠牌型號",width:"120"}}),r("el-table-column",{attrs:{label:"傾度管編號","min-width":"130"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"text"},on:{click:function(r){e.toPath("SOItemEdit",{soId:t.row.id})}}},[e._v("\n          "+e._s(t.row.number)+"\n        ")])]}}])}),r("el-table-column",{attrs:{prop:"OPT",label:"OPT",width:"120"}})],1)],1)},Yr=[],Hr={mixins:[ye],data:function(){return{deleteList:[]}},computed:{soItems:function(){return this.$store.getters.soItems}},methods:{deleteSOItems:function(){var e=Object(Re["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(0!==this.deleteList.length){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.$confirm("確定要刪除？",{confirmButtonText:"確定",cancelButtonText:"取消",type:"warning"});case 5:e.next=11;break;case 7:return e.prev=7,e.t0=e["catch"](2),this.$message({type:"info",message:"已取消刪除"}),e.abrupt("return");case 11:return e.prev=11,e.next=14,this.$store.dispatch("deleteSOItems",this.deleteList);case 14:this.$message({message:"成功刪除",type:"success",showClose:!0,center:!0,duration:1200}),e.next=20;break;case 17:e.prev=17,e.t1=e["catch"](11),this.$message({message:"已選定 OPT 不能刪除",type:"error"});case 20:case"end":return e.stop()}},e,this,[[2,7],[11,17]])}));return function(){return e.apply(this,arguments)}}(),updateDeleteList:function(e){this.deleteList=e.map(function(e){return e.id})}}},Xr=Hr,Jr=Object(ke["a"])(Xr,Br,Yr,!1,null,null,null),Wr=Jr.exports,Kr=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"so-item-create"},[r("el-form",[r("section",[r("h1",[e._v("傾度管設備 配置")]),r("h2",[e._v("基本資料")]),r("el-form-item",{attrs:{label:"編號",required:""}},[r("el-input",{attrs:{placeholder:"請輸入編號"},model:{value:e.soNumber,callback:function(t){e.soNumber=t},expression:"soNumber"}})],1),r("el-form-item",{attrs:{label:"廠牌型號",required:""}},[r("el-select",{staticStyle:{width:"100%"},attrs:{"value-key":"id",placeholder:"請選擇"},model:{value:e.soModel,callback:function(t){e.soModel=t},expression:"soModel"}},e._l(e.soModelsOptions,function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e}})}))],1)],1),e.soItem.soModel.id?[r("h2",[e._v("傾度管參數")]),r("el-form-item",[r("el-button",{attrs:{type:"primary",plain:""},on:{click:e.useModelParameters}},[e._v("\n          恢復原廠值\n        ")])],1),r("section",[r("el-form-item",[r("el-table",{attrs:{data:e.soItemParameters}},[r("el-table-column",{attrs:{prop:"key",label:"參數名稱",width:"100"}}),r("el-table-column",{attrs:{prop:"value",label:"參數值"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-input-number",{attrs:{"controls-position":"right"},on:{change:function(r){e.updateSoParameter(t.row)}},model:{value:t.row.value,callback:function(r){e.$set(t.row,"value",r)},expression:"scope.row.value"}})]}}])})],1)],1)],1),e.soModelAbility.length?r("section",[r("h2",[e._v("可量測的值")]),r("ol",e._l(e.soModelAbility,function(t,n){return r("li",{key:n},[e._v("\n            "+e._s(t)+"\n          ")])}))]):e._e()]:e._e(),r("el-form-item",[r("el-button",{on:{click:function(t){e.toPath("SOItems")}}},[e._v("\n        回上一頁\n      ")]),r("el-button",{attrs:{type:"primary",disabled:!e.soItemParameters.length},on:{click:e.onSubmit}},[e._v("\n        確定送出\n      ")])],1)],2)],1)},Qr=[],Zr={name:"SOItemCreate",mixins:[ye],computed:{soNumber:{get:function(){return this.$store.getters.soItem.number},set:function(e){this.$store.commit("soItemNumber",e)}},soModel:{get:function(){return this.$store.getters.soItem.soModel},set:function(e){this.$store.dispatch("soModelOfItem",e)}},soModelsOptions:function(){return this.$store.getters.soModels},soItem:function(){return this.$store.getters.soItem},soItemParameters:function(){return this.$store.getters.soItemParameters},soModelAbility:function(){var e=this;return this.soModel.id?this.$store.getters.soModels.filter(function(t){return t.id===e.soModel.id}).shift().measurable:[]}},methods:{useModelParameters:function(){this.$store.dispatch("useModelParameters",this.soItem.soModel.id)},updateSoParameter:function(e){var t=e.key,r=e.value;this.$store.commit("soItemParameter",{key:t,value:r})},onSubmit:function(){var e=Object(Re["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.$store.dispatch("createSOItem");case 3:this.$message({message:"成功新增 ".concat(this.soItem.number),type:"success",center:!0,duration:1800}),this.toPath("SOItems"),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),this.$message.error("請重新檢查 ".concat(e.t0.message));case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(){return e.apply(this,arguments)}}()}},en=Zr,tn=Object(ke["a"])(en,Kr,Qr,!1,null,null,null),rn=tn.exports,nn=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"so-item-edit"},[r("el-form",[r("section",[r("h1",[e._v("傾度管設備 配置")]),r("h2",[e._v("基本資料")]),r("el-form-item",{attrs:{label:"編號",required:""}},[r("el-input",{attrs:{placeholder:"請輸入編號"},model:{value:e.soNumber,callback:function(t){e.soNumber=t},expression:"soNumber"}})],1),r("el-form-item",{attrs:{label:"廠牌型號",required:""}},[r("el-select",{staticStyle:{width:"100%"},attrs:{"value-key":"id",placeholder:"請選擇"},model:{value:e.soModel,callback:function(t){e.soModel=t},expression:"soModel"}},e._l(e.soModelsOptions,function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e}})}))],1)],1),e.soItem.soModel.id?[r("h2",[e._v("傾度管參數")]),r("el-form-item",[r("el-button",{attrs:{type:"primary",plain:""},on:{click:e.useModelParameters}},[e._v("\n          恢復原廠值\n        ")])],1),r("section",[r("el-form-item",[r("el-table",{attrs:{data:e.soItemParameters}},[r("el-table-column",{attrs:{prop:"key",label:"參數名稱",width:"100"}}),r("el-table-column",{attrs:{prop:"value",label:"參數值"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-input-number",{attrs:{"controls-position":"right"},on:{change:function(r){e.updateSoParameter(t.row)}},model:{value:t.row.value,callback:function(r){e.$set(t.row,"value",r)},expression:"scope.row.value"}})]}}])})],1)],1)],1),e.soModelAbility.length?r("section",[r("h2",[e._v("可量測的值")]),r("ol",e._l(e.soModelAbility,function(t,n){return r("li",{key:n},[e._v("\n            "+e._s(t)+"\n          ")])}))]):e._e()]:e._e(),r("el-form-item",[r("el-button",{on:{click:function(t){e.toPath("SOItems")}}},[e._v("\n        回上一頁\n      ")]),r("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("\n        確定送出\n      ")])],1)],2)],1)},sn=[],an={mixins:[ye],computed:{soNumber:{get:function(){return this.$store.getters.soItem.number},set:function(e){this.$store.commit("soItemNumber",e)}},soModel:{get:function(){return this.$store.getters.soItem.soModel},set:function(e){this.$store.commit("soModelOfItem",e)}},soModelsOptions:function(){return this.$store.getters.soModels},soItem:function(){return this.$store.getters.soItem},soItemParameters:function(){return this.$store.getters.soItemParameters},soModelAbility:function(){var e=this;return this.soModel.id?this.$store.getters.soModels.filter(function(t){return t.id===e.soModel.id}).shift().measurable:[]}},methods:{useModelParameters:function(){this.$store.dispatch("useModelParameters",this.soItem.soModel.id)},updateSoParameter:function(e){var t=e.key,r=e.value;this.$store.commit("soItemParameter",{key:t,value:r})},onSubmit:function(){var e=Object(Re["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.$store.dispatch("updateSOItem",{soId:this.$route.params.soId,payload:this.soItem});case 3:this.$message({message:"成功編輯 ".concat(this.soItem.number),type:"success",center:!0,duration:1800}),this.toPath("SOItems"),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),this.$message.error("請重新檢查 ".concat(e.t0.message));case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(){return e.apply(this,arguments)}}()}},on=an,cn=Object(ke["a"])(on,nn,sn,!1,null,null,null),un=cn.exports,ln=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"measuresSo"},[r("h1",[e._v("傾度管量測")]),r("el-form",{attrs:{"label-position":"top"}},[r("section",[r("h2",[e._v("基本資料")]),r("p",[e._v("案號： "+e._s(e.project.number))]),r("p",[e._v("名稱： "+e._s(e.project.name))]),r("p",[e._v("傾度管: "+e._s(e.soItem.number))])]),r("section",[r("h2",[e._v("量測作業")]),r("el-form-item",{attrs:{label:"專案階段",required:""}},[r("el-select",{attrs:{placeholder:"第 1 次開挖"},on:{change:e.clearMeasuresDatas},model:{value:e.projectPhaseId,callback:function(t){e.projectPhaseId=t},expression:"projectPhaseId"}},e._l(e.projectPhaseOptions,function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),r("el-form-item",{attrs:{label:"量測點編號",required:""}},[r("el-select",{attrs:{placeholder:"SO-01"},on:{change:e.onChangeLocation},model:{value:e.soLocationNumber,callback:function(t){e.soLocationNumber=t},expression:"soLocationNumber"}},e._l(e.project.soLocation,function(e){return r("el-option",{key:e.number,attrs:{label:e.number,value:e.number}})}))],1),r("el-form-item",{attrs:{label:"傾度管連線 IP",required:""}},[r("el-input",{attrs:{placeholder:"192.168.58.200"},on:{change:e.clearMeasuresDatas},model:{value:e.wiseIP,callback:function(t){e.wiseIP=t},expression:"wiseIP"}})],1),r("span",[e._v("應量測深度 "+e._s(e.currentDepth)+" 公尺")]),r("el-form-item",{attrs:{label:" 請由下往上量，間隔 1m 量測一次","label-width":"300px"}}),r("el-button",{attrs:{disabled:e.measuresSoDatas.length>=e.currentDepth||!e.projectPhaseId||e.isMeasuring||!e.soItem},on:{click:e.measures}},[e.isMeasuring?r("span",[e._v("量測中")]):r("span",[e._v("量測")])])],1),e.measuresSoDatas.length?r("section",[r("p",[e._v("\n        應量測 "+e._s(e.currentDepth)+" 筆，已量測"+e._s(e.measuresSoDatas.length)+"筆\n      ")]),r("el-table",{attrs:{data:e.measuresSoDatas}},[r("el-table-column",{attrs:{fixed:"",type:"index",width:"50"}}),r("el-table-column",{attrs:{prop:"date",label:"日期",width:"100"}}),r("el-table-column",{attrs:{prop:"time",label:"時間",width:"100"}}),r("el-table-column",{attrs:{prop:"depth",label:"深度(m)",width:"80"}}),r("el-table-column",{attrs:{prop:"temp",label:"溫度(c)",width:"150"}}),r("el-table-column",{attrs:{prop:"VoltageX",label:"原始電壓",width:"120"}}),r("el-table-column",{attrs:{prop:"degreeX",label:"傾斜角度(度C)",width:"150"}}),r("el-table-column",{attrs:{prop:"displacement",label:"位移量(cm)",width:"150"}}),r("el-table-column",{attrs:{prop:"totalDisplacement",label:"總位移量(cm)",width:"150"}})],1),r("el-button",{on:{click:e.clearMeasuresDatas}},[e._v("清除資料")]),r("el-button",{attrs:{disabled:e.measuresSoDatas.length<e.currentDepth||e.isSend},on:{click:e.uploadMeasuresDatas}},[e.isSend?r("span",[e._v("已上傳")]):r("span",[e._v("確認無誤並上傳")])])],1):e._e()])],1)},mn=[],pn=r("bc3a"),hn=r.n(pn),fn=(r("f751"),r("2f62")),dn=r("be94"),gn=(r("6b54"),"https://geo-stage.chuen.com.tw:3333/v1"),bn={"Content-Type":"application/json;charset=UTF-8",Accept:"application/json"},vn={"number must be unique":"案號重複","name must be unique":"名稱重複"},wn={200:function(e){return e.data},401:function(e){return Xn.dispatch("logout"),Promise.reject(e.data)},400:function(e){return e.data.result in vn?e.data.message=vn[e.data.result]:e.data.message=e.data.result,Promise.reject(e.data)}},jn={GET:function(){var e=Object(Re["a"])(regeneratorRuntime.mark(function e(t){var r,n,s,a=arguments;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=a.length>1&&void 0!==a[1]?a[1]:"",n=new URLSearchParams(r).toString(),n=n.length?"?"+n:n,e.next=5,hn.a.get("".concat(gn).concat(t).concat(n),{headers:Object(dn["a"])({},bn,{"x-access-token":Xn.getters.token})}).catch(function(e){return e.response});case 5:return s=e.sent,e.abrupt("return",wn[s.status](s));case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),POST:function(){var e=Object(Re["a"])(regeneratorRuntime.mark(function e(t,r){var n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,hn.a.post("".concat(gn).concat(t),r,{headers:Object(dn["a"])({},bn,{"x-access-token":Xn.getters.token})}).catch(function(e){return e.response});case 2:return n=e.sent,e.abrupt("return",wn[n.status](n));case 4:case"end":return e.stop()}},e,this)}));return function(t,r){return e.apply(this,arguments)}}(),PUT:function(){var e=Object(Re["a"])(regeneratorRuntime.mark(function e(t,r){var n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,hn.a.put("".concat(gn).concat(t),r,{headers:Object(dn["a"])({},bn,{"x-access-token":Xn.getters.token})}).catch(function(e){return e.response});case 2:return n=e.sent,e.abrupt("return",wn[n.status](n));case 4:case"end":return e.stop()}},e,this)}));return function(t,r){return e.apply(this,arguments)}}(),DELETE:function(){var e=Object(Re["a"])(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,hn.a.delete("".concat(gn).concat(t),{headers:Object(dn["a"])({},bn,{"x-access-token":Xn.getters.token})}).catch(function(e){return e.response});case 2:return r=e.sent,e.abrupt("return",wn[r.status](r));case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),uploadImg:function(){var e=Object(Re["a"])(regeneratorRuntime.mark(function e(t){var r,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=new FormData,r.append("img",t),e.next=4,hn.a.post("".concat(gn,"/uploadImg"),r,{headers:{"Content-Type":"multipart/form-data","x-access-token":Xn.getters.token}}).catch(function(e){return e.response});case 4:return n=e.sent,e.abrupt("return",wn[n.status](n));case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),exportXls:function(){var e=Object(Re["a"])(regeneratorRuntime.mark(function e(t){var r,n,s,a=arguments;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=a.length>1&&void 0!==a[1]?a[1]:"",n=new URLSearchParams(r).toString(),n=n.length?"?"+n:n,e.next=5,fetch("".concat(gn).concat(t).concat(n),{headers:{"x-access-token":Xn.getters.token}}).catch(function(e){return e.response});case 5:return s=e.sent,e.next=8,s.blob();case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},yn={fetchUser:function(){var e=Object(Re["a"])(regeneratorRuntime.mark(function e(t,r){var n,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.commit,r){e.next=5;break}n("currentUser",{account:"",name:"",password:"000",phone:"",email:"",roleName:"USER",company:null,soItem:null}),e.next=9;break;case 5:return e.next=7,jn.GET("/user/".concat(r));case 7:s=e.sent,n("currentUser",s.data);case 9:case"end":return e.stop()}},e,this)}));return function(t,r){return e.apply(this,arguments)}}(),updateCurrentUser:function(e,t){var r=e.commit;r("currentUser",t)},createUser:function(){var e=Object(Re["a"])(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.getters,e.next=3,jn.POST("/user",{account:r.currentUser.account,name:r.currentUser.name,roleName:r.currentUser.roleName,companyId:r.currentUser.company?r.currentUser.company.id:"",soId:r.currentUser.soItem?r.currentUser.soItem.id:""});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),updateUser:function(){var e=Object(Re["a"])(regeneratorRuntime.mark(function e(t,r){var n,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.getters,s=r.userId,e.next=4,jn.PUT("/user/".concat(s),{account:n.currentUser.account,name:n.currentUser.name,roleName:n.currentUser.roleName,companyId:n.currentUser.company?n.currentUser.company.id:"",soId:n.currentUser.soItem?n.currentUser.soItem.id:""});case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}},e,this)}));return function(t,r){return e.apply(this,arguments)}}(),getUsers:function(){var e=Object(Re["a"])(regeneratorRuntime.mark(function e(t){var r,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,e.next=3,jn.GET("/users");case 3:n=e.sent,r("everyone",n.data);case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),deleteUsers:function(){var e=Object(Re["a"])(regeneratorRuntime.mark(function e(t,r){var n,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.dispatch,s=r.join(","),e.next=4,jn.DELETE("/users/".concat(s));case 4:return e.abrupt("return",n("getUsers"));case 5:case"end":return e.stop()}},e,this)}));return function(t,r){return e.apply(this,arguments)}}()},xn={actions:yn,state:{data:[],one:{}},mutations:{everyone:function(e,t){e.data=t},currentUser:function(e,t){e.one=t},currentUserName:function(e,t){e.one.name=t},currentUserRoleName:function(e,t){e.one.roleName=t},currentUserAccount:function(e,t){e.one.account=t},currentUserCompany:function(e,t){e.one.company={id:t.id,name:t.name}},currentUserSoItem:function(e,t){e.one.soItem={id:t.id,number:t.number}}},getters:{everyone:function(e){return e.data},currentUser:function(e){return e.one},OPTs:function(e){return e.data.filter(function(e){return"OPT"==e.roleName})},USERs:function(e){return e.data.filter(function(e){return"USER"==e.roleName})},optsOfCustomerCompany:function(e,t){return t.OPTs.filter(function(e){return e.company.id===t.project.companyId})},optsOfMyCompany:function(e,t){return t.OPTs.filter(function(e){return e.company.id===t.myCompany.id})},usersOfCustomerCompany:function(e,t){return t.USERs.filter(function(e){return e.company.id===t.project.companyId})},usersOfMyCompany:function(e,t){return t.USERs.filter(function(e){return e.company.id===t.myCompany.id})},currentUserPermissions:function(e,t){var r=t.rolePermissions.filter(function(t){return t.role===e.one.roleName}).shift();return r||(r=t.rolePermissions.slice().shift()),r.permissions}}},Pn={newProject:function(e){var t=e.commit,r={number:"",status:"in-progress",name:"",address:"",companyId:"",sitePlan:"",OPT:[],USER:[],floor:0,vgManagement:[{notice:0,warning:0,action:0}],soManagement:{notice:0,warning:0,action:0},vgIds:[],vgLocation:[],soLocation:[],dataRangeVg:{end:"",start:""}};t("setProject",r),t("resetCreateData")},fetchProject:function(){var e=Object(Re["a"])(regeneratorRuntime.mark(function e(t,r){var n,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.commit,e.next=3,jn.GET("/project/".concat(r));case 3:s=e.sent,n("setProject",s.data);case 5:case"end":return e.stop()}},e,this)}));return function(t,r){return e.apply(this,arguments)}}(),updateCurrentProject:function(e,t){var r=e.commit;r("setProject",t)},createProject:function(){var e=Object(Re["a"])(regeneratorRuntime.mark(function e(t){var r,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.getters,n=Object.assign({},r.project),n.OPT=n.OPT.map(function(e){return e.id}),n.USER=n.USER.map(function(e){return e.id}),n.vgLocation=n.vgLocation.map(function(e){return{number:e.number,steelId:e.steelId}}),n.dataRangeVg=void 0,e.next=8,jn.POST("/project",n);case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),updateProject:function(){var e=Object(Re["a"])(regeneratorRuntime.mark(function e(t,r){var n,s,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.getters,s=r.id,a=Object.assign({},n.project),a.OPT=a.OPT.map(function(e){return e.id}),a.USER=a.USER.map(function(e){return e.id}),a.vgLocation=a.vgLocation.map(function(e){return{number:e.number,steelId:e.steelId,port:e.port}}),a.floor=void 0,a.dataRangeVg=void 0,e.next=10,jn.PUT("/project/".concat(s),a);case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}},e,this)}));return function(t,r){return e.apply(this,arguments)}}(),fetchProjects:function(){var e=Object(Re["a"])(regeneratorRuntime.mark(function e(t){var r,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,e.next=3,jn.GET("/projects");case 3:return n=e.sent,r("setProjects",n.data),e.abrupt("return",Promise.resolve());case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),deleteProjects:function(){var e=Object(Re["a"])(regeneratorRuntime.mark(function e(t,r){var n,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.dispatch,s=r.join(","),e.next=4,jn.DELETE("/projects/".concat(s));case 4:return e.abrupt("return",n("fetchProjects"));case 5:case"end":return e.stop()}},e,this)}));return function(t,r){return e.apply(this,arguments)}}(),uploadConfigImage:function(){var e=Object(Re["a"])(regeneratorRuntime.mark(function e(t,r){var n,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.commit,e.next=3,jn.uploadImg(r);case 3:s=e.sent,n("updateConfigImage",s.url);case 5:case"end":return e.stop()}},e,this)}));return function(t,r){return e.apply(this,arguments)}}(),configVgCode:function(e,t){var r=e.commit,n=e.getters,s=t.totalFloor,a=t.totalVgPreFloor;function o(e,t){return t=t<10?"0".concat(t):"".concat(t),"vg-".concat(e,"-").concat(t)}for(var i=[],c=[],u=n.vgItemsInProject,l=0,m=n.steels.slice().shift(),p=0;p<s;++p){for(var h=0;h<a;++h)i.push({number:o(p+1,h+1),steelId:m.id,steelName:m.name,vgId:u[parseInt(l/14)].id,vgNumber:u[parseInt(l/14)].number,port:l%14+1}),l+=1;c.push({notice:0,warning:0,action:0})}r("project",{property:"vgLocation",value:i}),r("project",{property:"vgManagement",value:c})},configSoCode:function(e,t){var r=e.commit,n=t.depth,s=t.total_location;function a(e){return e=e<10?"0".concat(e):"".concat(e),"so-".concat(e)}for(var o=[],i=0;i<s;++i)o.push({number:a(i+1),depth:n});r("project",{property:"soLocation",value:o})},switchVg:function(e,t){var r=e.state,n=e.commit,s=t.oldVgId,a=t.newVgId,o=r.one.vgIds.indexOf(s);n("switchVg",{index:o,newVgId:a})}},In={state:{data:[],one:{number:"",status:"in-progress",name:"",address:"",companyId:"",sitePlan:"",OPT:[{id:"",name:""}],USER:[{id:"",name:""}],floor:0,vgManagement:[{notice:0,warning:0,action:0}],soManagement:{notice:0,warning:0,action:0},vgIds:[""],vgLocation:[{vgId:"",vgNumber:"",number:"",steelId:"",steelName:"",port:0}],soLocation:[{number:"",depth:0}],dataRangeVg:{end:"",start:""}},currentVgFloor:1,createData:{totalVgPreFloor:0,defaultDepth:0,totalEstimatedSoLocation:0}},mutations:{resetCreateData:function(e){e.createData={totalVgPreFloor:0,defaultDepth:0,totalEstimatedSoLocation:0}},setProjects:function(e,t){e.data=t},setProject:function(e,t){e.one=t},updateConfigImage:function(e,t){e.one.sitePlan=t},project:function(e,t){var r=t.property,n=t.value;e.one[r]=n},switchVg:function(e,t){var r=t.index,n=t.newVgId;e.one.vgIds.splice(r,1,n),e.one.vgIds=Object(Et["a"])(e.one.vgIds)},vgManagementValue:function(e,t){var r=t.label,n=t.value;e.one.vgManagement[e.currentVgFloor-1][r]=n},soManagementValue:function(e,t){var r=t.label,n=t.value;e.one.soManagement[r]=n},currentFloor:function(e,t){e.currentVgFloor=t},totalVgPreFloor:function(e,t){e.createData.totalVgPreFloor=t},steelOfVgLocation:function(e,t){var r=t.location,n=t.selectedSteel,s=e.one.vgLocation.filter(function(e){return e.number===r.number}).shift();s=Object.assign(s,{steelId:n.id,steelName:n.name})},defaultDepth:function(e,t){e.createData.defaultDepth=t},totalEstimatedSoLocation:function(e,t){e.createData.totalEstimatedSoLocation=t}},getters:{projects:function(e,t){var r=t.statusValue2Label;return e.data.map(function(e){return e.status=r[e.status],e})},project:function(e){return e.one},optsInProject:function(e){return e.one.OPT},usersInProject:function(e){return e.one.USER},sitePlan:function(e){return e.one.sitePlan?"".concat("https://geo-stage.chuen.com.tw:3333/v1","/").concat(e.one.sitePlan):""},vgItemIdsInProject:function(e){return e.one.vgIds},vgItemsInProject:function(e,t){return t.vgItems.filter(function(t){return e.one.vgIds.some(function(e){return t.id===e})})},vgItemsNotInProject:function(e,t){return t.vgItemsFree},totalFloor:function(e){return e.one.floor},totalVgLocation:function(e){return e.one.vgLocation.length},totalVgLocationPreFloor:function(e){return Math.max.apply(Math,Object(Et["a"])(e.one.vgLocation.map(function(e){return Number(e.number.split("-").pop())})).concat([0]))},vgLocationCurrFloor:function(e){return e.one.vgLocation.filter(function(t){return parseInt(t.number.split("-")[1])===e.currentVgFloor})},vgManagementValueOfCurrFloor:function(e){return e.one.vgManagement[e.currentVgFloor-1]},soManagementValue:function(e){return e.one.soManagement},totalSoLocation:function(e){return e.one.soLocation.length},totalEstimatedSoLocation:function(e){return e.createData.totalEstimatedSoLocation},soLocation:function(e){return e.one.soLocation},totalVgPreFloor:function(e){return e.createData.totalVgPreFloor},defaultDepth:function(e){return e.createData.defaultDepth},vgMeasuredDataRange:function(e){return{end:new Date(e.one.dataRangeVg.end),start:new Date(e.one.dataRangeVg.start)}},statusValue2Label:function(){return{end:"結案","in-progress":"執行"}},statusOptions:function(){return[{value:"end",label:"結案"},{value:"in-progress",label:"執行"}]}},actions:Pn},kn={fetchProjectPhases:function(){var e=Object(Re["a"])(regeneratorRuntime.mark(function e(t){var r,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,e.next=3,jn.GET("/project-phases");case 3:return n=e.sent,r("setProjectPhases",n.data),e.abrupt("return",Promise.resolve());case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),getProjectPhase:function(){var e=Object(Re["a"])(regeneratorRuntime.mark(function e(t,r){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,jn.GET("/project-phase/".concat(r));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(t,r){return e.apply(this,arguments)}}(),updateProjectPhase:function(){var e=Object(Re["a"])(regeneratorRuntime.mark(function e(t,r){var n,s,a,o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.dispatch,s=r.id,a=r.payload,e.next=4,jn.PUT("/project-phased/".concat(s),a);case 4:return o=e.sent,e.next=7,n("fetchProjectPhases");case 7:return e.abrupt("return",o);case 8:case"end":return e.stop()}},e,this)}));return function(t,r){return e.apply(this,arguments)}}(),deleteProjectPhases:function(){var e=Object(Re["a"])(regeneratorRuntime.mark(function e(t,r){var n,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.dispatch,s=r.join(","),e.next=4,jn.DELETE("/project-phases/".concat(s));case 4:return e.next=6,n("fetchProjectPhases");case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}},e,this)}));return function(t,r){return e.apply(this,arguments)}}(),createProjectPhase:function(){var e=Object(Re["a"])(regeneratorRuntime.mark(function e(t,r){var n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.dispatch,e.next=3,jn.POST("/project-phased",r);case 3:return e.next=5,n("fetchProjectPhases");case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e,this)}));return function(t,r){return e.apply(this,arguments)}}()},_n={actions:kn,state:{data:[]},mutations:{setProjectPhases:function(e,t){e.data=t}},getters:{projectPhases:function(e){return e.data}}},Sn={fetchCompanies:function(){var e=Object(Re["a"])(regeneratorRuntime.mark(function e(t){var r,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,e.next=3,jn.GET("/companies");case 3:return n=e.sent,r("setCompanies",n.data),e.abrupt("return",Promise.resolve());case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),createCompany:function(){var e=Object(Re["a"])(regeneratorRuntime.mark(function e(t,r){var n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.dispatch,e.next=3,jn.POST("/company",r);case 3:return e.abrupt("return",n("fetchCompanies"));case 4:case"end":return e.stop()}},e,this)}));return function(t,r){return e.apply(this,arguments)}}(),deleteCompanies:function(){var e=Object(Re["a"])(regeneratorRuntime.mark(function e(t,r){var n,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.dispatch,s=r.join(","),e.next=4,jn.DELETE("/companies/".concat(s));case 4:return e.abrupt("return",n("fetchCompanies"));case 5:case"end":return e.stop()}},e,this)}));return function(t,r){return e.apply(this,arguments)}}(),updateCompany:function(e,t){var r=t.id,n=t.payload;return jn.PUT("/company/".concat(r),n)}},$n={state:{data:[{id:"",name:""}]},mutations:{setCompanies:function(e,t){e.data=t}},getters:{companies:function(e){return e.data},notMyCompanies:function(e,t){return e.data.filter(function(e){return e.id!==t.myCompany.id})}},actions:Sn},On={fetchVGItems:function(){var e=Object(Re["a"])(regeneratorRuntime.mark(function e(t){var r,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,e.next=3,jn.GET("/vgs");case 3:return n=e.sent,e.abrupt("return",r("vgItems",n.data));case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),deleteVGs:function(){var e=Object(Re["a"])(regeneratorRuntime.mark(function e(t,r){var n,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.dispatch,s=r.join(","),e.next=4,jn.DELETE("/vgs/".concat(s));case 4:return e.next=6,n("fetchVGItems");case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}},e,this)}));return function(t,r){return e.apply(this,arguments)}}(),createVG:function(){var e=Object(Re["a"])(regeneratorRuntime.mark(function e(t,r){var n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.dispatch,e.next=3,jn.POST("/vg",r);case 3:return e.next=5,n("fetchVGItems");case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e,this)}));return function(t,r){return e.apply(this,arguments)}}(),updateVG:function(){var e=Object(Re["a"])(regeneratorRuntime.mark(function e(t,r){var n,s,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.dispatch,s=r.vgId,a=r.payload,e.next=4,jn.PUT("/vg/".concat(s),a);case 4:return e.next=6,n("fetchVGItems");case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}},e,this)}));return function(t,r){return e.apply(this,arguments)}}(),exportVG:function(e,t){return jn.GET("/measures/vg/export",{projectId:t})}},Cn={actions:On,state:{data:[]},mutations:{vgItems:function(e,t){e.data=t}},getters:{vgItems:function(e){return e.data},vgItemsFree:function(e){return e.data.filter(function(e){return null===e.projectName||"使用的專案被刪除"===e.projectName||"專案均結案"===e.projectName})}}},Mn={fetchSteels:function(){var e=Object(Re["a"])(regeneratorRuntime.mark(function e(t){var r,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,e.next=3,jn.GET("/steels");case 3:n=e.sent,r("steels",n.data);case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),fetchSteel:function(){var e=Object(Re["a"])(regeneratorRuntime.mark(function e(t,r){var n,s,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:n=t.commit,s=t.getters,r?(a=s.steels.filter(function(e){return e.id===r}).shift(),n("steel",a)):n("steel",{id:"",name:"",sectionArea:0,es:0,tcm:0,tcg:0});case 2:case"end":return e.stop()}},e,this)}));return function(t,r){return e.apply(this,arguments)}}(),createSteel:function(){var e=Object(Re["a"])(regeneratorRuntime.mark(function e(t){var r,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.dispatch,n=t.getters,e.next=3,jn.POST("/steel",n.steel);case 3:return e.next=5,r("fetchSteels");case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),deleteSteels:function(){var e=Object(Re["a"])(regeneratorRuntime.mark(function e(t,r){var n,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.dispatch,s=r.join(","),e.next=4,jn.DELETE("/steels/".concat(s));case 4:return e.next=6,n("fetchSteels");case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}},e,this)}));return function(t,r){return e.apply(this,arguments)}}(),updateSteel:function(){var e=Object(Re["a"])(regeneratorRuntime.mark(function e(t,r){var n,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.dispatch,s=t.getters,e.next=3,jn.PUT("/steel/".concat(r),s.steel);case 3:return e.next=5,n("fetchSteels");case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e,this)}));return function(t,r){return e.apply(this,arguments)}}()},Rn={actions:Mn,state:{data:[],one:{}},mutations:{steels:function(e,t){e.data=t},steel:function(e,t){e.one=t},steelName:function(e,t){e.one.name=t},steelSectionArea:function(e,t){e.one.sectionArea=t},steelEs:function(e,t){e.one.es=t},steelTcm:function(e,t){e.one.tcm=t},steelTcg:function(e,t){e.one.tcg=t}},getters:{steels:function(e){return e.data},steel:function(e){return e.one}}},Vn={uploadMeasuresDatas:function(e,t){return jn.POST("/measures/so",t)}},Ln={state:{tempFormulaParameter:[37.7705,137.7711,161.2568,131.165,54.3038,9.3219]},getters:{getSO_C:function(e){return e.SO_C},getTempFormulaParameter:function(e){return e.tempFormulaParameter}},mutations:{setSO_C:function(e,t){e.SO_C=t},setTempFormulaParameter:function(e,t){e.tempFormulaParameter=t}},actions:Vn},Dn={deleteSOItems:function(){var e=Object(Re["a"])(regeneratorRuntime.mark(function e(t,r){var n,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.dispatch,s=r.join(","),e.next=4,jn.DELETE("/so-items/".concat(s));case 4:return e.next=6,n("fetchSOItems");case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}},e,this)}));return function(t,r){return e.apply(this,arguments)}}(),fetchSOItem:function(){var e=Object(Re["a"])(regeneratorRuntime.mark(function e(t,r){var n,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.commit,!r){e.next=10;break}return e.next=4,jn.GET("/so-item/".concat(r));case 4:return s=e.sent,e.next=7,n("soItem",s.data);case 7:return e.abrupt("return",e.sent);case 10:return e.next=12,n("soItem",{id:null,number:"",parameters:[],soModelId:null,soModel:{id:null}});case 12:return e.abrupt("return",e.sent);case 13:case"end":return e.stop()}},e,this)}));return function(t,r){return e.apply(this,arguments)}}(),updateSOItem:function(e,t){var r=t.soId,n=t.payload;return jn.PUT("/so-item/".concat(r),n)},fetchSOItems:function(){var e=Object(Re["a"])(regeneratorRuntime.mark(function e(t){var r,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,e.next=3,jn.GET("/so-items");case 3:return n=e.sent,e.abrupt("return",r("soItems",n.data));case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),createSOItem:function(){var e=Object(Re["a"])(regeneratorRuntime.mark(function e(t){var r,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.getters,n=Object.assign(r.soItem),n.soModelId=n.soModel.id,e.next=5,jn.POST("/so-item",n);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),exportSO:function(e,t){return jn.GET("/measures/so/export",{projectId:t})},useModelParameters:function(e,t){var r=e.commit,n=e.getters,s=n.soModels,a=s.filter(function(e){return e.id===t}).shift();r("soItemParameters",a.parameters)},soModelOfItem:function(e,t){var r=e.commit;t&&(r("soItemParameters",t.parameters),r("soModelOfItem",t))}},En={state:{data:[],one:{}},mutations:{soItems:function(e,t){e.data=t},soItem:function(e,t){e.one=t},soItemParameter:function(e,t){var r=t.key,n=t.value;e.one.parameters[r]=n},soItemParameters:function(e,t){e.one.parameters=t},soItemNumber:function(e,t){e.one.number=t},soModelOfItem:function(e,t){e.one.soModel={id:t.id,name:t.name}}},getters:{soItems:function(e){return e.data},soItem:function(e){return e.one},soItemsFree:function(e,t){var r=t.currentUser.name;return e.data.filter(function(e){return null===e.OPT||e.OPT===r})},soItemParameters:function(e){var t=[];for(var r in e.one.parameters)t.push({key:r,value:e.one.parameters[r]});return t}},actions:Dn},Nn={fetchSOModels:function(){var e=Object(Re["a"])(regeneratorRuntime.mark(function e(t){var r,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,e.next=3,jn.GET("/so-models");case 3:return n=e.sent,e.next=6,r("setSOModels",n.data);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},Tn={actions:Nn,state:{data:[]},mutations:{setSOModels:function(e,t){e.data=t}},getters:{soModels:function(e){return e.data}}},Un=r("21a6"),Fn={fetchVgMeasuredData:function(){var e=Object(Re["a"])(regeneratorRuntime.mark(function e(t,r){var n,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.commit,e.next=3,jn.GET("/measures/vg",r);case 3:s=e.sent,n("vgMeasuredData",s.data);case 5:case"end":return e.stop()}},e,this)}));return function(t,r){return e.apply(this,arguments)}}(),fetchSoMeasuredData:function(){var e=Object(Re["a"])(regeneratorRuntime.mark(function e(t,r){var n,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.commit,e.next=3,jn.GET("/measures/so",r);case 3:s=e.sent,n("soMeasuredData",s.data);case 5:case"end":return e.stop()}},e,this)}));return function(t,r){return e.apply(this,arguments)}}(),export:function(){var e=Object(Re["a"])(regeneratorRuntime.mark(function e(t,r){var n,s,a,o,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.getters,s=r.type,a=r.projectId,e.next=4,jn.exportXls("/measures/".concat(s,"/export"),{projectId:a});case 4:return o=e.sent,i=er()().format("MMDD hhmm"),e.next=8,Object(Un["saveAs"])(o,"".concat(n.project.name,"-").concat(s,"-").concat(i,".xlsx"));case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}},e,this)}));return function(t,r){return e.apply(this,arguments)}}()},Gn={state:{vgMeasuredData:[],soMeasuredData:[]},mutations:{vgMeasuredData:function(e,t){e.vgMeasuredData=t},soMeasuredData:function(e,t){e.soMeasuredData=t}},getters:{vgMeasuredData:function(e){return e.vgMeasuredData},dateOfSoMeasuredData:function(e){return e.soMeasuredData.map(function(e){return e.date})},soMeasuredData:function(e){return e.soMeasuredData}},actions:Fn},An={fetchPermissions:function(){var e=Object(Re["a"])(regeneratorRuntime.mark(function e(t){var r,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,e.next=3,jn.GET("/permissions");case 3:n=e.sent,r("setPermissions",n.data);case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),fetchrolePermissions:function(){var e=Object(Re["a"])(regeneratorRuntime.mark(function e(t){var r,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,e.next=3,jn.GET("/role/permissions");case 3:n=e.sent,r("setRolePermissions",n.data);case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),updateRolePermissions:function(){var e=Object(Re["a"])(regeneratorRuntime.mark(function e(t){var r,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.state,n=t.dispatch,e.next=3,jn.PUT("/role/permissions",r.rolePermissions);case 3:return e.next=5,n("fetchrolePermissions");case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),getRoles:function(){var e=Object(Re["a"])(regeneratorRuntime.mark(function e(t){var r,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,e.next=3,jn.GET("/roles");case 3:n=e.sent,r("setRoles",n.data);case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},qn={actions:An,state:{permissions:{},rolePermissions:[{permissions:[{name:"",value:""}],role:""}],roles:[]},mutations:{setPermissions:function(e,t){e.permissions=t},setRolePermissions:function(e,t){t.filter(function(e){return"ADMIN"===e.role}).forEach(function(e){var t=e.permissions.filter(function(e){return"account:CRUD"===e.name}).shift();t.value=!0}),t.filter(function(e){return"ADMIN"!==e.role}).forEach(function(e){var t=e.permissions.filter(function(e){return"account:CRUD"===e.name}).shift();t.value=!1}),t.forEach(function(e){return e.permissions.forEach(function(e){"account:updateSelf"===e.name&&(e.value=!0)})}),e.rolePermissions=t},toggleRolePermissionValue:function(e,t){var r=t.role,n=t.permissionName,s=t.permissionValue,a=e.rolePermissions.filter(function(e){return e.role===r}).shift(),o=a.permissions.filter(function(e){return e.name===n}).shift();o.value=s},setRoles:function(e,t){e.roles=t}},getters:{permissions:function(e){return e.permissions},rolePermissions:function(e){return e.rolePermissions},roles:function(e){return e.roles}}},zn=r("2b27"),Bn=r.n(zn);de["default"].use(Bn.a);var Yn={saveLogin:function(){Bn.a.set("token",Xn.getters.token),Bn.a.set("userId",Xn.getters.myId),Bn.a.set("role",Xn.getters.myRole),Bn.a.set("permissions",Xn.getters.myPermissions)},reloadLogin:function(){Xn.commit("setToken",Bn.a.get("token")),Xn.commit("setMyId",Bn.a.get("userId")),Xn.commit("setMyRole",Bn.a.get("role")),Xn.commit("setMyPermissions",Bn.a.get("permissions"))},clear:function(){Bn.a.set("token",null),Bn.a.set("userId",null),Bn.a.set("role",null),Bn.a.set("permissions",null),Bn.a.remove("token"),Bn.a.remove("userId"),Bn.a.remove("role"),Bn.a.remove("permissions")}},Hn={login:function(){var e=Object(Re["a"])(regeneratorRuntime.mark(function e(t,r){var n,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.commit,e.next=3,jn.POST("/login",r);case 3:return s=e.sent,n("setToken",s.token),n("setMyId",s.userId),n("setMyRole",s.role),n("setMyPermissions",s.permissions),Yn.saveLogin(),e.abrupt("return",Promise.resolve());case 10:case"end":return e.stop()}},e,this)}));return function(t,r){return e.apply(this,arguments)}}(),logout:function(e){var t=e.commit;t("setToken",""),Yn.clear(),ws.push("/")},getMe:function(){var e=Object(Re["a"])(regeneratorRuntime.mark(function e(t){var r,n,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.getters,n=t.commit,e.next=3,jn.GET("/user/".concat(r.myId));case 3:return s=e.sent,e.next=6,n("setMe",s.data);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),updateMe:function(){var e=Object(Re["a"])(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.state,e.next=3,jn.PUT("/user/self",r.me);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),dev:function(){var e=Object(Re["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve("chris");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()};de["default"].use(fn["a"]);var Xn=new fn["a"].Store({modules:{users:xn,projects:In,projectPhases:_n,companies:$n,vgs:Cn,steels:Rn,measureSO:Ln,soItems:En,soModels:Tn,projectMonitor:Gn,rolePermissions:qn},actions:Hn,state:{myId:"",token:"",myRole:"",myPermissions:"",me:{account:"",company:{id:"",name:""},email:"",name:"",password:"",phone:"",roleName:"",soItem:""}},mutations:{setToken:function(e,t){e.token=t},setMyId:function(e,t){e.myId=t},setMyRole:function(e,t){e.myRole=t},setMyPermissions:function(e,t){e.myPermissions=t},setLastPath:function(e,t){e.lastPath=t},setMe:function(e,t){e.me=t},updateMe:function(e,t){e.me=Object.assign(e.me,t)},myPhone:function(e,t){e.me.phone=t},myMail:function(e,t){e.me.email=t},myPassword:function(e,t){e.me.password=t}},getters:{isLogined:function(e){return!!(e.token&&e.myId&&e.myRole&&e.myPermissions)},token:function(e){return e.token},myId:function(e){return e.myId},myRole:function(e){return e.myRole},myPermissions:function(e){return e.myPermissions},lastPath:function(e){return e.lastPath},me:function(e){return e.me},myCompany:function(e){return e.me.company},myPhone:function(e){return e.me.phone},myMail:function(e){return e.me.email},myPassword:function(e){return e.me.password},mySoItem:function(e,t){return e.me.soItem?t.soItem:{number:"(無傾度管)"}}}}),Jn={wiseIP:""},Wn=0,Kn=1,Qn=0,Zn=1,es=3.1415926,ts=function(e,t,r,n){var s,a,o,i;return Jn.wiseIP="http://"+e,rs(Wn,Zn,Kn,Zn).then(function(){return ns(Wn,Qn)}).then(function(){return ns(Kn,Qn)}).then(function(){return ss()}).then(function(e){s=e.data}).then(function(){return ns(Kn,Zn)}).then(function(){return ns(Kn,Qn)}).then(function(){return ss()}).then(function(e){a=e.data}).then(function(){return ns(Kn,Zn)}).then(function(){return ns(Kn,Qn)}).then(function(){return ss()}).then(function(e){o=e.data}).then(function(){rs(Wn,Zn,Kn,Zn)}).then(function(){i=is(a.Eg,s.Eg,o.Eg,r,n,t),t.unshift(i)})};function rs(e,t,r,n){return as("PATCH","/do_value/slot_0",{DOVal:[{Ch:e,Val:t},{Ch:r,Val:n}]})}function ns(e,t){return os(),as("PATCH","/do_value/slot_0",{DOVal:[{Ch:e,Val:t}]})}function ss(){return os(),as("GET","/ai_value/slot_0/ch_0","")}function as(e,t,r){return hn()({method:e,url:Jn.wiseIP+t,data:JSON.stringify(r),headers:{Accept:"application/json",Authorization:"Basic cm9vdDowMDAw"}})}function os(){var e=(new Date).getTime();do{}while((new Date).getTime()-e<500)}function is(e,t,r,n,s,a){var o,i,c,u,l,m,p,h,f,d,g,b;return o=e/1e6,i=t/1e6,c=r/1e6,l=cs(o),u=us(i,l,n),m=us(c,l,n),console.log("temp/slope",l,u,m),p=ls(u),h=ls(m),console.log("degree",p,h),f=ms(p,100),d=ms(h,100),g=a.length?a[0].totalDisplacement+f:f,b=-s+a.length,console.log("displacementXY, totalDisplacement, depth",f,d,g,b),{date:ps(),time:hs(),temp:l,VoltageX:i,degreeX:p,displacement:f,totalDisplacement:g,depth:b}}function cs(e){var t=Xn.getters.getTempFormulaParameter,r=t.reduce(function(t,r,n){return n%2===0?t-r*Math.pow(e,n):t+r*Math.pow(e,n)},0);return r}function us(e,t,r){var n=0,s=r.soModel.id;if("something"===s){var a=r.parameters,o=[a.c0*t*e,a.c1*t*t,a.c2*t,1*a.c3,a.c4*e,a.c5*e*e];n=o.reduce(function(e,t){return e+t},0)}return n}function ls(e){return e/1e3/es*180}function ms(e,t){return Math.sin(e*es/180)*t}function ps(){var e=new Date,t=e.getFullYear(),r=e.getMonth()+1>10?e.getMonth()+1:"0".concat(e.getMonth()+1),n=e.getDate()>10?e.getDate():"0".concat(e.getDate());return"".concat(t,"/").concat(r,"/").concat(n)}function hs(){var e=new Date,t=e.getHours(),r=e.getMinutes()>10?e.getMinutes():"0".concat(e.getMinutes()),n=e.getSeconds()>10?e.getSeconds():"0".concat(e.getSeconds());return"".concat(t,":").concat(r,":").concat(n)}var fs={data:function(){return{wiseIP:"192.168.58.200",measuresSoDatas:[],projectPhaseId:"",soLocationNumber:"",isSend:!1,isMeasuring:!1,currentSoLocationIndex:-1}},methods:{measures:function(){var e=Object(Re["a"])(regeneratorRuntime.mark(function e(){var t,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t=new Promise(function(e){setTimeout(function(){e("Promise A win!")},5e3)}),r=ts(this.wiseIP,this.measuresSoDatas,this.soItem,this.currentDepth),this.isMeasuring){e.next=13;break}return this.isMeasuring=!0,e.prev=4,e.next=7,Promise.race([t,r]);case 7:this.isMeasuring=!1,e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](4),this.isMeasuring=!1;case 13:case"end":return e.stop()}},e,this,[[4,10]])}));return function(){return e.apply(this,arguments)}}(),clearMeasuresDatas:function(){this.measuresSoDatas=[],this.isSend=!1},uploadMeasuresDatas:function(){var e={projectId:this.$route.params.projectId,projectPhaseId:this.projectPhaseId,soLocationNumber:this.soLocationNumber,soItemId:this.soItem.id,soItemParameters:this.soItem.parameters,measureResult:this.measuresSoDatas};this.$store.dispatch("uploadMeasuresDatas",e),this.isSend=!0},onChangeLocation:function(){var e,t=this;e=this.project.soLocation.filter(function(e){return e.number===t.soLocationNumber}),this.currentSoLocationIndex=this.project.soLocation.indexOf(e.shift()),this.clearMeasuresDatas()}},computed:{project:function(){return this.$store.getters.project},projectPhaseOptions:function(){return this.$store.getters.projectPhases},me:function(){return this.$store.getters.me},currentDepth:function(){return~this.currentSoLocationIndex?this.project.soLocation[this.currentSoLocationIndex].depth:0},soItem:function(){return this.$store.getters.mySoItem}},beforeDestroy:function(){"https:"===window.location.protocol&&(window.location.protocol="https:")}},ds=fs,gs=Object(ke["a"])(ds,ln,mn,!1,null,null,null),bs=gs.exports;de["default"].use(Ve["a"]);var vs=new Ve["a"]({mode:"history",base:"/",routes:[{path:"/",name:"Entry",component:Ue},{path:"/user-info",name:"UserInfo",component:Be,meta:{requireAuth:!0},beforeEnter:function(){var e=Object(Re["a"])(regeneratorRuntime.mark(function e(t,r,n){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Xn.dispatch("getMe");case 2:n();case 3:case"end":return e.stop()}},e,this)}));return function(t,r,n){return e.apply(this,arguments)}}()},{path:"/companies",name:"Companies",component:dt,meta:{requireAuth:!0},beforeEnter:function(){var e=Object(Re["a"])(regeneratorRuntime.mark(function e(t,r,n){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Xn.dispatch("fetchCompanies");case 2:n();case 3:case"end":return e.stop()}},e,this)}));return function(t,r,n){return e.apply(this,arguments)}}()},{path:"/users",name:"Users",component:Ke,meta:{requireAuth:!0},beforeEnter:function(){var e=Object(Re["a"])(regeneratorRuntime.mark(function e(t,r,n){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([Xn.dispatch("getUsers")]);case 2:n();case 3:case"end":return e.stop()}},e,this)}));return function(t,r,n){return e.apply(this,arguments)}}()},{path:"/user-create",name:"UserCreate",component:nt,meta:{requireAuth:!0},beforeEnter:function(){var e=Object(Re["a"])(regeneratorRuntime.mark(function e(t,r,n){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([Xn.dispatch("getRoles"),Xn.dispatch("fetchCompanies"),Xn.dispatch("fetchSOItems"),Xn.dispatch("fetchrolePermissions")]);case 2:if("/companies"===r.path){e.next=7;break}return e.next=5,Xn.dispatch("fetchUser",t.params.userId);case 5:e.next=9;break;case 7:return e.next=9,Promise.resolve();case 9:n();case 10:case"end":return e.stop()}},e,this)}));return function(t,r,n){return e.apply(this,arguments)}}()},{path:"/user/:userId",name:"UserEdit",component:ut,meta:{requireAuth:!0},beforeEnter:function(){var e=Object(Re["a"])(regeneratorRuntime.mark(function e(t,r,n){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([Xn.dispatch("getRoles"),Xn.dispatch("fetchCompanies"),Xn.dispatch("fetchSOItems"),Xn.dispatch("fetchrolePermissions")]);case 2:if("/companies"===r.path){e.next=7;break}return e.next=5,Xn.dispatch("fetchUser",t.params.userId);case 5:e.next=9;break;case 7:return e.next=9,Promise.resolve();case 9:n();case 10:case"end":return e.stop()}},e,this)}));return function(t,r,n){return e.apply(this,arguments)}}()},{path:"/permisson-setup",name:"PermissionSetup",component:yt,meta:{requireAuth:!0},beforeEnter:function(){var e=Object(Re["a"])(regeneratorRuntime.mark(function e(t,r,n){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([Xn.dispatch("fetchPermissions"),Xn.dispatch("fetchrolePermissions")]);case 2:n();case 3:case"end":return e.stop()}},e,this)}));return function(t,r,n){return e.apply(this,arguments)}}()},{path:"/projects",name:"Projects",component:Vt,meta:{requireAuth:!0},beforeEnter:function(){var e=Object(Re["a"])(regeneratorRuntime.mark(function e(t,r,n){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Xn.dispatch("fetchProjects");case 2:n();case 3:case"end":return e.stop()}},e,this)}));return function(t,r,n){return e.apply(this,arguments)}}()},{path:"/projects-setting",name:"ProjectsSetting",component:St,meta:{requireAuth:!0},beforeEnter:function(){var e=Object(Re["a"])(regeneratorRuntime.mark(function e(t,r,n){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Xn.dispatch("fetchProjects");case 2:n();case 3:case"end":return e.stop()}},e,this)}));return function(t,r,n){return e.apply(this,arguments)}}()},{path:"/project-create",name:"ProjectCreate",component:At,meta:{requireAuth:!0},beforeEnter:function(){var e=Object(Re["a"])(regeneratorRuntime.mark(function e(t,r,n){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([Xn.dispatch("fetchCompanies"),Xn.dispatch("getMe"),Xn.dispatch("getUsers"),Xn.dispatch("fetchVGItems"),Xn.dispatch("fetchSteels")]);case 2:if("/steels"===r.path){e.next=7;break}return e.next=5,Xn.dispatch("newProject",t.params.projectId);case 5:e.next=9;break;case 7:return e.next=9,Promise.resolve();case 9:n();case 10:case"end":return e.stop()}},e,this)}));return function(t,r,n){return e.apply(this,arguments)}}()},{path:"/project/:projectId",name:"ProjectEdit",component:Xt,meta:{requireAuth:!0},beforeEnter:function(){var e=Object(Re["a"])(regeneratorRuntime.mark(function e(t,r,n){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([Xn.dispatch("getMe"),Xn.dispatch("fetchCompanies"),Xn.dispatch("getUsers"),Xn.dispatch("fetchVGItems"),Xn.dispatch("fetchSteels")]);case 2:if("/steels"===r.path){e.next=7;break}return e.next=5,Xn.dispatch("fetchProject",t.params.projectId);case 5:e.next=9;break;case 7:return e.next=9,Promise.resolve();case 9:n();case 10:case"end":return e.stop()}},e,this)}));return function(t,r,n){return e.apply(this,arguments)}}()},{path:"/project-monitor/:projectId",name:"ProjectMonitor",component:fr,meta:{requireAuth:!0},beforeEnter:function(){var e=Object(Re["a"])(regeneratorRuntime.mark(function e(t,r,n){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Xn.dispatch("fetchProject",t.params.projectId);case 2:n();case 3:case"end":return e.stop()}},e,this)}));return function(t,r,n){return e.apply(this,arguments)}}()},{path:"/measures/so/:projectId",name:"MeasuresSo",component:bs,meta:{requireAuth:!0},beforeEnter:function(){var e=Object(Re["a"])(regeneratorRuntime.mark(function e(t,r,n){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([Xn.dispatch("fetchProject",t.params.projectId),Xn.dispatch("getMe"),Xn.dispatch("fetchProjectPhases")]);case 2:Xn.getters.me.soItem&&Xn.dispatch("fetchSOItem",Xn.getters.me.soItem.id),n();case 4:case"end":return e.stop()}},e,this)}));return function(t,r,n){return e.apply(this,arguments)}}()},{path:"/project-phases",name:"ProjectPhaseList",component:jr,meta:{requireAuth:!0},beforeEnter:function(){var e=Object(Re["a"])(regeneratorRuntime.mark(function e(t,r,n){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Xn.dispatch("fetchProjectPhases");case 2:n();case 3:case"end":return e.stop()}},e,this)}));return function(t,r,n){return e.apply(this,arguments)}}()},{path:"/vg-items",name:"VGItems",component:_r,meta:{requireAuth:!0},beforeEnter:function(){var e=Object(Re["a"])(regeneratorRuntime.mark(function e(t,r,n){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Xn.dispatch("fetchVGItems");case 2:n();case 3:case"end":return e.stop()}},e,this)}));return function(t,r,n){return e.apply(this,arguments)}}()},{path:"/steels",name:"Steels",component:zr,meta:{requireAuth:!0},beforeEnter:function(){var e=Object(Re["a"])(regeneratorRuntime.mark(function e(t,r,n){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Xn.dispatch("fetchSteels");case 2:n();case 3:case"end":return e.stop()}},e,this)}));return function(t,r,n){return e.apply(this,arguments)}}()},{path:"/steel/:steelId",name:"SteelEdit",component:Tr,meta:{requireAuth:!0},beforeEnter:function(){var e=Object(Re["a"])(regeneratorRuntime.mark(function e(t,r,n){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(Xn.getters.steels.length){e.next=8;break}return e.next=3,Xn.dispatch("fetchSteels");case 3:return e.next=5,Xn.dispatch("fetchSteel",t.params.steelId);case 5:n(),e.next=11;break;case 8:return e.next=10,Xn.dispatch("fetchSteel",t.params.steelId);case 10:n();case 11:case"end":return e.stop()}},e,this)}));return function(t,r,n){return e.apply(this,arguments)}}()},{path:"/steel",name:"SteelCreate",component:Rr,meta:{requireAuth:!0},beforeEnter:function(){var e=Object(Re["a"])(regeneratorRuntime.mark(function e(t,r,n){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Xn.dispatch("fetchSteel");case 2:n();case 3:case"end":return e.stop()}},e,this)}));return function(t,r,n){return e.apply(this,arguments)}}()},{path:"/so-items",name:"SOItems",component:Wr,meta:{requireAuth:!0},beforeEnter:function(){var e=Object(Re["a"])(regeneratorRuntime.mark(function e(t,r,n){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Xn.dispatch("fetchSOItems");case 2:n();case 3:case"end":return e.stop()}},e,this)}));return function(t,r,n){return e.apply(this,arguments)}}()},{path:"/so-item-create",name:"SOItemCreate",component:rn,meta:{requireAuth:!0},beforeEnter:function(){var e=Object(Re["a"])(regeneratorRuntime.mark(function e(t,r,n){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([Xn.dispatch("fetchSOItems"),Xn.dispatch("fetchSOModels")]);case 2:return e.next=4,Xn.dispatch("fetchSOItem");case 4:n();case 5:case"end":return e.stop()}},e,this)}));return function(t,r,n){return e.apply(this,arguments)}}()},{path:"/so-item/:soId",name:"SOItemEdit",component:un,meta:{requireAuth:!0},beforeEnter:function(){var e=Object(Re["a"])(regeneratorRuntime.mark(function e(t,r,n){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([Xn.dispatch("fetchSOItem",t.params.soId),Xn.dispatch("fetchSOModels")]);case 2:n();case 3:case"end":return e.stop()}},e,this)}));return function(t,r,n){return e.apply(this,arguments)}}()},{path:"*",redirect:"/"}]});vs.beforeEach(function(){var e=Object(Re["a"])(regeneratorRuntime.mark(function e(t,r,n){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(Xn.getters.isLogined||Yn.reloadLogin(),Xn.getters.isLogined&&"/"===t.path?n({name:"Projects"}):!Xn.getters.isLogined&&t.meta.requireAuth&&n({name:"Entry"}),Xn.getters.me.name){e.next=6;break}return e.next=5,Xn.dispatch("getMe");case 5:n();case 6:n();case 7:case"end":return e.stop()}},e,this)}));return function(t,r,n){return e.apply(this,arguments)}}());var ws=vs,js=r("c87b"),ys=r.n(js),xs=r("4897"),Ps=r.n(xs);Ps.a.use(ys.a),de["default"].use(oe.a);r("1ca9");var Is=r("ecee"),ks=r("c074"),_s=r("9ca8"),Ss=(r("ef97"),r("d28f"),r("627c"),r("007d"),r("95a8"),r("0352"),r("5488")),$s=r.n(Ss);de["default"].use(fe.a),de["default"].use(pe.a),de["default"].use(le.a),de["default"].use(ce.a),de["default"].use(oe.a),de["default"].use(se.a),de["default"].use(re.a),de["default"].use(ee.a),de["default"].use(Q.a),de["default"].use(W.a),de["default"].use(X.a),de["default"].use(Y.a),de["default"].use(z.a),de["default"].use(A.a),de["default"].use(F.a),de["default"].use(T.a),de["default"].use(E.a),de["default"].use(L.a),de["default"].use(R.a),de["default"].use(C.a),de["default"].use($.a),de["default"].use(_.a),de["default"].use(I.a),de["default"].use(x.a),de["default"].use(j.a),de["default"].use(v.a),de["default"].use(g.a),de["default"].use(f.a),de["default"].use(p.a),de["default"].use(l.a),de["default"].use(c.a),de["default"].component("chart",_s["a"]),de["default"].component($s.a.name,$s.a),de["default"].prototype.$message=o.a,de["default"].prototype.$confirm=s.a.confirm,de["default"].prototype.moment=er.a,Is["c"].add(ks["a"]),de["default"].config.productionTip=!1,new de["default"]({router:ws,store:Xn,render:function(e){return e(Me)}}).$mount("#app")},"580f":function(e,t,r){"use strict";var n=r("d804"),s=r.n(n);s.a},"58db":function(e,t,r){},"5c0b":function(e,t,r){"use strict";var n=r("5e27"),s=r.n(n);s.a},"5e27":function(e,t,r){},"704a":function(e,t,r){"use strict";var n=r("176f"),s=r.n(n);s.a},8560:function(e,t,r){},"8c8d":function(e,t,r){"use strict";var n=r("0d6b"),s=r.n(n);s.a},9607:function(e,t,r){},a80a:function(e,t,r){"use strict";var n=r("d2da"),s=r.n(n);s.a},ad35:function(e,t,r){},b379:function(e,t,r){"use strict";var n=r("ba26"),s=r.n(n);s.a},ba26:function(e,t,r){},c05f:function(e,t,r){},d2da:function(e,t,r){},d804:function(e,t,r){},ed0c:function(e,t,r){"use strict";var n=r("58db"),s=r.n(n);s.a},eeb3:function(e,t,r){"use strict";var n=r("36c0"),s=r.n(n);s.a},f23f:function(e,t,r){"use strict";var n=r("ad35"),s=r.n(n);s.a},feeb:function(e,t,r){"use strict";var n=r("543e"),s=r.n(n);s.a}});
//# sourceMappingURL=app.96eeb9d7.js.map